<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>[Github] 2. MyBatis Generator è‡ªå®šä¹‰æ’ä»¶ - GoodyHao's Blog</title><meta name=Description content="Elegance Never Fades"><meta property="og:url" content="https://gooddayday.github.io/zh-cn/2025/09/github-2.-mybatis-generator-custom-plugins/"><meta property="og:site_name" content="GoodyHao's Blog"><meta property="og:title" content="[Github] 2. MyBatis Generator è‡ªå®šä¹‰æ’ä»¶"><meta property="og:description" content="ğŸ”— é¡¹ç›®åœ°å€: mybatis-generator-custome-plugins
ä¸º MyBatis Generator è®¾è®¡çš„å¼ºå¤§è‡ªå®šä¹‰æ’ä»¶é›†åˆï¼Œä¸“é—¨é’ˆå¯¹ MySQL æ•°æ®åº“ç‰¹æ€§ï¼Œæä¾› DTO å±‚ç”Ÿæˆã€Service å±‚è‡ªåŠ¨ç”Ÿæˆç­‰åŠŸèƒ½ã€‚
ğŸš€ åŠŸèƒ½æ¦‚è§ˆ æœ¬æ’ä»¶é›†åˆåŒ…å«ä»¥ä¸‹6ä¸ªè‡ªå®šä¹‰æ’ä»¶ï¼š"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-24T23:46:17+08:00"><meta property="article:modified_time" content="2025-12-06T22:29:56+08:00"><meta property="article:tag" content="Github"><meta property="article:tag" content="MyBatis"><meta property="article:tag" content="Plugins"><meta property="og:image" content="https://gooddayday.github.io/logo.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://gooddayday.github.io/logo.jpg"><meta name=twitter:title content="[Github] 2. MyBatis Generator è‡ªå®šä¹‰æ’ä»¶"><meta name=twitter:description content="ğŸ”— é¡¹ç›®åœ°å€: mybatis-generator-custome-plugins
ä¸º MyBatis Generator è®¾è®¡çš„å¼ºå¤§è‡ªå®šä¹‰æ’ä»¶é›†åˆï¼Œä¸“é—¨é’ˆå¯¹ MySQL æ•°æ®åº“ç‰¹æ€§ï¼Œæä¾› DTO å±‚ç”Ÿæˆã€Service å±‚è‡ªåŠ¨ç”Ÿæˆç­‰åŠŸèƒ½ã€‚
ğŸš€ åŠŸèƒ½æ¦‚è§ˆ æœ¬æ’ä»¶é›†åˆåŒ…å«ä»¥ä¸‹6ä¸ªè‡ªå®šä¹‰æ’ä»¶ï¼š"><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://gooddayday.github.io/zh-cn/2025/09/github-2.-mybatis-generator-custom-plugins/><link rel=prev href=https://gooddayday.github.io/zh-cn/2025/09/customs-1.-customs-idea/><link rel=next href=https://gooddayday.github.io/zh-cn/2025/09/cluster-1.-understanding_raft_algorithm/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"[Github] 2. MyBatis Generator è‡ªå®šä¹‰æ’ä»¶","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/gooddayday.github.io\/zh-cn\/2025\/09\/github-2.-mybatis-generator-custom-plugins\/"},"image":["https:\/\/gooddayday.github.io\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"Github, MyBatis, plugins","wordcount":3421,"url":"https:\/\/gooddayday.github.io\/zh-cn\/2025\/09\/github-2.-mybatis-generator-custom-plugins\/","datePublished":"2025-09-24T23:46:17+08:00","dateModified":"2025-12-06T22:29:56+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"xxxx","logo":"https:\/\/gooddayday.github.io\/images\/logo.jpg"},"author":{"@type":"Person","name":"GoodyHao"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"light"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"light"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/zh-cn/ title="GoodyHao's Blog"><span class=header-title-pre><i class='far fa-kiss-wink-heart fa-fw' aria-hidden=true></i></span>Elegance Never Fades</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/zh-cn/posts/>æ‰€æœ‰æ–‡ç«  </a><a class=menu-item href=/zh-cn/tags/>æ ‡ç­¾ </a><a class=menu-item href=/zh-cn/categories/>åˆ†ç±» </a><a class=menu-item href=/zh-cn/categories/documentation/>æ–‡æ¡£ </a><a class=menu-item href=/zh-cn/about/>å…³äº </a><a class=menu-item href=https://github.com/GOODDAYDAY/GOODDAYDAY.github.io title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=æœç´¢><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=æ¸…ç©º><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a class=menu-item href=/en/2025/09/github-2.-mybatis-generator-custom-plugins/ title=English>English</a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/zh-cn/ title="GoodyHao's Blog"><span class=header-title-pre><i class='far fa-kiss-wink-heart fa-fw' aria-hidden=true></i></span>Elegance Never Fades</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=æœç´¢><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=æ¸…ç©º><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>å–æ¶ˆ</a></div><a class=menu-item href=/zh-cn/posts/ title>æ‰€æœ‰æ–‡ç« </a><a class=menu-item href=/zh-cn/tags/ title>æ ‡ç­¾</a><a class=menu-item href=/zh-cn/categories/ title>åˆ†ç±»</a><a class=menu-item href=/zh-cn/categories/documentation/ title>æ–‡æ¡£</a><a class=menu-item href=/zh-cn/about/ title>å…³äº</a><a class=menu-item href=https://github.com/GOODDAYDAY/GOODDAYDAY.github.io title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i></a><a href=javascript:void(0); class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a class=menu-item href=/en/2025/09/github-2.-mybatis-generator-custom-plugins/ title=English>English</a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>ç›®å½•</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">[Github] 2. MyBatis Generator è‡ªå®šä¹‰æ’ä»¶</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/zh-cn/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>GoodyHao</a></span>&nbsp;<span class=post-category>æ”¶å½•äº <a href=/zh-cn/categories/github/><i class="far fa-folder fa-fw" aria-hidden=true></i>Github</a>&nbsp;<a href=/zh-cn/categories/mybatis/><i class="far fa-folder fa-fw" aria-hidden=true></i>MyBatis</a>&nbsp;<a href=/zh-cn/categories/plugins/><i class="far fa-folder fa-fw" aria-hidden=true></i>Plugins</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2025-09-24>2025-09-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;çº¦ 3421 å­—&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;é¢„è®¡é˜…è¯» 7 åˆ†é’Ÿ&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>ç›®å½•</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#-åŠŸèƒ½æ¦‚è§ˆ>ğŸš€ åŠŸèƒ½æ¦‚è§ˆ</a></li><li><a href=#-ä¾èµ–åˆ†æ>ğŸ“¦ ä¾èµ–åˆ†æ</a><ul><li><a href=#æ ¸å¿ƒä¾èµ–>æ ¸å¿ƒä¾èµ–</a></li><li><a href=#mavenæ’ä»¶é…ç½®>Mavenæ’ä»¶é…ç½®</a></li></ul></li><li><a href=#-æ’ä»¶è¯¦è¿°>ğŸ”§ æ’ä»¶è¯¦è¿°</a><ul><li><a href=#mysqlæ‰©å±•æ’ä»¶>MySQLæ‰©å±•æ’ä»¶</a><ul><li><a href=#insertignoreintoplugin>InsertIgnoreIntoPlugin</a></li><li><a href=#insertonduplicatekeyplugin>InsertOnDuplicateKeyPlugin</a></li><li><a href=#replaceintoplugin>ReplaceIntoPlugin</a></li></ul></li><li><a href=#dtoå±‚ç”Ÿæˆæ’ä»¶>DTOå±‚ç”Ÿæˆæ’ä»¶</a><ul><li><a href=#dtogeneratorplugin>DtoGeneratorPlugin</a></li></ul></li><li><a href=#serviceå±‚ç”Ÿæˆæ’ä»¶>Serviceå±‚ç”Ÿæˆæ’ä»¶</a><ul><li><a href=#servicegeneratorplugin>ServiceGeneratorPlugin</a></li></ul></li><li><a href=#è‡ªå®šä¹‰mapperæ’ä»¶>è‡ªå®šä¹‰Mapperæ’ä»¶</a><ul><li><a href=#customermapperplugin>CustomerMapperPlugin</a></li></ul></li></ul></li><li><a href=#-ä½¿ç”¨æ–¹æ³•>ğŸ’» ä½¿ç”¨æ–¹æ³•</a><ul><li><a href=#æ­¥éª¤1-æ·»åŠ ä¾èµ–>æ­¥éª¤1: æ·»åŠ ä¾èµ–</a></li><li><a href=#æ­¥éª¤2-é…ç½®generatorconfigxml>æ­¥éª¤2: é…ç½®generatorConfig.xml</a></li><li><a href=#æ­¥éª¤3-æ‰§è¡Œä»£ç ç”Ÿæˆ>æ­¥éª¤3: æ‰§è¡Œä»£ç ç”Ÿæˆ</a></li></ul></li><li><a href=#-é…ç½®ç¤ºä¾‹>ğŸ“ é…ç½®ç¤ºä¾‹</a><ul><li><a href=#å•ä¸»é”®è¡¨é…ç½®>å•ä¸»é”®è¡¨é…ç½®</a></li><li><a href=#è”åˆä¸»é”®è¡¨é…ç½®>è”åˆä¸»é”®è¡¨é…ç½®</a></li></ul></li><li><a href=#-ç”Ÿæˆä»£ç åˆ†æ>ğŸ—ï¸ ç”Ÿæˆä»£ç åˆ†æ</a><ul><li><a href=#æ–‡ä»¶ç»“æ„>æ–‡ä»¶ç»“æ„</a></li><li><a href=#æ ¸å¿ƒä»£ç ç‰‡æ®µåˆ†æ>æ ¸å¿ƒä»£ç ç‰‡æ®µåˆ†æ</a><ul><li><a href=#mysqlæ‰©å±•æ–¹æ³•-mapperå±‚>MySQLæ‰©å±•æ–¹æ³• (Mapperå±‚)</a></li><li><a href=#dtoç±»-æ•°æ®ä¼ è¾“å±‚>DTOç±» (æ•°æ®ä¼ è¾“å±‚)</a></li><li><a href=#serviceæ¥å£-æœåŠ¡å±‚æ¥å£>Serviceæ¥å£ (æœåŠ¡å±‚æ¥å£)</a></li><li><a href=#serviceå®ç°-æœåŠ¡å±‚å®ç°>Serviceå®ç° (æœåŠ¡å±‚å®ç°)</a></li></ul></li><li><a href=#å…³é”®ç‰¹æ€§åˆ†æ>å…³é”®ç‰¹æ€§åˆ†æ</a><ul><li><a href=#è”åˆä¸»é”®æ”¯æŒ>è”åˆä¸»é”®æ”¯æŒ</a></li><li><a href=#mysqlç‰¹æœ‰åŠŸèƒ½>MySQLç‰¹æœ‰åŠŸèƒ½</a></li><li><a href=#è‡ªåŠ¨åŒ–ç¨‹åº¦>è‡ªåŠ¨åŒ–ç¨‹åº¦</a></li></ul></li></ul></li><li><a href=#-é¡¹ç›®ç»“æ„>ğŸ—ï¸ é¡¹ç›®ç»“æ„</a></li><li><a href=#-ä½¿ç”¨å»ºè®®>ğŸ¯ ä½¿ç”¨å»ºè®®</a></li><li><a href=#-æºç æ·±åº¦åˆ†æ>ğŸ” æºç æ·±åº¦åˆ†æ</a><ul><li><a href=#æ’ä»¶æ¶æ„æ¦‚è§ˆ>æ’ä»¶æ¶æ„æ¦‚è§ˆ</a></li><li><a href=#insertignoreintoplugin-å®ç°åˆ†æ>InsertIgnoreIntoPlugin å®ç°åˆ†æ</a><ul><li><a href=#æ ¸å¿ƒæ–¹æ³•ç”Ÿæˆç­–ç•¥>æ ¸å¿ƒæ–¹æ³•ç”Ÿæˆç­–ç•¥</a></li><li><a href=#å…³é”®æŠ€æœ¯åˆ›æ–°>å…³é”®æŠ€æœ¯åˆ›æ–°</a></li></ul></li><li><a href=#dtogeneratorplugin-å®ç°åˆ†æ>DtoGeneratorPlugin å®ç°åˆ†æ</a><ul><li><a href=#åŒ…åè§£æç®—æ³•>åŒ…åè§£æç®—æ³•</a></li><li><a href=#å¸¦å…ƒæ•°æ®ä¿ç•™çš„å­—æ®µç”Ÿæˆ>å¸¦å…ƒæ•°æ®ä¿ç•™çš„å­—æ®µç”Ÿæˆ</a></li></ul></li><li><a href=#servicegeneratorplugin-å®ç°åˆ†æ>ServiceGeneratorPlugin å®ç°åˆ†æ</a><ul><li><a href=#è”åˆä¸»é”®è§£æ>è”åˆä¸»é”®è§£æ</a></li><li><a href=#serviceå®ç°æ¨¡å¼>Serviceå®ç°æ¨¡å¼</a></li></ul></li><li><a href=#é«˜çº§æ¨¡å¼å’ŒæŠ€æœ¯>é«˜çº§æ¨¡å¼å’ŒæŠ€æœ¯</a><ul><li><a href=#ç±»å‹å®‰å…¨å¼ºåŒ–>ç±»å‹å®‰å…¨å¼ºåŒ–</a></li><li><a href=#sqlæ³¨å…¥é˜²æŠ¤>SQLæ³¨å…¥é˜²æŠ¤</a></li><li><a href=#å†…å­˜é«˜æ•ˆç”Ÿæˆ>å†…å­˜é«˜æ•ˆç”Ÿæˆ</a></li></ul></li><li><a href=#è‡ªå®šä¹‰å¼€å‘æ‰©å±•ç‚¹>è‡ªå®šä¹‰å¼€å‘æ‰©å±•ç‚¹</a><ul><li><a href=#è‡ªå®šä¹‰æ’ä»¶æ¨¡æ¿>è‡ªå®šä¹‰æ’ä»¶æ¨¡æ¿</a></li><li><a href=#é…ç½®é©±åŠ¨è¡Œä¸º>é…ç½®é©±åŠ¨è¡Œä¸º</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><blockquote><p><strong>ğŸ”— é¡¹ç›®åœ°å€</strong>: <a href=https://github.com/GOODDAYDAY/mybatis-generator-custome-plugins target=_blank rel="noopener noreffer">mybatis-generator-custome-plugins</a></p></blockquote><p>ä¸º MyBatis Generator è®¾è®¡çš„å¼ºå¤§è‡ªå®šä¹‰æ’ä»¶é›†åˆï¼Œä¸“é—¨é’ˆå¯¹ MySQL æ•°æ®åº“ç‰¹æ€§ï¼Œæä¾› DTO å±‚ç”Ÿæˆã€Service å±‚è‡ªåŠ¨ç”Ÿæˆç­‰åŠŸèƒ½ã€‚</p><h2 id=-åŠŸèƒ½æ¦‚è§ˆ>ğŸš€ åŠŸèƒ½æ¦‚è§ˆ</h2><p>æœ¬æ’ä»¶é›†åˆåŒ…å«ä»¥ä¸‹6ä¸ªè‡ªå®šä¹‰æ’ä»¶ï¼š</p><table><thead><tr><th>æ’ä»¶åç§°</th><th>åŠŸèƒ½æè¿°</th><th>æ ¸å¿ƒç‰¹æ€§</th></tr></thead><tbody><tr><td><code>InsertIgnoreIntoPlugin</code></td><td>MySQL INSERT IGNOREè¯­å¥æ”¯æŒ</td><td>æ‰¹é‡æ’å…¥å¿½ç•¥é‡å¤è®°å½•</td></tr><tr><td><code>InsertOnDuplicateKeyPlugin</code></td><td>MySQL ON DUPLICATE KEY UPDATEæ”¯æŒ</td><td>æ’å…¥å†²çªæ—¶è‡ªåŠ¨æ›´æ–°</td></tr><tr><td><code>ReplaceIntoPlugin</code></td><td>MySQL REPLACE INTOè¯­å¥æ”¯æŒ</td><td>æ›¿æ¢æ’å…¥æ“ä½œ</td></tr><tr><td><code>DtoGeneratorPlugin</code></td><td>DTOå±‚ä»£ç ç”Ÿæˆ</td><td>Lombokæ³¨è§£ï¼ŒEntityè½¬æ¢æ–¹æ³•</td></tr><tr><td><code>ServiceGeneratorPlugin</code></td><td>Serviceå±‚ä»£ç ç”Ÿæˆ</td><td>æ¥å£+å®ç°ï¼Œå®Œæ•´CRUDæ“ä½œ</td></tr><tr><td><code>CustomerMapperPlugin</code></td><td>è‡ªå®šä¹‰Mapperç”Ÿæˆ</td><td>æ‰©å±•åŸç”ŸMapperåŠŸèƒ½</td></tr></tbody></table><h2 id=-ä¾èµ–åˆ†æ>ğŸ“¦ ä¾èµ–åˆ†æ</h2><h3 id=æ ¸å¿ƒä¾èµ–>æ ¸å¿ƒä¾èµ–</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=c>&lt;!-- MyBatis Generatoræ ¸å¿ƒä¾èµ– --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.mybatis.generator<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>mybatis-generator-core<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>1.4.2<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- MyBatis Dynamic SQLæ”¯æŒ --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.mybatis.dynamic-sql<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>mybatis-dynamic-sql<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>1.5.2<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- MyBatis Spring Booté›†æˆ --&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.mybatis.spring.boot<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>3.0.5<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=mavenæ’ä»¶é…ç½®>Mavenæ’ä»¶é…ç½®</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;plugin&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>org.mybatis.generator<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>mybatis-generator-maven-plugin<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>1.4.2<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;configuration&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;verbose&gt;</span>true<span class=nt>&lt;/verbose&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;overwrite&gt;</span>true<span class=nt>&lt;/overwrite&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/configuration&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;dependencies&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;groupId&gt;</span>com.goody.utils<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;artifactId&gt;</span>mybatis-generator-custome-plugins<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;version&gt;</span>1.0.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/dependencies&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/plugin&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=-æ’ä»¶è¯¦è¿°>ğŸ”§ æ’ä»¶è¯¦è¿°</h2><h3 id=mysqlæ‰©å±•æ’ä»¶>MySQLæ‰©å±•æ’ä»¶</h3><h4 id=insertignoreintoplugin>InsertIgnoreIntoPlugin</h4><ul><li><strong>åŠŸèƒ½</strong>: ä¸ºMapperæ·»åŠ <code>INSERT IGNORE</code>è¯­å¥æ”¯æŒ</li><li><strong>ç”Ÿæˆæ–¹æ³•</strong>: <code>insertIgnoreCustom()</code>, <code>insertIgnoreBatchCustom()</code></li><li><strong>åº”ç”¨åœºæ™¯</strong>: æ‰¹é‡æ’å…¥æ—¶å¿½ç•¥ä¸»é”®å†²çªè®°å½•</li></ul><h4 id=insertonduplicatekeyplugin>InsertOnDuplicateKeyPlugin</h4><ul><li><strong>åŠŸèƒ½</strong>: ä¸ºMapperæ·»åŠ <code>ON DUPLICATE KEY UPDATE</code>è¯­å¥æ”¯æŒ</li><li><strong>ç”Ÿæˆæ–¹æ³•</strong>: <code>insertOnDuplicateKeyCustom()</code>, <code>insertOnDuplicateKeyBatchCustom()</code></li><li><strong>åº”ç”¨åœºæ™¯</strong>: æ’å…¥æ—¶é‡åˆ°é‡å¤é”®åˆ™æ›´æ–°è®°å½•</li></ul><h4 id=replaceintoplugin>ReplaceIntoPlugin</h4><ul><li><strong>åŠŸèƒ½</strong>: ä¸ºMapperæ·»åŠ <code>REPLACE INTO</code>è¯­å¥æ”¯æŒ</li><li><strong>ç”Ÿæˆæ–¹æ³•</strong>: <code>replaceIntoCustom()</code>, <code>replaceIntoBatchCustom()</code></li><li><strong>åº”ç”¨åœºæ™¯</strong>: å­˜åœ¨åˆ™æ›¿æ¢ï¼Œä¸å­˜åœ¨åˆ™æ’å…¥</li></ul><h3 id=dtoå±‚ç”Ÿæˆæ’ä»¶>DTOå±‚ç”Ÿæˆæ’ä»¶</h3><h4 id=dtogeneratorplugin>DtoGeneratorPlugin</h4><ul><li><strong>åŠŸèƒ½</strong>: è‡ªåŠ¨ç”ŸæˆDTOç±»</li><li><strong>ç‰¹æ€§</strong>:<ul><li>Lombokæ³¨è§£æ”¯æŒ(<code>@Data</code>, <code>@Builder</code>, <code>@AllArgsConstructor</code>, <code>@NoArgsConstructor</code>)</li><li>è‡ªåŠ¨ç”Ÿæˆ<code>fromEntity()</code>å’Œ<code>toEntity()</code>è½¬æ¢æ–¹æ³•</li><li>åŒ…ç»“æ„: <code>*.model.dto</code></li></ul></li></ul><h3 id=serviceå±‚ç”Ÿæˆæ’ä»¶>Serviceå±‚ç”Ÿæˆæ’ä»¶</h3><h4 id=servicegeneratorplugin>ServiceGeneratorPlugin</h4><ul><li><strong>åŠŸèƒ½</strong>: è‡ªåŠ¨ç”ŸæˆServiceæ¥å£å’Œå®ç°ç±»</li><li><strong>ç‰¹æ€§</strong>:<ul><li>å®Œæ•´CRUDæ“ä½œæ–¹æ³•</li><li>æ”¯æŒå•ä¸»é”®å’Œè”åˆä¸»é”®</li><li>Springæ³¨è§£æ”¯æŒ(<code>@Service</code>, <code>@Autowired</code>)</li><li>åŒ…ç»“æ„: <code>*.service.interfaces</code> å’Œ <code>*.service.impl</code></li></ul></li></ul><h3 id=è‡ªå®šä¹‰mapperæ’ä»¶>è‡ªå®šä¹‰Mapperæ’ä»¶</h3><h4 id=customermapperplugin>CustomerMapperPlugin</h4><ul><li><strong>åŠŸèƒ½</strong>: ç”Ÿæˆæ‰©å±•Mapperæ¥å£</li><li><strong>åŒ…ç»“æ„</strong>: <code>*.dao.customer</code></li></ul><h2 id=-ä½¿ç”¨æ–¹æ³•>ğŸ’» ä½¿ç”¨æ–¹æ³•</h2><h3 id=æ­¥éª¤1-æ·»åŠ ä¾èµ–>æ­¥éª¤1: æ·»åŠ ä¾èµ–</h3><p>å°†æ’ä»¶æ·»åŠ åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;groupId&gt;</span>com.goody.utils<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;artifactId&gt;</span>mybatis-generator-custome-plugins<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;version&gt;</span>1.0.0<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ­¥éª¤2-é…ç½®generatorconfigxml>æ­¥éª¤2: é…ç½®generatorConfig.xml</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=cp>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE generatorConfiguration
</span></span></span><span class=line><span class=cl><span class=cp>    PUBLIC &#34;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&#34;
</span></span></span><span class=line><span class=cl><span class=cp>    &#34;https://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&#34;&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;generatorConfiguration&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;classPathEntry</span> <span class=na>location=</span><span class=s>&#34;${user.home}/.m2/repository/mysql/mysql-connector-java/8.0.28/mysql-connector-java-8.0.28.jar&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;context</span> <span class=na>id=</span><span class=s>&#34;dao&#34;</span> <span class=na>targetRuntime=</span><span class=s>&#34;MyBatis3DynamicSql&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;autoDelimitKeywords&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;beginningDelimiter&#34;</span> <span class=na>value=</span><span class=s>&#34;`&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;endingDelimiter&#34;</span> <span class=na>value=</span><span class=s>&#34;`&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- æ ‡å‡†æ’ä»¶ --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin</span> <span class=na>type=</span><span class=s>&#34;org.mybatis.generator.plugins.SerializablePlugin&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin</span> <span class=na>type=</span><span class=s>&#34;org.mybatis.generator.plugins.EqualsHashCodePlugin&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin</span> <span class=na>type=</span><span class=s>&#34;org.mybatis.generator.plugins.ToStringPlugin&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin</span> <span class=na>type=</span><span class=s>&#34;org.mybatis.generator.plugins.FluentBuilderMethodsPlugin&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- è‡ªå®šä¹‰æ’ä»¶ --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin</span> <span class=na>type=</span><span class=s>&#34;com.goody.utils.mybatis.plugin.InsertIgnoreIntoPlugin&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin</span> <span class=na>type=</span><span class=s>&#34;com.goody.utils.mybatis.plugin.InsertOnDuplicateKeyPlugin&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin</span> <span class=na>type=</span><span class=s>&#34;com.goody.utils.mybatis.plugin.ReplaceIntoPlugin&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin</span> <span class=na>type=</span><span class=s>&#34;com.goody.utils.mybatis.plugin.DtoGeneratorPlugin&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin</span> <span class=na>type=</span><span class=s>&#34;com.goody.utils.mybatis.plugin.ServiceGeneratorPlugin&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;plugin</span> <span class=na>type=</span><span class=s>&#34;com.goody.utils.mybatis.plugin.CustomerMapperPlugin&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;commentGenerator&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;addRemarkComments&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;suppressDate&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/commentGenerator&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;jdbcConnection</span> <span class=na>driverClass=</span><span class=s>&#34;com.mysql.cj.jdbc.Driver&#34;</span>
</span></span><span class=line><span class=cl>                        <span class=na>connectionURL=</span><span class=s>&#34;jdbc:mysql://127.0.0.1:3306/your_database&#34;</span>
</span></span><span class=line><span class=cl>                        <span class=na>userId=</span><span class=s>&#34;your_username&#34;</span>
</span></span><span class=line><span class=cl>                        <span class=na>password=</span><span class=s>&#34;your_password&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;useSSL&#34;</span> <span class=na>value=</span><span class=s>&#34;false&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;serverTimezone&#34;</span> <span class=na>value=</span><span class=s>&#34;Asia/Shanghai&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;nullCatalogMeansCurrent&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/jdbcConnection&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;javaTypeResolver</span> <span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;forceBigDecimals&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;useJSR310Types&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/javaTypeResolver&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;javaModelGenerator</span> <span class=na>targetPackage=</span><span class=s>&#34;com.yourpackage.model.entity&#34;</span>
</span></span><span class=line><span class=cl>                           <span class=na>targetProject=</span><span class=s>&#34;src/main/java&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;enableSubPackages&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;trimStrings&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/javaModelGenerator&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;javaClientGenerator</span> <span class=na>type=</span><span class=s>&#34;ANNOTATEDMAPPER&#34;</span>
</span></span><span class=line><span class=cl>                           <span class=na>targetPackage=</span><span class=s>&#34;com.yourpackage.model.dao&#34;</span>
</span></span><span class=line><span class=cl>                           <span class=na>targetProject=</span><span class=s>&#34;src/main/java&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;enableSubPackages&#34;</span> <span class=na>value=</span><span class=s>&#34;true&#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/javaClientGenerator&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- é…ç½®è¦ç”Ÿæˆçš„è¡¨ --&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;table</span> <span class=na>schema=</span><span class=s>&#34;your_schema&#34;</span> <span class=na>tableName=</span><span class=s>&#34;your_table&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>            <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;useActualColumnNames&#34;</span> <span class=na>value=</span><span class=s>&#34;false&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>        <span class=nt>&lt;/table&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;/context&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/generatorConfiguration&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ­¥éª¤3-æ‰§è¡Œä»£ç ç”Ÿæˆ>æ­¥éª¤3: æ‰§è¡Œä»£ç ç”Ÿæˆ</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mvn mybatis-generator:generate
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=/svg/loading.min.svg data-src=/images/8.%20MyBatis%20Generator%20Custom%20Plugins/presentation.gif data-srcset="/images/8.%20MyBatis%20Generator%20Custom%20Plugins/presentation.gif, /images/8.%20MyBatis%20Generator%20Custom%20Plugins/presentation.gif 1.5x, /images/8.%20MyBatis%20Generator%20Custom%20Plugins/presentation.gif 2x" data-sizes=auto alt=/images/8.%20MyBatis%20Generator%20Custom%20Plugins/presentation.gif title=presentation.gif></p><h2 id=-é…ç½®ç¤ºä¾‹>ğŸ“ é…ç½®ç¤ºä¾‹</h2><h3 id=å•ä¸»é”®è¡¨é…ç½®>å•ä¸»é”®è¡¨é…ç½®</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;table</span> <span class=na>schema=</span><span class=s>&#34;toy&#34;</span> <span class=na>tableName=</span><span class=s>&#34;example_single_pk&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;useActualColumnNames&#34;</span> <span class=na>value=</span><span class=s>&#34;false&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/table&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=è”åˆä¸»é”®è¡¨é…ç½®>è”åˆä¸»é”®è¡¨é…ç½®</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;table</span> <span class=na>schema=</span><span class=s>&#34;toy&#34;</span> <span class=na>tableName=</span><span class=s>&#34;example_double_pk&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>&lt;property</span> <span class=na>name=</span><span class=s>&#34;useActualColumnNames&#34;</span> <span class=na>value=</span><span class=s>&#34;false&#34;</span><span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/table&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=-ç”Ÿæˆä»£ç åˆ†æ>ğŸ—ï¸ ç”Ÿæˆä»£ç åˆ†æ</h2><p>æ’ä»¶ä¼šä¸ºæ¯ä¸ªè¡¨ç”Ÿæˆå®Œæ•´çš„ä»£ç ç»“æ„ï¼š</p><h3 id=æ–‡ä»¶ç»“æ„>æ–‡ä»¶ç»“æ„</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>src/main/java/
</span></span><span class=line><span class=cl>â”œâ”€â”€ com/yourpackage/model/
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ entity/              # Entityå®ä½“ç±»
</span></span><span class=line><span class=cl>â”‚   â”‚   â”œâ”€â”€ Example.java
</span></span><span class=line><span class=cl>â”‚   â”‚   â””â”€â”€ ExampleDoublePk.java
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ dao/                 # æ ‡å‡†Mapperæ¥å£
</span></span><span class=line><span class=cl>â”‚   â”‚   â”œâ”€â”€ ExampleMapper.java
</span></span><span class=line><span class=cl>â”‚   â”‚   â”œâ”€â”€ ExampleDynamicSqlSupport.java
</span></span><span class=line><span class=cl>â”‚   â”‚   â””â”€â”€ customer/        # è‡ªå®šä¹‰Mapperæ¥å£
</span></span><span class=line><span class=cl>â”‚   â”‚       â””â”€â”€ CustomerExampleMapper.java
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ dto/                 # DTOç±»
</span></span><span class=line><span class=cl>â”‚       â”œâ”€â”€ ExampleDTO.java
</span></span><span class=line><span class=cl>â”‚       â””â”€â”€ ExampleDoublePkDTO.java
</span></span><span class=line><span class=cl>â”œâ”€â”€ service/
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ interfaces/          # Serviceæ¥å£
</span></span><span class=line><span class=cl>â”‚   â”‚   â”œâ”€â”€ IExampleService.java
</span></span><span class=line><span class=cl>â”‚   â”‚   â””â”€â”€ IExampleDoublePkService.java
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ impl/               # Serviceå®ç°
</span></span><span class=line><span class=cl>â”‚       â”œâ”€â”€ ExampleServiceImpl.java
</span></span><span class=line><span class=cl>â”‚       â””â”€â”€ ExampleDoublePkServiceImpl.java
</span></span></code></pre></td></tr></table></div></div><h3 id=æ ¸å¿ƒä»£ç ç‰‡æ®µåˆ†æ>æ ¸å¿ƒä»£ç ç‰‡æ®µåˆ†æ</h3><h4 id=mysqlæ‰©å±•æ–¹æ³•-mapperå±‚>MySQLæ‰©å±•æ–¹æ³• (Mapperå±‚)</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Mapper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>ExampleMapper</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// æ ‡å‡†ç”Ÿæˆçš„æ–¹æ³•...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// INSERT IGNOREæ”¯æŒ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Insert</span><span class=p>({</span><span class=s>&#34;&lt;script&gt;&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; INSERT IGNORE INTO example&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; (`id`, `name`, `created`, `updated`)&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; VALUES&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; (#{item.id}, #{item.name}, #{item.created}, #{item.updated})&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=s>&#34;&lt;/script&gt;&#34;</span><span class=p>})</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>insertIgnoreCustom</span><span class=p>(</span><span class=nd>@Param</span><span class=p>(</span><span class=s>&#34;item&#34;</span><span class=p>)</span><span class=w> </span><span class=n>Example</span><span class=w> </span><span class=n>record</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// æ‰¹é‡INSERT IGNORE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Insert</span><span class=p>({</span><span class=s>&#34;&lt;script&gt;&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; INSERT IGNORE INTO example&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; (`id`, `name`, `created`, `updated`)&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; VALUES&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; &lt;foreach collection=&#39;items&#39; item=&#39;item&#39; separator=&#39;,&#39;&gt;&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34;   (#{item.id}, #{item.name}, #{item.created}, #{item.updated})&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; &lt;/foreach&gt;&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=s>&#34;&lt;/script&gt;&#34;</span><span class=p>})</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>insertIgnoreBatchCustom</span><span class=p>(</span><span class=nd>@Param</span><span class=p>(</span><span class=s>&#34;items&#34;</span><span class=p>)</span><span class=w> </span><span class=n>Collection</span><span class=o>&lt;</span><span class=n>Example</span><span class=o>&gt;</span><span class=w> </span><span class=n>records</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ON DUPLICATE KEY UPDATEæ”¯æŒ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Insert</span><span class=p>({</span><span class=s>&#34;&lt;script&gt;&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; INSERT INTO example&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; (`id`, `name`, `created`, `updated`)&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; VALUES&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; (#{item.id}, #{item.name}, #{item.created}, #{item.updated})&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; AS r&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34; ON DUPLICATE KEY UPDATE&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34;   name = r.name, updated = r.updated&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=s>&#34;&lt;/script&gt;&#34;</span><span class=p>})</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>insertOnDuplicateKeyCustom</span><span class=p>(</span><span class=nd>@Param</span><span class=p>(</span><span class=s>&#34;item&#34;</span><span class=p>)</span><span class=w> </span><span class=n>Example</span><span class=w> </span><span class=n>record</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=dtoç±»-æ•°æ®ä¼ è¾“å±‚>DTOç±» (æ•°æ®ä¼ è¾“å±‚)</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@AllArgsConstructor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@NoArgsConstructor</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nd>@Builder</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ExampleDTO</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>LocalDateTime</span><span class=w> </span><span class=n>created</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>LocalDateTime</span><span class=w> </span><span class=n>updated</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Entityè½¬DTO</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=n>ExampleDTO</span><span class=w> </span><span class=nf>fromEntity</span><span class=p>(</span><span class=n>Example</span><span class=w> </span><span class=n>entity</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>entity</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>ExampleDTO</span><span class=p>.</span><span class=na>builder</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>id</span><span class=p>(</span><span class=n>entity</span><span class=p>.</span><span class=na>getId</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>name</span><span class=p>(</span><span class=n>entity</span><span class=p>.</span><span class=na>getName</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>created</span><span class=p>(</span><span class=n>entity</span><span class=p>.</span><span class=na>getCreated</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>updated</span><span class=p>(</span><span class=n>entity</span><span class=p>.</span><span class=na>getUpdated</span><span class=p>())</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// DTOè½¬Entity</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Example</span><span class=w> </span><span class=nf>toEntity</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Example</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>withId</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>withName</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>name</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>withCreated</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>created</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>withUpdated</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=na>updated</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=serviceæ¥å£-æœåŠ¡å±‚æ¥å£>Serviceæ¥å£ (æœåŠ¡å±‚æ¥å£)</h4><p><strong>å•ä¸»é”®Serviceæ¥å£</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>IExampleService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>save</span><span class=p>(</span><span class=n>ExampleDTO</span><span class=w> </span><span class=n>dto</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>saveBatch</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>ExampleDTO</span><span class=o>&gt;</span><span class=w> </span><span class=n>dtoList</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>update</span><span class=p>(</span><span class=n>ExampleDTO</span><span class=w> </span><span class=n>dto</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>deleteById</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>);</span><span class=w>                    </span><span class=c1>// å•å‚æ•°</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ExampleDTO</span><span class=w> </span><span class=nf>findById</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>);</span><span class=w>               </span><span class=c1>// å•å‚æ•°</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>List</span><span class=o>&lt;</span><span class=n>ExampleDTO</span><span class=o>&gt;</span><span class=w> </span><span class=nf>findAll</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p><strong>è”åˆä¸»é”®Serviceæ¥å£</strong> (æ’ä»¶å·²ä¿®å¤):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>IExampleDoublePkService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>save</span><span class=p>(</span><span class=n>ExampleDoublePkDTO</span><span class=w> </span><span class=n>dto</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>saveBatch</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>ExampleDoublePkDTO</span><span class=o>&gt;</span><span class=w> </span><span class=n>dtoList</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>update</span><span class=p>(</span><span class=n>ExampleDoublePkDTO</span><span class=w> </span><span class=n>dto</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>deleteById</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id2</span><span class=p>);</span><span class=w>          </span><span class=c1>// å¤šå‚æ•°æ”¯æŒ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>ExampleDoublePkDTO</span><span class=w> </span><span class=nf>findById</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id2</span><span class=p>);</span><span class=w>  </span><span class=c1>// å¤šå‚æ•°æ”¯æŒ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>List</span><span class=o>&lt;</span><span class=n>ExampleDoublePkDTO</span><span class=o>&gt;</span><span class=w> </span><span class=nf>findAll</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=serviceå®ç°-æœåŠ¡å±‚å®ç°>Serviceå®ç° (æœåŠ¡å±‚å®ç°)</h4><p><strong>è”åˆä¸»é”®å¤„ç†çš„æ ¸å¿ƒæ”¹è¿›</strong>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>ExampleDoublePkServiceImpl</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>IExampleDoublePkService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Autowired</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>ExampleDoublePkMapper</span><span class=w> </span><span class=n>exampleDoublePkMapper</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=nf>deleteById</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id2</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>id2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// æ­£ç¡®è°ƒç”¨è”åˆä¸»é”®æ–¹æ³•</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>exampleDoublePkMapper</span><span class=p>.</span><span class=na>deleteByPrimaryKey</span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>id2</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>ExampleDoublePkDTO</span><span class=w> </span><span class=nf>findById</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>Long</span><span class=w> </span><span class=n>id2</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>id2</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// æ­£ç¡®è°ƒç”¨è”åˆä¸»é”®æ–¹æ³•</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>ExampleDoublePk</span><span class=w> </span><span class=n>entity</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>exampleDoublePkMapper</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>selectByPrimaryKey</span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>id2</span><span class=p>).</span><span class=na>orElse</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>entity</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>ExampleDoublePkDTO</span><span class=p>.</span><span class=na>fromEntity</span><span class=p>(</span><span class=n>entity</span><span class=p>)</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=å…³é”®ç‰¹æ€§åˆ†æ>å…³é”®ç‰¹æ€§åˆ†æ</h3><h4 id=è”åˆä¸»é”®æ”¯æŒ>è”åˆä¸»é”®æ”¯æŒ</h4><ul><li><strong>é—®é¢˜</strong>: ä¹‹å‰ç‰ˆæœ¬é”™è¯¯åœ°å°è¯•ä½¿ç”¨å•ä¸€ä¸»é”®ç±»å‹</li><li><strong>è§£å†³</strong>: è‡ªåŠ¨æ£€æµ‹ä¸»é”®åˆ—æ•°é‡ï¼Œä¸ºè”åˆä¸»é”®ç”Ÿæˆå¤šå‚æ•°æ–¹æ³•</li><li><strong>å®ç°</strong>: <code>List&lt;IntrospectedColumn> primaryKeyColumns</code></li></ul><h4 id=mysqlç‰¹æœ‰åŠŸèƒ½>MySQLç‰¹æœ‰åŠŸèƒ½</h4><ul><li><strong>INSERT IGNORE</strong>: å¿½ç•¥é‡å¤é”®é”™è¯¯ï¼Œç»§ç»­æ’å…¥å…¶ä»–è®°å½•</li><li><strong>ON DUPLICATE KEY UPDATE</strong>: æ’å…¥å†²çªæ—¶è‡ªåŠ¨æ›´æ–°æŒ‡å®šå­—æ®µ</li><li><strong>REPLACE INTO</strong>: MySQLçš„æ›¿æ¢æ’å…¥æ“ä½œ</li></ul><h4 id=è‡ªåŠ¨åŒ–ç¨‹åº¦>è‡ªåŠ¨åŒ–ç¨‹åº¦</h4><ul><li><strong>ä¾èµ–æ³¨å…¥</strong>: è‡ªåŠ¨ç”ŸæˆSpring <code>@Autowired</code>æ³¨è§£</li><li><strong>ç©ºå€¼æ£€æŸ¥</strong>: è‡ªåŠ¨ç”Ÿæˆå‚æ•°ç©ºå€¼éªŒè¯</li><li><strong>è½¬æ¢æ–¹æ³•</strong>: DTOä¸Entityä¹‹é—´çš„è‡ªåŠ¨è½¬æ¢</li></ul><h2 id=-é¡¹ç›®ç»“æ„>ğŸ—ï¸ é¡¹ç›®ç»“æ„</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mybatis-generator-custome-plugins/
</span></span><span class=line><span class=cl>â”œâ”€â”€ src/main/java/com/goody/utils/mybatis/plugin/
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ CustomerMapperPlugin.java
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ DtoGeneratorPlugin.java
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ InsertIgnoreIntoPlugin.java
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ InsertOnDuplicateKeyPlugin.java
</span></span><span class=line><span class=cl>â”‚   â”œâ”€â”€ ReplaceIntoPlugin.java
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ ServiceGeneratorPlugin.java
</span></span><span class=line><span class=cl>â”œâ”€â”€ src/main/resources/
</span></span><span class=line><span class=cl>â”‚   â””â”€â”€ generatorConfig.xml
</span></span><span class=line><span class=cl>â”œâ”€â”€ src/test/                        # ç”Ÿæˆä»£ç ç¤ºä¾‹
</span></span><span class=line><span class=cl>â””â”€â”€ pom.xml
</span></span></code></pre></td></tr></table></div></div><h2 id=-ä½¿ç”¨å»ºè®®>ğŸ¯ ä½¿ç”¨å»ºè®®</h2><ol><li><strong>å¼€å‘æµç¨‹</strong>: å…ˆè®¾è®¡æ•°æ®åº“è¡¨ç»“æ„ï¼Œç„¶åä½¿ç”¨æ’ä»¶ç”Ÿæˆå®Œæ•´çš„åˆ†å±‚ä»£ç </li><li><strong>è”åˆä¸»é”®</strong>: æ’ä»¶å·²å®Œç¾æ”¯æŒè”åˆä¸»é”®ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ç”Ÿæˆä»£ç </li><li><strong>æ‰©å±•æ€§</strong>: å¯ä»¥ç»§æ‰¿ç”Ÿæˆçš„Serviceæ¥å£ï¼Œæ·»åŠ å¤æ‚ä¸šåŠ¡é€»è¾‘</li><li><strong>MySQLä¼˜åŒ–</strong>: åˆç†ä½¿ç”¨INSERT IGNOREå’ŒON DUPLICATE KEYåŠŸèƒ½æå‡æ€§èƒ½</li></ol><h2 id=-æºç æ·±åº¦åˆ†æ>ğŸ” æºç æ·±åº¦åˆ†æ</h2><p><em>æ­¤éƒ¨åˆ†ä¸ºå¼€å‘è€…æä¾›æ’ä»¶å®ç°ç»†èŠ‚çš„æ·±å…¥æ´å¯Ÿï¼Œé€‚åˆå¸Œæœ›ç†è§£æˆ–æ‰©å±•æ’ä»¶åŠŸèƒ½çš„å¼€å‘è€…é˜…è¯»ã€‚</em></p><h3 id=æ’ä»¶æ¶æ„æ¦‚è§ˆ>æ’ä»¶æ¶æ„æ¦‚è§ˆ</h3><p>æ‰€æœ‰æ’ä»¶éƒ½ç»§æ‰¿ <code>PluginAdapter</code> å¹¶éµå¾ªMyBatis Generatorçš„æ’ä»¶ç”Ÿå‘½å‘¨æœŸï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>abstract</span><span class=w> </span><span class=kd>class</span> <span class=nc>PluginAdapter</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>Plugin</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// éªŒè¯é˜¶æ®µ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>validate</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>warnings</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ä»£ç ç”Ÿæˆé’©å­</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>clientGenerated</span><span class=p>(</span><span class=n>Interface</span><span class=w> </span><span class=n>interfaze</span><span class=p>,</span><span class=w> </span><span class=n>IntrospectedTable</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>GeneratedJavaFile</span><span class=o>&gt;</span><span class=w> </span><span class=nf>contextGenerateAdditionalJavaFiles</span><span class=p>(</span><span class=n>IntrospectedTable</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=insertignoreintoplugin-å®ç°åˆ†æ>InsertIgnoreIntoPlugin å®ç°åˆ†æ</h3><h4 id=æ ¸å¿ƒæ–¹æ³•ç”Ÿæˆç­–ç•¥>æ ¸å¿ƒæ–¹æ³•ç”Ÿæˆç­–ç•¥</h4><p>æ’ä»¶ä½¿ç”¨ç²¾å·§çš„æ–¹æ³•åŠ¨æ€ç”ŸæˆSQLæ¨¡æ¿ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span><span class=w> </span><span class=n>Method</span><span class=w> </span><span class=nf>insertIgnoreIntoOne</span><span class=p>(</span><span class=n>Interface</span><span class=w> </span><span class=n>interfaze</span><span class=p>,</span><span class=w> </span><span class=n>IntrospectedTable</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ä½¿ç”¨Stream APIè¿›è¡ŒåŠ¨æ€åˆ—æ˜ å°„</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>columnNames</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>.</span><span class=na>getAllColumns</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>column</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&#34;`%s`&#34;</span><span class=p>,</span><span class=w> </span><span class=n>column</span><span class=p>.</span><span class=na>getActualColumnName</span><span class=p>()))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>joining</span><span class=p>(</span><span class=s>&#34;, &#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// MyBatisè¯­æ³•çš„å‚æ•°ç»‘å®š</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>columnValueNames</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>.</span><span class=na>getAllColumns</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>map</span><span class=p>(</span><span class=n>column</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&#34;#{item.%s}&#34;</span><span class=p>,</span><span class=w> </span><span class=n>column</span><span class=p>.</span><span class=na>getJavaProperty</span><span class=p>()))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>joining</span><span class=p>(</span><span class=s>&#34;, &#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// åŸºäºæ¨¡æ¿çš„æ³¨è§£ç”Ÿæˆ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>insertIgnore</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&#34;@Insert({&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34;\&#34;&lt;script&gt;\&#34; +\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34;            \&#34; INSERT IGNORE INTO %s\&#34; +\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34;              \&#34; (%s)\&#34; +\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34;            \&#34; VALUES\&#34; +\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34;              \&#34;(%s)\&#34; +\n&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34;        \&#34;&lt;/script&gt;\&#34;&#34;</span><span class=w> </span><span class=o>+</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=s>&#34;})&#34;</span><span class=p>,</span><span class=w> </span><span class=n>tableName</span><span class=p>,</span><span class=w> </span><span class=n>columnNames</span><span class=p>,</span><span class=w> </span><span class=n>columnValueNames</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=å…³é”®æŠ€æœ¯åˆ›æ–°>å…³é”®æŠ€æœ¯åˆ›æ–°</h4><ol><li><strong>åŸºäºStreamçš„å­—æ®µè½¬æ¢</strong>: é«˜æ•ˆåœ°å°†æ•°æ®åº“æ¨¡å¼è½¬æ¢ä¸ºJavaæ–¹æ³•å‚æ•°</li><li><strong>åŠ¨æ€SQLæ¨¡æ¿ç”Ÿæˆ</strong>: åˆ›å»ºå¸¦é€‚å½“è½¬ä¹‰çš„å‚æ•°åŒ–SQL</li><li><strong>æ‰¹é‡å¤„ç†æ”¯æŒ</strong>: ä¸ºæ‰¹é‡æ“ä½œè‡ªåŠ¨ç”Ÿæˆ <code>&lt;foreach></code> å¾ªç¯</li></ol><h3 id=dtogeneratorplugin-å®ç°åˆ†æ>DtoGeneratorPlugin å®ç°åˆ†æ</h3><h4 id=åŒ…åè§£æç®—æ³•>åŒ…åè§£æç®—æ³•</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>private</span><span class=w> </span><span class=n>TopLevelClass</span><span class=w> </span><span class=nf>generateDtoClass</span><span class=p>(</span><span class=n>IntrospectedTable</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// æ™ºèƒ½åŒ…åè½¬æ¢</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>entityFullType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>.</span><span class=na>getBaseRecordType</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>entityPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>entityFullType</span><span class=p>.</span><span class=na>substring</span><span class=p>(</span><span class=n>0</span><span class=p>,</span><span class=w> </span><span class=n>entityFullType</span><span class=p>.</span><span class=na>lastIndexOf</span><span class=p>(</span><span class=sc>&#39;.&#39;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>dtoFullPackage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>entityPackage</span><span class=p>.</span><span class=na>replace</span><span class=p>(</span><span class=s>&#34;.entity&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;.&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>DTO_PACKAGE</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ç±»å‹å®‰å…¨çš„ç±»å®ä¾‹åŒ–</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>FullyQualifiedJavaType</span><span class=w> </span><span class=n>dtoType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>FullyQualifiedJavaType</span><span class=p>(</span><span class=n>dtoFullPackage</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;.&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>dtoClassName</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>TopLevelClass</span><span class=w> </span><span class=n>dtoClass</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>TopLevelClass</span><span class=p>(</span><span class=n>dtoType</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=å¸¦å…ƒæ•°æ®ä¿ç•™çš„å­—æ®µç”Ÿæˆ>å¸¦å…ƒæ•°æ®ä¿ç•™çš„å­—æ®µç”Ÿæˆ</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// å¸¦æ³¨é‡Šä¿ç•™çš„åˆ—åˆ°å­—æ®µè½¬æ¢</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>IntrospectedColumn</span><span class=w> </span><span class=n>column</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>allColumns</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Field</span><span class=w> </span><span class=n>field</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Field</span><span class=p>(</span><span class=n>column</span><span class=p>.</span><span class=na>getJavaProperty</span><span class=p>(),</span><span class=w> </span><span class=n>column</span><span class=p>.</span><span class=na>getFullyQualifiedJavaType</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>field</span><span class=p>.</span><span class=na>setVisibility</span><span class=p>(</span><span class=n>JavaVisibility</span><span class=p>.</span><span class=na>PRIVATE</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ä¿ç•™æ•°æ®åº“åˆ—æ³¨é‡Š</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>column</span><span class=p>.</span><span class=na>getRemarks</span><span class=p>()</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=o>!</span><span class=n>column</span><span class=p>.</span><span class=na>getRemarks</span><span class=p>().</span><span class=na>trim</span><span class=p>().</span><span class=na>isEmpty</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>field</span><span class=p>.</span><span class=na>addJavaDocLine</span><span class=p>(</span><span class=s>&#34;/**&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>field</span><span class=p>.</span><span class=na>addJavaDocLine</span><span class=p>(</span><span class=s>&#34; * &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>column</span><span class=p>.</span><span class=na>getRemarks</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>field</span><span class=p>.</span><span class=na>addJavaDocLine</span><span class=p>(</span><span class=s>&#34; */&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>dtoClass</span><span class=p>.</span><span class=na>addField</span><span class=p>(</span><span class=n>field</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=servicegeneratorplugin-å®ç°åˆ†æ>ServiceGeneratorPlugin å®ç°åˆ†æ</h3><h4 id=è”åˆä¸»é”®è§£æ>è”åˆä¸»é”®è§£æ</h4><p>æœ€ç²¾å¦™çš„åŠŸèƒ½æ˜¯æ™ºèƒ½è”åˆä¸»é”®å¤„ç†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// åŠ¨æ€ä¸»é”®åˆ†æ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>IntrospectedColumn</span><span class=o>&gt;</span><span class=w> </span><span class=n>primaryKeyColumns</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>.</span><span class=na>getPrimaryKeyColumns</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// è‡ªé€‚åº”æ–¹æ³•ç­¾åç”Ÿæˆ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>IntrospectedColumn</span><span class=w> </span><span class=n>column</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>primaryKeyColumns</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>paramName</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>column</span><span class=p>.</span><span class=na>getJavaProperty</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=p>.</span><span class=na>addParameter</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>Parameter</span><span class=p>(</span><span class=n>column</span><span class=p>.</span><span class=na>getFullyQualifiedJavaType</span><span class=p>(),</span><span class=w> </span><span class=n>paramName</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// åŠ¨æ€æ–¹æ³•è°ƒç”¨æ„å»º</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>StringBuilder</span><span class=w> </span><span class=n>methodCall</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StringBuilder</span><span class=p>(</span><span class=s>&#34;return &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>mapperFieldName</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;.deleteByPrimaryKey(&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>primaryKeyColumns</span><span class=p>.</span><span class=na>size</span><span class=p>();</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>0</span><span class=p>)</span><span class=w> </span><span class=n>methodCall</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;, &#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>methodCall</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>primaryKeyColumns</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=n>i</span><span class=p>).</span><span class=na>getJavaProperty</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>methodCall</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&#34;);&#34;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=serviceå®ç°æ¨¡å¼>Serviceå®ç°æ¨¡å¼</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// ç©ºå€¼å®‰å…¨çš„å‚æ•°éªŒè¯</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>IntrospectedColumn</span><span class=w> </span><span class=n>column</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>primaryKeyColumns</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=p>.</span><span class=na>addBodyLine</span><span class=p>(</span><span class=s>&#34;if (&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>column</span><span class=p>.</span><span class=na>getJavaProperty</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; == null) {&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=p>.</span><span class=na>addBodyLine</span><span class=p>(</span><span class=s>&#34;    return 0;&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>method</span><span class=p>.</span><span class=na>addBodyLine</span><span class=p>(</span><span class=s>&#34;}&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=é«˜çº§æ¨¡å¼å’ŒæŠ€æœ¯>é«˜çº§æ¨¡å¼å’ŒæŠ€æœ¯</h3><h4 id=ç±»å‹å®‰å…¨å¼ºåŒ–>ç±»å‹å®‰å…¨å¼ºåŒ–</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// æ³›å‹ç±»å‹ä¿ç•™</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>FullyQualifiedJavaType</span><span class=w> </span><span class=n>listType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>FullyQualifiedJavaType</span><span class=p>(</span><span class=s>&#34;List&lt;&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>dtoClassName</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;&gt;&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Parameter</span><span class=w> </span><span class=n>batchParameter</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Parameter</span><span class=p>(</span><span class=n>listType</span><span class=p>,</span><span class=w> </span><span class=s>&#34;dtoList&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// å¯¼å…¥è§£æ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>serviceInterface</span><span class=p>.</span><span class=na>addImportedType</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>FullyQualifiedJavaType</span><span class=p>(</span><span class=s>&#34;java.util.List&#34;</span><span class=p>));</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=sqlæ³¨å…¥é˜²æŠ¤>SQLæ³¨å…¥é˜²æŠ¤</h4><p>æ‰€æœ‰ç”Ÿæˆçš„SQLéƒ½ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// å®‰å…¨ï¼šå‚æ•°åŒ–æŸ¥è¯¢</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=s>&#34;INSERT IGNORE INTO &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>tableName</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; VALUES (#{item.id}, #{item.name})&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// ä¸å®‰å…¨ï¼šå­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆä»ä¸ä½¿ç”¨ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=s>&#34;INSERT IGNORE INTO &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>tableName</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34; VALUES (&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>item</span><span class=p>.</span><span class=na>getId</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;, &#39;&#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>item</span><span class=p>.</span><span class=na>getName</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;&#39;)&#34;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=å†…å­˜é«˜æ•ˆç”Ÿæˆ>å†…å­˜é«˜æ•ˆç”Ÿæˆ</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// å¤§å‹ä»£ç åº“çš„å»¶è¿Ÿæ±‚å€¼æ¨¡å¼</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>GeneratedJavaFile</span><span class=o>&gt;</span><span class=w> </span><span class=nf>contextGenerateAdditionalJavaFiles</span><span class=p>(</span><span class=n>IntrospectedTable</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>List</span><span class=o>&lt;</span><span class=n>GeneratedJavaFile</span><span class=o>&gt;</span><span class=w> </span><span class=n>files</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ArrayList</span><span class=o>&lt;&gt;</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// ä»…åœ¨éœ€è¦æ—¶ç”Ÿæˆ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>shouldGenerateService</span><span class=p>(</span><span class=n>introspectedTable</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>files</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>createServiceInterface</span><span class=p>(</span><span class=n>introspectedTable</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>files</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>createServiceImplementation</span><span class=p>(</span><span class=n>introspectedTable</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>files</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=è‡ªå®šä¹‰å¼€å‘æ‰©å±•ç‚¹>è‡ªå®šä¹‰å¼€å‘æ‰©å±•ç‚¹</h3><h4 id=è‡ªå®šä¹‰æ’ä»¶æ¨¡æ¿>è‡ªå®šä¹‰æ’ä»¶æ¨¡æ¿</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>CustomPlugin</span><span class=w> </span><span class=kd>extends</span><span class=w> </span><span class=n>PluginAdapter</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>validate</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>warnings</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// æ’ä»¶éªŒè¯é€»è¾‘</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>clientGenerated</span><span class=p>(</span><span class=n>Interface</span><span class=w> </span><span class=n>interfaze</span><span class=p>,</span><span class=w> </span><span class=n>IntrospectedTable</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// å‘ç°æœ‰Mapperæ¥å£æ·»åŠ æ–¹æ³•</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>interfaze</span><span class=p>.</span><span class=na>addMethod</span><span class=p>(</span><span class=n>createCustomMethod</span><span class=p>(</span><span class=n>introspectedTable</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kd>super</span><span class=p>.</span><span class=na>clientGenerated</span><span class=p>(</span><span class=n>interfaze</span><span class=p>,</span><span class=w> </span><span class=n>introspectedTable</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>Method</span><span class=w> </span><span class=nf>createCustomMethod</span><span class=p>(</span><span class=n>IntrospectedTable</span><span class=w> </span><span class=n>table</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// è‡ªå®šä¹‰æ–¹æ³•ç”Ÿæˆé€»è¾‘</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Method</span><span class=w> </span><span class=n>method</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Method</span><span class=p>(</span><span class=s>&#34;customMethod&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>method</span><span class=p>.</span><span class=na>setVisibility</span><span class=p>(</span><span class=n>JavaVisibility</span><span class=p>.</span><span class=na>PUBLIC</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>method</span><span class=p>.</span><span class=na>setAbstract</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>method</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h4 id=é…ç½®é©±åŠ¨è¡Œä¸º>é…ç½®é©±åŠ¨è¡Œä¸º</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kt>boolean</span><span class=w> </span><span class=nf>validate</span><span class=p>(</span><span class=n>List</span><span class=o>&lt;</span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>warnings</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// è¯»å–æ’ä»¶å±æ€§</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>enableFeature</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getProperties</span><span class=p>().</span><span class=na>getProperty</span><span class=p>(</span><span class=s>&#34;enableCustomFeature&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=s>&#34;false&#34;</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>enableFeature</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// è·³è¿‡æ’ä»¶æ‰§è¡Œ</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>è¿™ç§æ·±å…¥çš„æºç åˆ†ææ­ç¤ºäº†æ¯ä¸ªæ’ä»¶èƒŒåçš„ç²¾å¦™å·¥ç¨‹ï¼Œå±•ç¤ºäº†å…ˆè¿›çš„Javaä»£ç ç”ŸæˆæŠ€æœ¯å’ŒMyBatis Generatorçš„å¯æ‰©å±•æ€§æ¡†æ¶ã€‚</p><hr><p><em>æœ¬æŠ€æœ¯æ·±åº¦è§£ææ—¨åœ¨ä¸ºMyBatis Generatorè‡ªå®šä¹‰æ’ä»¶çš„æ¶æ„å’Œå®ç°æä¾›å…¨é¢çš„æ´å¯Ÿã€‚</em></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>æ›´æ–°äº 2025-12-06&nbsp;<a class=git-hash href=https://github.com/GOODDAYDAY/GOODDAYDAY.github.io/commit/af3d5c9bd409e602f90f3dec7c5441cd7924d96f target=_blank title="commit by haotian(865700600@qq.com) af3d5c9bd409e602f90f3dec7c5441cd7924d96f: Refactor Redis Cluster documentation for clarity and consistency">
<i class="fas fa-hashtag fa-fw" aria-hidden=true></i>af3d5c9</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/zh-cn/2025/09/github-2.-mybatis-generator-custom-plugins/index.md target=_blank>é˜…è¯»åŸå§‹æ–‡æ¡£</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="åˆ†äº«åˆ° Twitter" data-sharer=twitter data-url=https://gooddayday.github.io/zh-cn/2025/09/github-2.-mybatis-generator-custom-plugins/ data-title="[Github] 2. MyBatis Generator è‡ªå®šä¹‰æ’ä»¶" data-hashtags=Github,MyBatis,plugins><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° Facebook" data-sharer=facebook data-url=https://gooddayday.github.io/zh-cn/2025/09/github-2.-mybatis-generator-custom-plugins/ data-hashtag=Github><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° Linkedin" data-sharer=linkedin data-url=https://gooddayday.github.io/zh-cn/2025/09/github-2.-mybatis-generator-custom-plugins/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° Hacker News" data-sharer=hackernews data-url=https://gooddayday.github.io/zh-cn/2025/09/github-2.-mybatis-generator-custom-plugins/ data-title="[Github] 2. MyBatis Generator è‡ªå®šä¹‰æ’ä»¶"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° Line" data-sharer=line data-url=https://gooddayday.github.io/zh-cn/2025/09/github-2.-mybatis-generator-custom-plugins/ data-title="[Github] 2. MyBatis Generator è‡ªå®šä¹‰æ’ä»¶"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="åˆ†äº«åˆ° å¾®åš" data-sharer=weibo data-url=https://gooddayday.github.io/zh-cn/2025/09/github-2.-mybatis-generator-custom-plugins/ data-title="[Github] 2. MyBatis Generator è‡ªå®šä¹‰æ’ä»¶"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/zh-cn/tags/github/>Github</a>,&nbsp;<a href=/zh-cn/tags/mybatis/>MyBatis</a>,&nbsp;<a href=/zh-cn/tags/plugins/>Plugins</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>è¿”å›</a></span>&nbsp;|&nbsp;<span><a href=/zh-cn/>ä¸»é¡µ</a></span></section></div><div class=post-nav><a href=/zh-cn/2025/09/customs-1.-customs-idea/ class=prev rel=prev title="[Customs] 1. IntelliJ IDEA é…ç½®ä¸æ¨èæ’ä»¶"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>[Customs] 1. IntelliJ IDEA é…ç½®ä¸æ¨èæ’ä»¶</a>
<a href=/zh-cn/2025/09/cluster-1.-understanding_raft_algorithm/ class=next rel=next title="[Cluster] 1. æµ…è°ˆRAFTç®—æ³•ï¼šä»å•èŠ‚ç‚¹åˆ°åˆ†å¸ƒå¼å…±è¯†çš„å®Œæ•´æ¼”è¿›">[Cluster] 1. æµ…è°ˆRAFTç®—æ³•ï¼šä»å•èŠ‚ç‚¹åˆ°åˆ†å¸ƒå¼å…±è¯†çš„å®Œæ•´æ¼”è¿›<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=giscus class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app>Giscus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><span class=author itemprop=copyrightHolder>&nbsp;<a href=/zh-cn/ target=_blank>GoodyHao</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=å›åˆ°é¡¶éƒ¨><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=æŸ¥çœ‹è¯„è®º><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><link rel=stylesheet href=/css/auto-numbering.css><link rel=stylesheet href=/css/svg-fullwidth.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"å¤åˆ¶åˆ°å‰ªè´´æ¿",maxShownLines:50},comment:{giscus:{category:"Announcements",categoryId:"DIC_kwDOPtWtCc4CvteQ",darkTheme:"dark",emitMetadata:"0",inputPosition:"bottom",lang:"zh-CN",lazyLoading:!1,lightTheme:"light",mapping:"pathname",reactionsEnabled:"1",repo:"GOODDAYDAY/GOODDAYDAY.github.io",repoId:"R_kgDOPtWtCQ"}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"PASDMWALPK",algoliaIndex:"index.zh-cn",algoliaSearchKey:"b42948e51daaa93df92381c8e2ac0f93",highlightTag:"em",maxResultLength:10,noResultsFound:"æ²¡æœ‰æ‰¾åˆ°ç»“æœ",snippetLength:50,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>