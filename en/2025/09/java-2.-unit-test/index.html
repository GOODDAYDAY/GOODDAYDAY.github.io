<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>[Java] 2. Unit Test Basic Usage - GoodyHao's Blog</title><meta name=Description content="Elegance Never Fades"><meta property="og:url" content="https://gooddayday.github.io/en/2025/09/java-2.-unit-test/"><meta property="og:site_name" content="GoodyHao's Blog"><meta property="og:title" content="[Java] 2. Unit Test Basic Usage"><meta property="og:description" content="Mockito Basic Usage In unit testing, many tests (except Util classes) need to mock some services to ensure only the current logic being tested is actually tested.
Specifically, you need to first mock an object, then mock the methods of this object, and then you can use the mocked methods to test the logic you want to test.
Mock Objects First, you need to declare the interfaces/implementation classes that need to be mocked in the Test class. For example:"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-21T23:36:17+08:00"><meta property="article:modified_time" content="2025-12-06T22:29:56+08:00"><meta property="article:tag" content="Java"><meta property="article:tag" content="Unit Test"><meta property="og:image" content="https://gooddayday.github.io/logo.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://gooddayday.github.io/logo.jpg"><meta name=twitter:title content="[Java] 2. Unit Test Basic Usage"><meta name=twitter:description content="Mockito Basic Usage In unit testing, many tests (except Util classes) need to mock some services to ensure only the current logic being tested is actually tested.
Specifically, you need to first mock an object, then mock the methods of this object, and then you can use the mocked methods to test the logic you want to test.
Mock Objects First, you need to declare the interfaces/implementation classes that need to be mocked in the Test class. For example:"><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://gooddayday.github.io/en/2025/09/java-2.-unit-test/><link rel=prev href=https://gooddayday.github.io/en/2025/09/spring-1.-spring-web-completionstage/><link rel=next href=https://gooddayday.github.io/en/2025/09/custom-1.-customs-idea/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"[Java] 2. Unit Test Basic Usage","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/gooddayday.github.io\/en\/2025\/09\/java-2.-unit-test\/"},"image":["https:\/\/gooddayday.github.io\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"Java, Unit Test","wordcount":1180,"url":"https:\/\/gooddayday.github.io\/en\/2025\/09\/java-2.-unit-test\/","datePublished":"2025-09-21T23:36:17+08:00","dateModified":"2025-12-06T22:29:56+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"xxxx","logo":"https:\/\/gooddayday.github.io\/images\/logo.jpg"},"author":{"@type":"Person","name":"GoodyHao"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"light"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"light"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/en/ title="GoodyHao's Blog"><span class=header-title-pre><i class='far fa-kiss-wink-heart fa-fw' aria-hidden=true></i></span>Elegance Never Fades</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/en/posts/>Posts </a><a class=menu-item href=/en/tags/>Tags </a><a class=menu-item href=/en/categories/>Categories </a><a class=menu-item href=/en/categories/documentation/>Docs </a><a class=menu-item href=/en/about/>About </a><a class=menu-item href=https://github.com/GOODDAYDAY/GOODDAYDAY.github.io title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a class=menu-item href=/zh-cn/2025/09/java-2.-unit-test/ title=简体中文>中文</a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/en/ title="GoodyHao's Blog"><span class=header-title-pre><i class='far fa-kiss-wink-heart fa-fw' aria-hidden=true></i></span>Elegance Never Fades</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/en/posts/ title>Posts</a><a class=menu-item href=/en/tags/ title>Tags</a><a class=menu-item href=/en/categories/ title>Categories</a><a class=menu-item href=/en/categories/documentation/ title>Docs</a><a class=menu-item href=/en/about/ title>About</a><a class=menu-item href=https://github.com/GOODDAYDAY/GOODDAYDAY.github.io title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a class=menu-item href=/zh-cn/2025/09/java-2.-unit-test/ title=简体中文>中文</a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">[Java] 2. Unit Test Basic Usage</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/en/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>GoodyHao</a></span>&nbsp;<span class=post-category>included in <a href=/en/categories/java/><i class="far fa-folder fa-fw" aria-hidden=true></i>Java</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2025-09-21>2025-09-21</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1180 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;6 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#mockito-basic-usage>Mockito Basic Usage</a><ul><li><a href=#mock-objects>Mock Objects</a></li><li><a href=#mock-methods>Mock Methods</a></li><li><a href=#testing-results>Testing Results</a></li><li><a href=#spybean-example>SpyBean Example</a></li></ul></li><li><a href=#test-case-specifications>Test Case Specifications</a><ul><li><a href=#test-case-naming-rules>Test Case Naming Rules</a></li><li><a href=#test-case-comment-rules>Test Case Comment Rules</a></li><li><a href=#test-scope-rules>Test Scope Rules</a></li><li><a href=#code-coverage>Code Coverage</a></li><li><a href=#test-case-specifications-1>Test Case Specifications</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=mockito-basic-usage>Mockito Basic Usage</h2><p>In unit testing, many tests (except Util classes) need to mock some services to ensure only the current logic being tested is actually tested.</p><p>Specifically, you need to first mock an object, then mock the methods of this object, and then you can use the mocked methods to test the logic you want to test.</p><h3 id=mock-objects>Mock Objects</h3><p>First, you need to declare the interfaces/implementation classes that need to be mocked in the Test class. For example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@MockBean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>IOssService</span><span class=w> </span><span class=n>ossService</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Sometimes, you also need to manually mock something directly, for example, when you need to mock Redis operations, you can:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>RSet</span><span class=o>&lt;</span><span class=n>Long</span><span class=o>&gt;</span><span class=w> </span><span class=n>redisSet</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Mockito</span><span class=p>.</span><span class=na>mock</span><span class=p>(</span><span class=n>RSet</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Note: Don&rsquo;t mock primitive types like int, long, etc.</p><p>There&rsquo;s another way using <code>@SpyBean</code>. This will be skipped for now and introduced in later sections.</p><h3 id=mock-methods>Mock Methods</h3><p>Assume there&rsquo;s an interface:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>IUserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Long</span><span class=w> </span><span class=nf>add</span><span class=p>(</span><span class=n>UserDTO</span><span class=w> </span><span class=n>dto</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>remove</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>userId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>UserDTO</span><span class=o>&gt;</span><span class=w> </span><span class=nf>find</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>username</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>UserDTO</span><span class=o>&gt;</span><span class=w> </span><span class=nf>find</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>userId</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>With userService already mocked:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@MockBean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>IUserService</span><span class=w> </span><span class=n>userService</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>We can mock the add method so that any parameter passed will directly return 100.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>doReturn</span><span class=p>(</span><span class=n>100L</span><span class=p>).</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>).</span><span class=na>add</span><span class=p>(</span><span class=n>any</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>You can also do it this way:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>.</span><span class=na>add</span><span class=p>(</span><span class=n>any</span><span class=p>())).</span><span class=na>thenReturn</span><span class=p>(</span><span class=n>100L</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>However, <strong>for the same service, don&rsquo;t mix these two approaches, otherwise sometimes the second mock may become ineffective.</strong></p><p>When you find that your mocked methods are ineffective, or you encounter some mysterious errors, please use one mocking approach consistently. If it still doesn&rsquo;t work, try switching to the other approach.</p><p>When you need to mock a void method, you can:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>doNothing</span><span class=p>().</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>).</span><span class=na>remove</span><span class=p>(</span><span class=n>anyLong</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>If you need to simulate error conditions, you can:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>doThrow</span><span class=p>(...).</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>).</span><span class=na>remove</span><span class=p>(</span><span class=n>anyLong</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>When you need to mock specific data, like userId = 1 has a user, userId = 2 has no user, you can mock like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>doReturn</span><span class=p>(</span><span class=n>Optional</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>UserDTO</span><span class=p>.</span><span class=na>builder</span><span class=p>().</span><span class=na>build</span><span class=p>())).</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>).</span><span class=na>find</span><span class=p>(</span><span class=n>1L</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Mockito</span><span class=p>.</span><span class=na>doReturn</span><span class=p>(</span><span class=n>Optional</span><span class=p>.</span><span class=na>empty</span><span class=p>()).</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>).</span><span class=na>find</span><span class=p>(</span><span class=n>2L</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Mock has more general approaches. If you want to return data when userId &lt; 10, and not return data in other cases:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>doAnswer</span><span class=p>(</span><span class=n>invocation</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Long</span><span class=w> </span><span class=n>userId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>Long</span><span class=p>)</span><span class=w> </span><span class=n>invocation</span><span class=p>.</span><span class=na>getArguments</span><span class=p>()</span><span class=o>[</span><span class=n>0</span><span class=o>]</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>userId</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>10L</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>UserDTO</span><span class=p>.</span><span class=na>builder</span><span class=p>().</span><span class=na>id</span><span class=p>(</span><span class=n>userId</span><span class=p>).</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}).</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>).</span><span class=na>find</span><span class=p>(</span><span class=n>anyLong</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Or:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>.</span><span class=na>find</span><span class=p>(</span><span class=n>anyLong</span><span class=p>())).</span><span class=na>thenAnswer</span><span class=p>(</span><span class=n>invocation</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Long</span><span class=w> </span><span class=n>userId</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>Long</span><span class=p>)</span><span class=w> </span><span class=n>invocation</span><span class=p>.</span><span class=na>getArguments</span><span class=p>()</span><span class=o>[</span><span class=n>0</span><span class=o>]</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>userId</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>10L</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>UserDTO</span><span class=p>.</span><span class=na>builder</span><span class=p>().</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>});</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Note that doAnswer can also mock void return values. Suppose I now want to mock Redis operations:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Mock Redis get and set operations.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>RAtomicLong</span><span class=w> </span><span class=n>mockValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Mockito</span><span class=p>.</span><span class=na>mock</span><span class=p>(</span><span class=n>RAtomicLong</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>doAnswer</span><span class=p>(</span><span class=n>invocation</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>Long</span><span class=w> </span><span class=n>newValue</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>Long</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>invocation</span><span class=p>.</span><span class=na>getArguments</span><span class=p>()</span><span class=o>[</span><span class=n>0</span><span class=o>]</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>doReturn</span><span class=p>(</span><span class=kc>true</span><span class=p>).</span><span class=na>when</span><span class=p>(</span><span class=n>mockValue</span><span class=p>).</span><span class=na>isExists</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>doReturn</span><span class=p>(</span><span class=n>newValue</span><span class=p>).</span><span class=na>when</span><span class=p>(</span><span class=n>mockValue</span><span class=p>).</span><span class=na>get</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}).</span><span class=na>when</span><span class=p>(</span><span class=n>mockValue</span><span class=p>).</span><span class=na>set</span><span class=p>(</span><span class=n>anyLong</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>In this example, when calling Redis set, we also mock get to return the value that was just set. This simulates Redis operations.</p><p>When you mock overloaded methods, you may encounter errors, for example:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>.</span><span class=na>find</span><span class=p>(</span><span class=n>any</span><span class=p>())).</span><span class=na>thenReturn</span><span class=p>(</span><span class=n>Optional</span><span class=p>.</span><span class=na>empty</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>At this point, find(any()) can match both methods, which will cause problems. The solution is:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>.</span><span class=na>find</span><span class=p>(</span><span class=n>anyLong</span><span class=p>())).</span><span class=na>thenReturn</span><span class=p>(</span><span class=n>Optional</span><span class=p>.</span><span class=na>empty</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Mockito</span><span class=p>.</span><span class=na>when</span><span class=p>(</span><span class=n>userService</span><span class=p>.</span><span class=na>find</span><span class=p>(</span><span class=n>anyString</span><span class=p>())).</span><span class=na>thenReturn</span><span class=p>(</span><span class=n>Optional</span><span class=p>.</span><span class=na>empty</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>When using any(), be careful:</p><ul><li>Don&rsquo;t use any() to represent long, int values, otherwise you&rsquo;ll get NPE.</li><li>You can specifically use any(class) for specific inputs, like any(LocalDateTime.class) can represent any LocalDateTime parameter.</li></ul><p>When using mock, you can also use <code>doCallRealMethod()</code> or <code>thenCallRealMethod()</code> to call the original implementation, but I personally don&rsquo;t recommend this approach as it generally causes various problems. Specific solutions will be covered later.</p><h3 id=testing-results>Testing Results</h3><p>Generally, after you&rsquo;ve mocked all called methods and used assert tools to verify the output, the program is basically running as expected.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>interface</span> <span class=nc>IUserBizService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>UserDTO</span><span class=w> </span><span class=nf>reg</span><span class=p>(</span><span class=n>UserDTO</span><span class=w> </span><span class=n>dto</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>For example, if you&rsquo;re testing this reg method, Mockito tools can verify whether <code>userService.add()</code> method was actually called once:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>verify</span><span class=p>(</span><span class=n>userService</span><span class=p>,</span><span class=w> </span><span class=n>times</span><span class=p>(</span><span class=n>1</span><span class=p>)).</span><span class=na>add</span><span class=p>(</span><span class=n>any</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>However, sometimes you need to check other things, like the call parameters of your mocked methods. This is when you need Mockito tools:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArgumentCaptor</span><span class=o>&lt;</span><span class=n>UserDTO</span><span class=o>&gt;</span><span class=w> </span><span class=n>captor</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ArgumentCaptor</span><span class=p>.</span><span class=na>forClass</span><span class=p>(</span><span class=n>UserDTO</span><span class=p>.</span><span class=na>class</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Mockito</span><span class=p>.</span><span class=na>verify</span><span class=p>(</span><span class=n>userService</span><span class=p>,</span><span class=w> </span><span class=n>times</span><span class=p>(</span><span class=n>1</span><span class=p>)).</span><span class=na>add</span><span class=p>(</span><span class=n>captor</span><span class=p>.</span><span class=na>capture</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>List</span><span class=o>&lt;</span><span class=n>UserDTO</span><span class=o>&gt;</span><span class=w> </span><span class=n>users</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>captor</span><span class=p>.</span><span class=na>getAllValues</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>// Here you can verify the content of users</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>assertEquals</span><span class=p>(......);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>There&rsquo;s also a simpler approach:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Mockito</span><span class=p>.</span><span class=na>verify</span><span class=p>(</span><span class=n>userService</span><span class=p>,</span><span class=w> </span><span class=n>times</span><span class=p>(</span><span class=n>1</span><span class=p>)).</span><span class=na>add</span><span class=p>((</span><span class=n>UserDTO</span><span class=p>)</span><span class=w> </span><span class=n>argThat</span><span class=p>(</span><span class=n>u</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>assertEquals</span><span class=p>(</span><span class=n>userId</span><span class=p>,</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=na>getId</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}));</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=spybean-example>SpyBean Example</h3><p>In the above examples, we used MockBean, which is the most widely used mocking approach. But sometimes, tests need to go deep into implementation classes, modify some logic, and then test. This is when SpyBean is needed.</p><p>MockBean is equivalent to completely mocking a class, where all methods in this class are mocked and cannot be called directly without first mocking them.
SpyBean is equivalent to taking a real implementation and then only mocking part of its methods.</p><p>For example, suppose in the IUserService implementation, there&rsquo;s this code:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>UserServiceImpl</span><span class=w> </span><span class=kd>implements</span><span class=w> </span><span class=n>IUserService</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>remove</span><span class=p>(</span><span class=n>Long</span><span class=w> </span><span class=n>userId</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Optional</span><span class=o>&lt;</span><span class=n>UserDTO</span><span class=o>&gt;</span><span class=w> </span><span class=n>dto</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=na>find</span><span class=p>(</span><span class=n>userId</span><span class=p>);</span><span class=w> </span><span class=c1>// Note this line</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>dto</span><span class=p>.</span><span class=na>isPresent</span><span class=p>())</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Error</span><span class=p>(</span><span class=n>404</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>At this point, the remove method calls the find method. If you want to test this remove method, mocking the entire implementation class is obviously not feasible. If you don&rsquo;t mock, the return value of this find method is uncontrollable.
If you directly put data in the database, that&rsquo;s not a complete unit test because you&rsquo;re using external services.</p><p>This is when SpyBean should be used. You can mock only the find method, then directly call remove to execute the test.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@SpyBean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>private</span><span class=w> </span><span class=n>IUserService</span><span class=w> </span><span class=n>userService</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Similarly, there are some logic that&rsquo;s not easy to test, like:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>doJob</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>while</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>xxx</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>break</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>doWork</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>sleep</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>sleep</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>Thread</span><span class=p>.</span><span class=na>sleep</span><span class=p>(</span><span class=n>2000</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(...)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>You need to test that this while loop runs according to your logic, but this sleep method will actually sleep, making the entire test extremely troublesome. Using SpyBean solves this well.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>doNothing</span><span class=p>().</span><span class=na>when</span><span class=p>(</span><span class=n>xxxService</span><span class=p>).</span><span class=na>sleep</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>xxxService</span><span class=p>.</span><span class=na>doJob</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>verify</span><span class=p>(</span><span class=n>xxxService</span><span class=p>,</span><span class=w> </span><span class=n>times</span><span class=p>(</span><span class=n>1</span><span class=p>)).</span><span class=na>sleep</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>verify</span><span class=p>(</span><span class=n>xxxService</span><span class=p>,</span><span class=w> </span><span class=n>times</span><span class=p>(</span><span class=n>1</span><span class=p>)).</span><span class=na>doWork</span><span class=p>();</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Similarly, when you need to test some time-related operations, this logic is critical but closely related to current time, SpyBean is also needed.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>doJob</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>LocalDateTime</span><span class=w> </span><span class=n>now</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getNow</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=n>LocalDateTime</span><span class=w> </span><span class=nf>getNow</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>DateUtil</span><span class=p>.</span><span class=na>now</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Mock operation:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>doReturn</span><span class=p>(</span><span class=n>LocalDateTime</span><span class=p>.</span><span class=na>of</span><span class=p>(</span><span class=n>2021</span><span class=p>,</span><span class=w> </span><span class=n>10</span><span class=p>,</span><span class=w> </span><span class=n>1</span><span class=p>)).</span><span class=na>when</span><span class=p>(</span><span class=n>xxxService</span><span class=p>).</span><span class=na>getNow</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>xxxService</span><span class=p>.</span><span class=na>doJob</span><span class=p>();</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=test-case-specifications>Test Case Specifications</h2><h3 id=test-case-naming-rules>Test Case Naming Rules</h3><p>For method startTask under test, there might be the following test cases:</p><ul><li>startTask_noPerm</li><li>startTask_banned</li><li>startTask_succeed</li><li>startTask_limited</li><li>&mldr;</li></ul><p><a href=https://google.github.io/styleguide/javaguide.html#s5.2.3-method-names target=_blank rel="noopener noreffer">javaguide.html#s5.2.3-method-names</a></p><h3 id=test-case-comment-rules>Test Case Comment Rules</h3><ul><li>1 Test scenario description</li><li>2 Expected results, actual results</li></ul><h3 id=test-scope-rules>Test Scope Rules</h3><ul><li>Use Mockito to isolate test boundaries</li><li>Use Postman for integration testing</li><li>Controller layer should also have test cases</li></ul><h3 id=code-coverage>Code Coverage</h3><ul><li>Maximize code coverage</li></ul><h3 id=test-case-specifications-1>Test Case Specifications</h3><ul><li>Build test data</li><li>Use test data to build mock methods</li><li>Execute methods</li><li>Verify mock results</li></ul><p><strong>Key Points</strong></p><ol><li>Unit test cases should embody the concept of <code>unit</code>. When building test data, attention should be paid to sufficient unit isolation between <code>build data</code></li><li>Simply put, unit test code also needs to be elegant enough with high extensibility, so that when business modifications occur later, testing can be better extended</li></ol></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2025-12-06&nbsp;<a class=git-hash href=https://github.com/GOODDAYDAY/GOODDAYDAY.github.io/commit/af3d5c9bd409e602f90f3dec7c5441cd7924d96f target=_blank title="commit by haotian(865700600@qq.com) af3d5c9bd409e602f90f3dec7c5441cd7924d96f: Refactor Redis Cluster documentation for clarity and consistency">
<i class="fas fa-hashtag fa-fw" aria-hidden=true></i>af3d5c9</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/en/2025/09/java-2.-unit-test/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://gooddayday.github.io/en/2025/09/java-2.-unit-test/ data-title="[Java] 2. Unit Test Basic Usage" data-hashtags="Java,Unit Test"><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://gooddayday.github.io/en/2025/09/java-2.-unit-test/ data-hashtag=Java><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://gooddayday.github.io/en/2025/09/java-2.-unit-test/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://gooddayday.github.io/en/2025/09/java-2.-unit-test/ data-title="[Java] 2. Unit Test Basic Usage"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://gooddayday.github.io/en/2025/09/java-2.-unit-test/ data-title="[Java] 2. Unit Test Basic Usage"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://gooddayday.github.io/en/2025/09/java-2.-unit-test/ data-title="[Java] 2. Unit Test Basic Usage"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/en/tags/java/>Java</a>,&nbsp;<a href=/en/tags/unit-test/>Unit Test</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/en/>Home</a></span></section></div><div class=post-nav><a href=/en/2025/09/spring-1.-spring-web-completionstage/ class=prev rel=prev title="[Spring] 1. Spring Web CompletionStage Overview"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>[Spring] 1. Spring Web CompletionStage Overview</a>
<a href=/en/2025/09/custom-1.-customs-idea/ class=next rel=next title="[Customs] 1. IntelliJ IDEA Configuration & Recommended Plugins">[Customs] 1. IntelliJ IDEA Configuration & Recommended Plugins<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=giscus class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app>Giscus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><span class=author itemprop=copyrightHolder>&nbsp;<a href=/en/ target=_blank>GoodyHao</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><link rel=stylesheet href=/css/auto-numbering.css><link rel=stylesheet href=/css/svg-fullwidth.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{giscus:{category:"Announcements",categoryId:"DIC_kwDOPtWtCc4CvteQ",darkTheme:"dark",emitMetadata:"0",inputPosition:"bottom",lang:"en",lazyLoading:!1,lightTheme:"light",mapping:"pathname",reactionsEnabled:"1",repo:"GOODDAYDAY/GOODDAYDAY.github.io",repoId:"R_kgDOPtWtCQ"}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"PASDMWALPK",algoliaIndex:"index.en",algoliaSearchKey:"b42948e51daaa93df92381c8e2ac0f93",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>