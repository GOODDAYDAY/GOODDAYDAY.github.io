<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.152.2"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>GoodyHao's Blog</title><meta name=Description content="Elegance Never Fades"><meta property="og:url" content="https://gooddayday.github.io/en/"><meta property="og:site_name" content="GoodyHao's Blog"><meta property="og:title" content="GoodyHao's Blog"><meta property="og:description" content="Elegance Never Fades"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://gooddayday.github.io/logo.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://gooddayday.github.io/logo.jpg"><meta name=twitter:title content="GoodyHao's Blog"><meta name=twitter:description content="Elegance Never Fades"><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://gooddayday.github.io/en/><link rel=alternate href=/en/index.xml type=application/rss+xml title="GoodyHao's Blog"><link rel=feed href=/en/index.xml type=application/rss+xml title="GoodyHao's Blog"><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/gooddayday.github.io\/en\/","inLanguage":"en","author":{"@type":"Person","name":"GoodyHao"},"description":"Elegance Never Fades","image":"https:\/\/gooddayday.github.io\/images\/Apple-Devices-Preview.png","thumbnailUrl":"https:\/\/gooddayday.github.io\/images\/screenshot.png","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","name":"GoodyHao's Blog"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"light"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"light"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/en/ title="GoodyHao's Blog"><span class=header-title-pre><i class='far fa-kiss-wink-heart fa-fw' aria-hidden=true></i></span>Elegance Never Fades</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/en/posts/>Posts </a><a class=menu-item href=/en/tags/>Tags </a><a class=menu-item href=/en/categories/>Categories </a><a class=menu-item href=/en/categories/documentation/>Docs </a><a class=menu-item href=/en/about/>About </a><a class=menu-item href=https://github.com/GOODDAYDAY/GOODDAYDAY.github.io title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a class=menu-item href=/zh-cn/ title=简体中文>中文</a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/en/ title="GoodyHao's Blog"><span class=header-title-pre><i class='far fa-kiss-wink-heart fa-fw' aria-hidden=true></i></span>Elegance Never Fades</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/en/posts/ title>Posts</a><a class=menu-item href=/en/tags/ title>Tags</a><a class=menu-item href=/en/categories/ title>Categories</a><a class=menu-item href=/en/categories/documentation/ title>Docs</a><a class=menu-item href=/en/about/ title>About</a><a class=menu-item href=https://github.com/GOODDAYDAY/GOODDAYDAY.github.io title=GitHub rel="noopener noreffer" target=_blank><i class='fab fa-github fa-fw' aria-hidden=true></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a class=menu-item href=/zh-cn/ title=简体中文>中文</a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class="page home" data-home=posts><div class=home-profile><div class=home-avatar><a href=/en/posts/ title=Posts><img class=lazyload src=/svg/loading.min.svg data-src=/images/logo.jpg data-srcset="/images/logo.jpg, /images/logo.jpg 1.5x, /images/logo.jpg 2x" data-sizes=auto alt=/images/logo.jpg title=/images/logo.jpg></a></div><div class=home-subtitle><div id=id-1 class=typeit></div></div><div class=links><a href=https://github.com/GOODDAYDAY title=GitHub target=_blank rel="noopener noreffer me"><i class="fab fa-github fa-fw" aria-hidden=true></i></a><a href=https://linkedin.com/in/tian-hao-898b35383 title=LinkedIn target=_blank rel="noopener noreffer me"><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/en/2025/09/java-1.-lombok/>[Java] 1. Lombok</a></h1><div class=post-meta><span class=post-author><a href=/en/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>GoodyHao</a></span>&nbsp;<span class=post-publish>published on <time datetime=2025-09-21>2025-09-21</time></span>&nbsp;<span class=post-category>included in <a href=/en/categories/java/><i class="far fa-folder fa-fw" aria-hidden=true></i>Java</a></span></div><div class=content><h2 id=introduction>Introduction</h2><ul><li>Lombok is a Java library that can automatically generate repetitive code for Java classes, such as getter, setter, equals, and hashCode methods.</li></ul><h2 id=principles>Principles</h2><ul><li><p>Lombok&rsquo;s working principle is based on Annotation Processors and the Java Compiler API.</p></li><li><p>When Lombok is discovered by the compiler, it uses annotation processors to modify Java code. During this process, Lombok checks for specific annotations in classes and generates corresponding code based on these annotations, such as getter and setter methods.</p></div><div class=post-footer><a href=/en/2025/09/java-1.-lombok/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/en/tags/java/>Java</a>,&nbsp;<a href=/en/tags/lombok/>Lombok</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/en/2025/09/mysql-1.-mysql-fast-query-insights/>[MySQL] 1. MySQL Fast Query Insights</a></h1><div class=post-meta><span class=post-author><a href=/en/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>GoodyHao</a></span>&nbsp;<span class=post-publish>published on <time datetime=2025-09-21>2025-09-21</time></span>&nbsp;<span class=post-category>included in <a href=/en/categories/mysql/><i class="far fa-folder fa-fw" aria-hidden=true></i>MySQL</a></span></div><div class=content><h2 id=preface>Preface</h2><ul><li><p>Let&rsquo;s start with some of the most common optimization measures we use in daily learning and business scenarios</p><ol><li><p>Do more things in the same unit of time</p><ul><li><p>QuickSort uses the binary search idea to sort multiple arrays within a single loop</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/images/3.%20%E6%B5%85%E8%B0%88MySQL%E5%BF%AB%E9%80%9F%E6%9F%A5%E8%AF%A2/1.%20%E5%BF%AB%E6%8E%92.jpg data-srcset="/images/3.%20%E6%B5%85%E8%B0%88MySQL%E5%BF%AB%E9%80%9F%E6%9F%A5%E8%AF%A2/1.%20%E5%BF%AB%E6%8E%92.jpg, /images/3.%20%E6%B5%85%E8%B0%88MySQL%E5%BF%AB%E9%80%9F%E6%9F%A5%E8%AF%A2/1.%20%E5%BF%AB%E6%8E%92.jpg 1.5x, /images/3.%20%E6%B5%85%E8%B0%88MySQL%E5%BF%AB%E9%80%9F%E6%9F%A5%E8%AF%A2/1.%20%E5%BF%AB%E6%8E%92.jpg 2x" data-sizes=auto alt=/images/3.%20%E6%B5%85%E8%B0%88MySQL%E5%BF%AB%E9%80%9F%E6%9F%A5%E8%AF%A2/1.%20%E5%BF%AB%E6%8E%92.jpg title="1. QuickSort.jpg"></p></li></ul></li><li><p>Query less information in total</p><ul><li><p>KMP algorithm preprocesses the main string to reduce the number of matches. This is the power of logic</p></div><div class=post-footer><a href=/en/2025/09/mysql-1.-mysql-fast-query-insights/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/en/tags/mysql/>MySQL</a>,&nbsp;<a href=/en/tags/index/>Index</a>,&nbsp;<a href=/en/tags/database/>Database</a>,&nbsp;<a href=/en/tags/optimization/>Optimization</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/en/2025/09/network-1.-file-transfer-optimization/>[Network] 1. File Transfer Optimization Sharing</a></h1><div class=post-meta><span class=post-author><a href=/en/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>GoodyHao</a></span>&nbsp;<span class=post-publish>published on <time datetime=2025-09-21>2025-09-21</time></span>&nbsp;<span class=post-category>included in <a href=/en/categories/network/><i class="far fa-folder fa-fw" aria-hidden=true></i>Network</a></span></div><div class=content><h2 id=background-sensitive-data-masked>Background (Sensitive Data Masked)</h2><ul><li>Due to various requirements, we need to upload data to overseas OSS for storage. So we developed a proxy service to maintain data and perform encryption operations. During this process, we discovered that data upload and download were very slow. After a series of investigations, we finally located the root cause of the problem and provided a solution. We&rsquo;re now sharing the troubleshooting process.</li><li>Of course, one prerequisite is <code>internal network connectivity through dedicated line network access</code> to achieve theoretical physical limits. Using complex and lengthy public networks is neither suitable for file security nor for large file long-term transmission.</li></ul><h2 id=service-level-issues>Service-Level Issues</h2><img src=/images/2.%20%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E4%BC%98%E5%8C%96%E5%88%86%E4%BA%AB/sequence-1-.svg alt=Description style=width:600px;height:auto><ul><li>Initially, we suspected it was due to data writing to disk being too slow. Because uploads must be written to disk to prevent files from being too large. Downloads use direct streaming transmission, which is very reasonable. The only improvement would be to perform streaming encryption and transmission for uploads, but the current issue is not significant.</li></ul><h2 id=phenomenon>Phenomenon</h2><ul><li>Using our written script to upload 1M of encrypted data took nearly 2 seconds</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>url</span><span class=si>}</span><span class=s2>/upload/files&#34;</span><span class=p>,</span> <span class=n>files</span><span class=o>=</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;data&#34;</span><span class=p>:</span> <span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>upload_data</span><span class=p>,</span> <span class=s2>&#34;application/json&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;file&#34;</span><span class=p>:</span> <span class=n>transfer_data</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ python oss.py --file_input<span class=o>=</span>./1M.data --region<span class=o>=</span>us --model<span class=o>=</span><span class=m>3</span> --range<span class=o>=</span><span class=m>5</span>
</span></span><span class=line><span class=cl>encrypted_upload
</span></span><span class=line><span class=cl>upload ./1M.data, encrypt cost 4.714599609375, upload cost 1788.95849609375
</span></span><span class=line><span class=cl>upload ./1M.data, encrypt cost 10.140625, upload cost 1945.90087890625
</span></span><span class=line><span class=cl>upload ./1M.data, encrypt cost 9.924560546875, upload cost 1756.984130859375
</span></span><span class=line><span class=cl>upload ./1M.data, encrypt cost 8.694580078125, upload cost 1930.31201171875
</span></span><span class=line><span class=cl>upload ./1M.data, encrypt cost 8.279296875, upload cost 1739.38623046875
</span></span></code></pre></td></tr></table></div></div><h2 id=packet-capture>Packet Capture</h2><ul><li>After communicating with operations, they suspected it was a network issue and performed packet capture to investigate.</li></ul><h3 id=packet-capture-demonstration>Packet Capture Demonstration</h3><h4 id=ping-packets>Ping Packets</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo tcpdump -i bond0 <span class=p>|</span> grep x.x.x.x1
</span></span><span class=line><span class=cl>tcpdump: verbose output suppressed, use -v or -vv <span class=k>for</span> full protocol decode
</span></span><span class=line><span class=cl>listening on bond0, link-type EN10MB <span class=o>(</span>Ethernet<span class=o>)</span>, capture size <span class=m>262144</span> bytes
</span></span><span class=line><span class=cl>16:21:19.255718 IP public2.alidns.com.domain &gt; domain1.36590: <span class=m>43190</span> 1/0/1 A x.x.x.x1 <span class=o>(</span>88<span class=o>)</span>
</span></span><span class=line><span class=cl>16:21:19.256404 IP domain1 &gt; x.x.x.x1: ICMP <span class=nb>echo</span> request, id 32590, seq 1, length <span class=m>64</span>
</span></span><span class=line><span class=cl>16:21:19.456754 IP x.x.x.x1 &gt; domain1: ICMP <span class=nb>echo</span> reply, id 32590, seq 1, length <span class=m>64</span>
</span></span><span class=line><span class=cl>16:21:20.257688 IP domain1 &gt; x.x.x.x1: ICMP <span class=nb>echo</span> request, id 32590, seq 2, length <span class=m>64</span>
</span></span><span class=line><span class=cl>16:21:20.458076 IP x.x.x.x1 &gt; domain1: ICMP <span class=nb>echo</span> reply, id 32590, seq 2, length <span class=m>64</span>
</span></span><span class=line><span class=cl>16:21:21.259088 IP domain1 &gt; x.x.x.x1: ICMP <span class=nb>echo</span> request, id 32590, seq 3, length <span class=m>64</span>
</span></span><span class=line><span class=cl>16:21:21.459506 IP x.x.x.x1 &gt; domain1: ICMP <span class=nb>echo</span> reply, id 32590, seq 3, length <span class=m>64</span>
</span></span><span class=line><span class=cl>16:21:22.260538 IP domain1 &gt; x.x.x.x1: ICMP <span class=nb>echo</span> request, id 32590, seq 4, length <span class=m>64</span>
</span></span><span class=line><span class=cl>16:21:22.460976 IP x.x.x.x1 &gt; domain1: ICMP <span class=nb>echo</span> reply, id 32590, seq 4, length <span class=m>64</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ping domain1
</span></span><span class=line><span class=cl>PING domain1 <span class=o>(</span>x.x.x.x1<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from x.x.x.x1 <span class=o>(</span>x.x.x.x1<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>58</span> <span class=nv>time</span><span class=o>=</span><span class=m>200</span> ms
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from x.x.x.x1 <span class=o>(</span>x.x.x.x1<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>2</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>58</span> <span class=nv>time</span><span class=o>=</span><span class=m>200</span> ms
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from x.x.x.x1 <span class=o>(</span>x.x.x.x1<span class=o>)</span>: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>3</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>58</span> <span class=nv>time</span><span class=o>=</span><span class=m>200</span> ms
</span></span><span class=line><span class=cl>^C
</span></span><span class=line><span class=cl>--- domain1 ping statistics ---
</span></span><span class=line><span class=cl><span class=m>4</span> packets transmitted, <span class=m>3</span> received, 25% packet loss, <span class=nb>time</span> 3004ms
</span></span><span class=line><span class=cl>rtt min/avg/max/mdev <span class=o>=</span> 200.395/200.419/200.456/0.517 ms
</span></span></code></pre></td></tr></table></div></div><h4 id=three-way-handshake>Three-Way Handshake</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>16:54:06.286416 IP domain1.33666 &gt; x.x.x.x1.http: Flags <span class=o>[</span>S<span class=o>]</span>, seq 2682796272, win 64240, options <span class=o>[</span>mss 1460,sackOK,TS val <span class=m>2595135963</span> ecr 0,nop,wscale 7<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:06.486797 IP x.x.x.x1.http &gt; domain1.33666: Flags <span class=o>[</span>S.<span class=o>]</span>, seq 2198055866, ack 2682796273, win 62643, options <span class=o>[</span>mss 1460,sackOK,TS val <span class=m>2062390218</span> ecr 2595135963,nop,wscale 7<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:06.486840 IP domain1.33666 &gt; x.x.x.x1.http: Flags <span class=o>[</span>.<span class=o>]</span>, ack 1, win 502, options <span class=o>[</span>nop,nop,TS val <span class=m>2595136163</span> ecr 2062390218<span class=o>]</span>, length <span class=m>0</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=four-way-handshake>Four-Way Handshake</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>16:54:28.356723 IP domain1.54028 &gt; x.x.x.x1.http: Flags <span class=o>[</span>F.<span class=o>]</span>, seq 1746, ack 215, win 501, options <span class=o>[</span>nop,nop,TS val <span class=m>2595158034</span> ecr 2062412087<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:28.557169 IP x.x.x.x1.http &gt; domain1.54028: Flags <span class=o>[</span>F.<span class=o>]</span>, seq 215, ack 1747, win 477, options <span class=o>[</span>nop,nop,TS val <span class=m>2062412289</span> ecr 2595158034<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:28.557222 IP domain1.54028 &gt; x.x.x.x1.http: Flags <span class=o>[</span>.<span class=o>]</span>, ack 216, win 501, options <span class=o>[</span>nop,nop,TS val <span class=m>2595158234</span> ecr 2062412289<span class=o>]</span>, length <span class=m>0</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=tcpdump-flags>tcpdump Flags</h4><ul><li>Tcpdump flags are flags that indicate TCP connection status or actions. They are usually represented in square brackets in tcpdump output. There are various flags in tcpdump output, and the output may also contain combinations of multiple TCP flags. Some common flags include:<ul><li>S (SYN): This flag is used to establish a connection between two hosts. It is set in the first packet of the three-way handshake.</li><li>. (No flag): This means no flag is set in the packet. It is usually used for data transmission or acknowledgment packets.</li><li>P (PUSH): This flag is used to indicate that the sender wants to send data as soon as possible without waiting for the buffer to fill.</li><li>F (FIN): This flag is used to terminate the connection between two hosts. It is set in the last packet of the four-way handshake.</li><li>R (RST): This flag is used to reset connections that are in an invalid state or encounter errors. It is also used to reject unwanted connection attempts.</li><li>W (ECN CWR): This flag is used to indicate that the sender has reduced its congestion window size according to the network&rsquo;s Explicit Congestion Notification (ECN).</li><li>E (ECN-Echo): This flag is used to indicate that the receiver has received a packet with the ECN bit, meaning there is congestion in the network.</li></ul></li><li>For example, a packet with flags [S.] means it is a SYN packet, the first step in establishing a TCP connection. A packet with flags [P.] means it is a PUSH packet containing data that the sender wants to transmit quickly. A packet with flags [F.] means it is a FIN packet, the last step in closing a TCP connection.</li></ul><h4 id=why-tcpdump-four-way-handshake-only-has-three-packets>Why tcpdump Four-Way Handshake Only Has Three Packets</h4><ul><li>The reason tcpdump four-way handshake only has three packets may be due to the following:<ul><li>One possibility is that the passive closing party (the one receiving FIN) sends its own FIN while replying with ACK, combining the second and third handshakes into one packet, saving one packet. In this case, the passive closing party has no more data to send, so it can directly enter the LAST_ACK state and wait for the final ACK from the active closing party.</li><li>Another possibility is that the active closing party (the one sending FIN) doesn&rsquo;t reply with ACK promptly after receiving the passive closing party&rsquo;s FIN, but sends ACK after some time with the RST flag set, indicating a forced connection reset. In this case, the active closing party may have encountered an exception or timeout, so it no longer waits for the 2MSL time but directly enters the CLOSE state.</li><li>Another possibility is that tcpdump didn&rsquo;t capture all packets due to network delay or packet loss, causing certain handshake packets not to be captured. In this case, you can try re-capturing packets or increasing the capture time range to see if you can see the complete four-way handshake process.</li></ul></li></ul><h3 id=actual-data>Actual Data</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ python oss.py --file_input<span class=o>=</span>./1K.data --file_output<span class=o>=</span>./download-1M.data --region<span class=o>=</span>us --model<span class=o>=</span><span class=m>3</span> --range<span class=o>=</span><span class=m>5</span>
</span></span><span class=line><span class=cl>encrypted_upload
</span></span><span class=line><span class=cl>http://domain1 upload ./1K.data, encrypt cost 1.530029296875, upload cost 408.5546875
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo tcpdump -i bond0 <span class=p>|</span> grep x.x.x.x1
</span></span><span class=line><span class=cl>tcpdump: verbose output suppressed, use -v or -vv <span class=k>for</span> full protocol decode
</span></span><span class=line><span class=cl>listening on bond0, link-type EN10MB <span class=o>(</span>Ethernet<span class=o>)</span>, capture size <span class=m>262144</span> bytes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>16:54:06.286416 IP domain1.33666 &gt; x.x.x.x1.http: Flags <span class=o>[</span>S<span class=o>]</span>, seq 2682796272, win 64240, options <span class=o>[</span>mss 1460,sackOK,TS val <span class=m>2595135963</span> ecr 0,nop,wscale 7<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:06.486797 IP x.x.x.x1.http &gt; domain1.33666: Flags <span class=o>[</span>S.<span class=o>]</span>, seq 2198055866, ack 2682796273, win 62643, options <span class=o>[</span>mss 1460,sackOK,TS val <span class=m>2062390218</span> ecr 2595135963,nop,wscale 7<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:06.486840 IP domain1.33666 &gt; x.x.x.x1.http: Flags <span class=o>[</span>.<span class=o>]</span>, ack 1, win 502, options <span class=o>[</span>nop,nop,TS val <span class=m>2595136163</span> ecr 2062390218<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:06.486930 IP domain1.33666 &gt; x.x.x.x1.http: Flags <span class=o>[</span>P.<span class=o>]</span>, seq 1:292, ack 1, win 502, options <span class=o>[</span>nop,nop,TS val <span class=m>2595136164</span> ecr 2062390218<span class=o>]</span>, length 291: HTTP: POST /upload/files HTTP/1.1
</span></span><span class=line><span class=cl>16:54:06.486960 IP domain1.33666 &gt; x.x.x.x1.http: Flags <span class=o>[</span>P.<span class=o>]</span>, seq 292:1746, ack 1, win 502, options <span class=o>[</span>nop,nop,TS val <span class=m>2595136164</span> ecr 2062390218<span class=o>]</span>, length 1454: HTTP
</span></span><span class=line><span class=cl>16:54:06.687234 IP x.x.x.x1.http &gt; domain1.33666: Flags <span class=o>[</span>.<span class=o>]</span>, ack 292, win 488, options <span class=o>[</span>nop,nop,TS val <span class=m>2062390419</span> ecr 2595136164<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:06.687279 IP x.x.x.x1.http &gt; domain1.33666: Flags <span class=o>[</span>.<span class=o>]</span>, ack 1746, win 477, options <span class=o>[</span>nop,nop,TS val <span class=m>2062390419</span> ecr 2595136164<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:06.690277 IP x.x.x.x1.http &gt; domain1.33666: Flags <span class=o>[</span>P.<span class=o>]</span>, seq 1:215, ack 1746, win 477, options <span class=o>[</span>nop,nop,TS val <span class=m>2062390422</span> ecr 2595136164<span class=o>]</span>, length 214: HTTP: HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>16:54:06.690314 IP domain1.33666 &gt; x.x.x.x1.http: Flags <span class=o>[</span>.<span class=o>]</span>, ack 215, win 501, options <span class=o>[</span>nop,nop,TS val <span class=m>2595136367</span> ecr 2062390422<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:06.692023 IP domain1.33666 &gt; x.x.x.x1.http: Flags <span class=o>[</span>F.<span class=o>]</span>, seq 1746, ack 215, win 501, options <span class=o>[</span>nop,nop,TS val <span class=m>2595136369</span> ecr 2062390422<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:06.892401 IP x.x.x.x1.http &gt; domain1.33666: Flags <span class=o>[</span>F.<span class=o>]</span>, seq 215, ack 1747, win 477, options <span class=o>[</span>nop,nop,TS val <span class=m>2062390624</span> ecr 2595136369<span class=o>]</span>, length <span class=m>0</span>
</span></span><span class=line><span class=cl>16:54:06.892448 IP domain1.33666 &gt; x.x.x.x1.http: Flags <span class=o>[</span>.<span class=o>]</span>, ack 216, win 501, options <span class=o>[</span>nop,nop,TS val <span class=m>2595136569</span> ecr 2062390624<span class=o>]</span>, length <span class=m>0</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>Actually uploading 1M of data for analysis, simplified here.</li><li>Since all time jumps occur in packets returned from the server side, the problem is now very clear. Due to the actual physical distance between Shenzhen and the US East Coast, the 200ms round trip has reached its limit. So it&rsquo;s actually reasonable.</li></ul><h2 id=soul-searching-question>Soul-Searching Question</h2><ul><li>At this point, a soul-searching question arises: why was it faster when using the public network before?</li><li>After communicating with colleagues from sister departments and simulating their code, we tested using AWS SDK</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>boto3</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>boto3.s3.transfer</span> <span class=kn>import</span> <span class=n>TransferConfig</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>download</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>s3_client</span> <span class=o>=</span> <span class=n>client</span><span class=p>(</span><span class=n>access_key</span><span class=p>,</span> <span class=n>access_secret</span><span class=p>,</span> <span class=n>host</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>GB</span> <span class=o>=</span> <span class=mi>1024</span> <span class=o>**</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>    <span class=n>config</span> <span class=o>=</span> <span class=n>TransferConfig</span><span class=p>(</span><span class=n>multipart_threshold</span><span class=o>=</span><span class=mi>2</span> <span class=o>*</span> <span class=n>GB</span><span class=p>,</span> <span class=n>max_concurrency</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>use_threads</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>s3_client</span><span class=o>.</span><span class=n>download_file</span><span class=p>(</span><span class=n>Bucket</span><span class=o>=</span><span class=s2>&#34;bucket&#34;</span><span class=p>,</span> <span class=n>Key</span><span class=o>=</span><span class=s2>&#34;name-100.jpg&#34;</span><span class=p>,</span> <span class=n>Filename</span><span class=o>=</span><span class=s2>&#34;name-100.jpg&#34;</span><span class=p>,</span> <span class=n>Config</span><span class=o>=</span><span class=n>config</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>download</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1># ...</span>
</span></span><span class=line><span class=cl>    <span class=n>download</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>Results</strong></p></div><div class=post-footer><a href=/en/2025/09/network-1.-file-transfer-optimization/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/en/tags/network/>Network</a>,&nbsp;<a href=/en/tags/tcpdump/>Tcpdump</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/en/2025/09/github-1.-deploy-github-blog-site/>[Github] 1. Deploy GitHub Blog Site</a></h1><div class=post-meta><span class=post-author><a href=/en/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>GoodyHao</a></span>&nbsp;<span class=post-publish>published on <time datetime=2025-09-10>2025-09-10</time></span>&nbsp;<span class=post-category>included in <a href=/en/categories/github/><i class="far fa-folder fa-fw" aria-hidden=true></i>Github</a>&nbsp;<a href=/en/categories/deploy/><i class="far fa-folder fa-fw" aria-hidden=true></i>Deploy</a></span></div><div class=content><h2 id=intro>intro</h2><ul><li>GitHub Pages is a static site hosting service that takes HTML, CSS, and JavaScript files straight from a repository on GitHub, optionally runs the files through a build process, and publishes a website.</li></ul><h2 id=pre-work>pre-work</h2><h3 id=create-a-repository>create a repository</h3><ul><li>Create a repository named <code>your_github_username.github.io</code>, where <code>your_github_username</code> is your GitHub username. For example, if your GitHub username is <code>octocat</code>, the repository name should be <code>octocat.github.io</code>.</li></ul><h3 id=hugo-install>hugo install</h3><ul><li>Download the latest version of Hugo from the <a href=https://gohugo.io/installation/ target=_blank rel="noopener noreffer">official Hugo releases page</a></li></ul><h2 id=create-a-blog-site>create a blog site</h2><h3 id=hugo-init-site><a href=https://gohugo.io/getting-started/quick-start/ target=_blank rel="noopener noreffer">hugo init site</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># create directory</span>
</span></span><span class=line><span class=cl>mkdir your_github_username.github.io
</span></span><span class=line><span class=cl><span class=c1># cd to directory</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> your_github_username.github.io
</span></span><span class=line><span class=cl><span class=c1># init site</span>
</span></span><span class=line><span class=cl>hugo new site .
</span></span><span class=line><span class=cl><span class=c1># git init, make sure it&#39;s a git repository</span>
</span></span><span class=line><span class=cl>git init
</span></span></code></pre></td></tr></table></div></div><h3 id=add-a-theme><a href=https://themes.gohugo.io/ target=_blank rel="noopener noreffer">add a theme</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># add a theme, here we use LoveIt theme.</span>
</span></span><span class=line><span class=cl>git submodule add https://github.com/dillonzq/LoveIt.git themes/LoveIt
</span></span><span class=line><span class=cl><span class=c1># now the git is main branch which is not stable, we need to checkout to the latest stable version.</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> themes/LoveIt
</span></span><span class=line><span class=cl>git checkout v0.3.0
</span></span><span class=line><span class=cl><span class=nb>cd</span> ../..
</span></span><span class=line><span class=cl><span class=c1># now, there should be a .gitmodules file in your directory. if not, you need to run `git init` first.</span>
</span></span><span class=line><span class=cl><span class=c1># copy the exampleSite config file to the root directory</span>
</span></span><span class=line><span class=cl>cp themes/LoveIt/exampleSite/hugo.toml .
</span></span></code></pre></td></tr></table></div></div><h3 id=modify-the-config-file>modify the config file</h3><ul><li>modify the config file hugo.toml</li></ul><h4 id=bashurl>bashURL</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=nx>baseURL</span> <span class=p>=</span> <span class=s2>&#34;https://gooddayday.github.io&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=themes-directory>themes directory</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=c># themes directory</span>
</span></span><span class=line><span class=cl><span class=c># 主题目录</span>
</span></span><span class=line><span class=cl><span class=nx>themesDir</span> <span class=p>=</span> <span class=s2>&#34;./themes&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=website-title>website title</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=c># website title</span>
</span></span><span class=line><span class=cl><span class=c># 网站标题</span>
</span></span><span class=line><span class=cl><span class=nx>title</span> <span class=p>=</span> <span class=s2>&#34;GoodyHao&#39;s Blog&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=website-images>website images</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=c># website images for Open Graph and Twitter Cards</span>
</span></span><span class=line><span class=cl><span class=c># 网站图片, 用于 Open Graph 和 Twitter Cards</span>
</span></span><span class=line><span class=cl><span class=nx>images</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;/logo.jpg&#34;</span><span class=p>]</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=website-icon>website icon</h4><ul><li>put icon file in the <code>static</code> directory</li></ul><h4 id=gitrepo>gitRepo</h4><ul><li>modify the gitRepo to your public git repo url</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># public git repo url only then enableGitInfo is true</span>
</span></span><span class=line><span class=cl><span class=c1># 公共 git 仓库路径，仅在 enableGitInfo 设为 true 时有效</span>
</span></span><span class=line><span class=cl><span class=nv>gitRepo</span> <span class=o>=</span> <span class=s2>&#34;https://github.com/GOODDAYDAY/GOODDAYDAY.github.io&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=github-deploy>github deploy</h2><h3 id=create-a-workflow-file>create a workflow file</h3><ul><li>create a file <code>.github/workflows/deploy.yaml</code>, and add the following content:</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy Hugo to GitHub Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push:  # Trigger condition</span><span class=p>:</span><span class=w> </span><span class=l>push code to master branch</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build-and-deploy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest </span><span class=w> </span><span class=c># Use Ubuntu environment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 1. Check out repository code (recursively pull theme submodule)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 2. Install Hugo (use extended version, supports SASS)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Hugo</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-hugo@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;latest&#39;</span><span class=w>  </span><span class=c># Or specify version (e.g., &#39;0.147.2&#39;)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 3. Cache dependencies (speed up subsequent builds)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/cache@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            resources/_gen
</span></span></span><span class=line><span class=cl><span class=sd>            public</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>${{ runner.os }}-hugo-${{ hashFiles(&#39;**/go.sum&#39;) }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>restore-keys</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>            ${{ runner.os }}-hugo-</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 4. Build Hugo site (enable compression)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Hugo site</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>hugo --minify</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=c># 5. Deploy to GitHub Pages (automatically push public directory to gh-pages branch)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy to GitHub Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>github_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN  }} </span><span class=w> </span><span class=c># GitHub automatically provided Token (no manual creation needed)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./public </span><span class=w> </span><span class=c># Point to Hugo generated static files directory</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>force_orphan</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>  </span><span class=c># Force create new commit (avoid branch history confusion)</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>github repository settings -> pages -> source -> select <code>gh-pages</code> branch and <code>/ (root)</code> folder -> save<ul><li>if gh-pages branch not exist, need to push code to github first</li></ul></li></ul><p><img class=lazyload src=/svg/loading.min.svg data-src=/images/1.%20deploy%20github%20blog%20site.md/1.%20github-page-setting.png data-srcset="/images/1.%20deploy%20github%20blog%20site.md/1.%20github-page-setting.png, /images/1.%20deploy%20github%20blog%20site.md/1.%20github-page-setting.png 1.5x, /images/1.%20deploy%20github%20blog%20site.md/1.%20github-page-setting.png 2x" data-sizes=auto alt=/images/1.%20deploy%20github%20blog%20site.md/1.%20github-page-setting.png title="1. github-page-setting.png"></p></div><div class=post-footer><a href=/en/2025/09/github-1.-deploy-github-blog-site/>Read More</a><div class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/en/tags/github/>Github</a>,&nbsp;<a href=/en/tags/deploy/>Deploy</a>,&nbsp;<a href=/en/tags/hugo/>Hugo</a>,&nbsp;<a href=/en/tags/blog/>Blog</a>,&nbsp;<a href=/en/tags/site/>Site</a></div></div></article><ul class=pagination><li class=page-item><span class=page-link><a href=/en/>1</a></span></li><li class=page-item><span class=page-link><a href=/en/page/2/>2</a></span></li><li class="page-item active"><span class=page-link><a href=/en/page/3/>3</a></span></li></ul></div></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><span class=author itemprop=copyrightHolder>&nbsp;<a href=/en/ target=_blank>GoodyHao</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><link rel=stylesheet href=/css/auto-numbering.css><link rel=stylesheet href=/css/svg-fullwidth.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},data:{"id-1":"Elegance Never Fades"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"PASDMWALPK",algoliaIndex:"index.en",algoliaSearchKey:"b42948e51daaa93df92381c8e2ac0f93",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>