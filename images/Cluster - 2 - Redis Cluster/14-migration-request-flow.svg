<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="777px" preserveAspectRatio="none" style="width:516px;height:777px;background:#FEFEFE;" version="1.1" viewBox="0 0 516 777" width="516px" zoomAndPan="magnify"><title>Request Flow During Slot Migration</title><defs/><g><rect fill="#FEFEFE" height="777" style="stroke:none;stroke-width:1.0;" width="516" x="0" y="0"/><text fill="#000000" font-family="Helvetica" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="372.7646" x="70.3438" y="40.2119">Request Flow During Slot Migration</text><ellipse cx="175.0874" cy="66.0459" fill="#FFFFFF" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;"/><rect fill="#FFFFFF" height="58.2402" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="163.9443" x="93.1152" y="96.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="127.627" x="103.1152" y="122.0898">Client sends request</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="143.9443" x="103.1152" y="141.21">for key in migrating slot</text><rect fill="#FFFFFF" height="58.2402" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="211.3789" x="69.3979" y="174.2861"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="113.6064" x="79.3979" y="200.3301">Request arrives at</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="191.3789" x="79.3979" y="219.4502">Node A (Source, MIGRATING)</text><polygon fill="#FFFFFF" points="117.8979,252.5264,232.2769,252.5264,244.2769,264.5264,232.2769,276.5264,117.8979,276.5264,105.8979,264.5264,117.8979,252.5264" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="114.3789" x="117.8979" y="271.0103">Key exists locally?</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="21.7861" x="84.1118" y="261.4502">yes</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="15.5723" x="244.2769" y="261.4502">no</text><rect fill="#FFFFFF" height="58.2402" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="163.9512" x="6" y="286.5264"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="143.9512" x="16" y="312.5703">Serve request normally</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="91.7861" x="16" y="331.6904">(GET/SET/etc)</text><ellipse cx="87.9756" cy="375.7666" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="87.9756" cy="375.7666" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1.0;"/><rect fill="#FFFFFF" height="58.2402" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="144.4961" x="189.9512" y="286.5264"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="124.4961" x="199.9512" y="312.5703">Return ASK redirect</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="62.2617" x="199.9512" y="331.6904">to Node B</text><rect fill="#FFFFFF" height="58.2402" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="153.834" x="98.1704" y="406.7666"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="133.834" x="108.1704" y="432.8105">Client sends ASKING</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="62.2617" x="108.1704" y="451.9307">to Node B</text><rect fill="#FFFFFF" height="58.2402" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="147.6201" x="101.2773" y="485.0068"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="126.0684" x="111.2773" y="511.0508">Client sends original</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="127.6201" x="111.2773" y="530.1709">command to Node B</text><rect fill="#FFFFFF" height="39.1201" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="207.4824" x="71.3462" y="563.2471"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="187.4824" x="81.3462" y="589.291">Node B (Target, IMPORTING)</text><polygon fill="#FFFFFF" points="120.229,622.3672,229.9458,622.3672,241.9458,634.3672,229.9458,646.3672,120.229,646.3672,108.229,634.3672,120.229,622.3672" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="109.7168" x="120.229" y="640.8511">ASKING flag set?</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="21.7861" x="86.4429" y="631.291">yes</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="15.5723" x="241.9458" y="631.291">no</text><rect fill="#FFFFFF" height="39.1201" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="107.1582" x="42.7637" y="656.3672"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="87.1582" x="52.7637" y="682.4111">Serve request</text><ellipse cx="96.3428" cy="741.4873" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="96.3428" cy="741.4873" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1.0;"/><path d="M357.7422,661.3672 L357.7422,681.4873 L337.7422,685.4873 L357.7422,689.4873 L357.7422,709.6074 A0,0 0 0 0 357.7422,709.6074 L509.4521,709.6074 A0,0 0 0 0 509.4521,709.6074 L509.4521,671.3672 L499.4521,661.3672 L357.7422,661.3672 A0,0 0 0 0 357.7422,661.3672 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M499.4521,661.3672 L499.4521,671.3672 L509.4521,671.3672 L499.4521,661.3672 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="130.71" x="363.7422" y="682.4111">Prevents clients from</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="124.5098" x="363.7422" y="701.5313">bypassing migration</text><rect fill="#FFFFFF" height="58.2402" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.0;" width="167.8203" x="169.9219" y="656.3672"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="147.8203" x="179.9219" y="682.4111">Return MOVED redirect</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="95.7236" x="179.9219" y="701.5313">back to Node A</text><ellipse cx="253.832" cy="760.6074" fill="none" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="253.832" cy="760.6074" fill="#FFFFFF" rx="6" ry="6" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="175.0874" x2="175.0874" y1="76.0459" y2="96.0459"/><polygon fill="#000000" points="171.0874,86.0459,175.0874,96.0459,179.0874,86.0459,175.0874,90.0459" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="175.0874" x2="175.0874" y1="154.2861" y2="174.2861"/><polygon fill="#000000" points="171.0874,164.2861,175.0874,174.2861,179.0874,164.2861,175.0874,168.2861" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="87.9756" x2="87.9756" y1="344.7666" y2="364.7666"/><polygon fill="#000000" points="83.9756,354.7666,87.9756,364.7666,91.9756,354.7666,87.9756,358.7666" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="105.8979" x2="87.9756" y1="264.5264" y2="264.5264"/><line style="stroke:#000000;stroke-width:1.0;" x1="87.9756" x2="87.9756" y1="264.5264" y2="286.5264"/><polygon fill="#000000" points="83.9756,276.5264,87.9756,286.5264,91.9756,276.5264,87.9756,280.5264" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="244.2769" x2="262.1992" y1="264.5264" y2="264.5264"/><line style="stroke:#000000;stroke-width:1.0;" x1="262.1992" x2="262.1992" y1="264.5264" y2="286.5264"/><polygon fill="#000000" points="258.1992,276.5264,262.1992,286.5264,266.1992,276.5264,262.1992,280.5264" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="262.1992" x2="262.1992" y1="344.7666" y2="391.7666"/><line style="stroke:#000000;stroke-width:1.0;" x1="262.1992" x2="175.0874" y1="391.7666" y2="391.7666"/><line style="stroke:#000000;stroke-width:1.0;" x1="175.0874" x2="175.0874" y1="391.7666" y2="406.7666"/><polygon fill="#000000" points="171.0874,396.7666,175.0874,406.7666,179.0874,396.7666,175.0874,400.7666" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="175.0874" x2="175.0874" y1="232.5264" y2="252.5264"/><polygon fill="#000000" points="171.0874,242.5264,175.0874,252.5264,179.0874,242.5264,175.0874,246.5264" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="175.0874" x2="175.0874" y1="465.0068" y2="485.0068"/><polygon fill="#000000" points="171.0874,475.0068,175.0874,485.0068,179.0874,475.0068,175.0874,479.0068" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="175.0874" x2="175.0874" y1="543.2471" y2="563.2471"/><polygon fill="#000000" points="171.0874,553.2471,175.0874,563.2471,179.0874,553.2471,175.0874,557.2471" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="96.3428" x2="96.3428" y1="695.4873" y2="730.4873"/><polygon fill="#000000" points="92.3428,720.4873,96.3428,730.4873,100.3428,720.4873,96.3428,724.4873" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="253.832" x2="253.832" y1="714.6074" y2="749.6074"/><polygon fill="#000000" points="249.832,739.6074,253.832,749.6074,257.832,739.6074,253.832,743.6074" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="108.229" x2="96.3428" y1="634.3672" y2="634.3672"/><line style="stroke:#000000;stroke-width:1.0;" x1="96.3428" x2="96.3428" y1="634.3672" y2="656.3672"/><polygon fill="#000000" points="92.3428,646.3672,96.3428,656.3672,100.3428,646.3672,96.3428,650.3672" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="241.9458" x2="253.832" y1="634.3672" y2="634.3672"/><line style="stroke:#000000;stroke-width:1.0;" x1="253.832" x2="253.832" y1="634.3672" y2="656.3672"/><polygon fill="#000000" points="249.832,646.3672,253.832,656.3672,257.832,646.3672,253.832,650.3672" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="175.0874" x2="175.0874" y1="602.3672" y2="622.3672"/><polygon fill="#000000" points="171.0874,612.3672,175.0874,622.3672,179.0874,612.3672,175.0874,616.3672" style="stroke:#000000;stroke-width:1.0;"/><!--SRC=[VP9FQ-Cm4CNl-XIltOi3WLBOKtiesURFXfAqnA6dN5Hxx8h8ewmqJflzz3jsQ4ZBKep0nkyzlTz85_9A3M7dhMEJjevtDje6BxROrZ6qNDu77o9-J2VTSwOegRAjbsbWMLfDkFnDVa_Y2dlvVrNk_XAkVneZJZnXHNzQIeAf3syOjz5nZTm7mSBLqOeBR4mI6yMOctllY0M9k4o8H-E6A-srfGCSepbwD29fnArQFk9jZ6vF2LODor0IHiZoqCQ2XbZCPwlHUhwS3TJXAcGFcaRlBac23uNr_d0tW0w8aHqe3GnmarFSqqS7S8XD9zjmDfkiht9T98N60Kd2pf1FX8n3RrsHj94noX_KNxf8XNQIWBxMhrkZTAxwIgjgBVX9zqKHegiTMx_X8ZIDvHAVjCStP6iRQv8XvekdnzKvz747LDxgz4Y-9_wMRF7uF1cViNMNw5Hcr5avY4Qv-bNq0tYAj5UGXA87IgXYQFe_BuUTJQaxqEPq7G3bxIDE9Vg9_GC0]--></g></svg>