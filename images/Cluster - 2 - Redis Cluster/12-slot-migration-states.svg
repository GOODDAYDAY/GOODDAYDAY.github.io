<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="451px" preserveAspectRatio="none" style="width:795px;height:451px;background:#FEFEFE;" version="1.1" viewBox="0 0 795 451" width="795px" zoomAndPan="magnify"><title>Slot Migration State Machine</title><defs/><g><rect fill="#FEFEFE" height="451" style="stroke:none;stroke-width:1.0;" width="795" x="0" y="0"/><text fill="#000000" font-family="Helvetica" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="300.6953" x="242.8296" y="40.2119">Slot Migration State Machine</text><!--cluster nodeA--><g id="cluster_nodeA"><rect fill="#FFCDD2" height="147" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="173" x="120.5" y="63.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="109.6758" x="152.1621" y="81.0898">Node A (Source)</text></g><!--cluster nodeB--><g id="cluster_nodeB"><rect fill="#C8E6C9" height="147" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="173" x="350.5" y="63.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105" x="384.5" y="81.0898">Node B (Target)</text></g><!--cluster done--><g id="cluster_done"><rect fill="#E8F5E9" height="147" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="213" x="291.5" y="298.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="130.6689" x="332.6655" y="316.0898">Migration Complete</text></g><!--entity migrating--><g id="elem_migrating"><rect fill="#FFFFFF" height="77.3604" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="104.8203" x="164" y="109.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="84.8203" x="174" y="135.0898">Slot X Status:</text><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="80.1035" x="174" y="154.21">MIGRATING</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="62.2617" x="174" y="173.3301">to Node B</text></g><!--entity importing--><g id="elem_importing"><rect fill="#FFFFFF" height="77.3604" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="104.8203" x="375" y="109.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="84.8203" x="385" y="135.0898">Slot X Status:</text><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="79.3311" x="385" y="154.21">IMPORTING</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="78.5859" x="385" y="173.3301">from Node A</text></g><!--entity final--><g id="elem_final"><rect fill="#FFFFFF" height="77.3604" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="144.5098" x="335" y="344.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="124.5098" x="345" y="370.0898">Node B owns Slot X</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="93.4063" x="345" y="389.21">configEpoch++</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="96.4961" x="345" y="408.3301">Broadcast to all</text></g><g id="elem_GMN7"><path d="M11,349.0459 L11,416.4063 L245.9512,416.4063 L245.9512,359.0459 L235.9512,349.0459 L11,349.0459 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M235.9512,349.0459 L235.9512,359.0459 L245.9512,359.0459 L235.9512,349.0459 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="147.0068" x="17" y="370.0898">MIGRATING behavior:</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="213.9512" x="17" y="389.21">- Key exists locally: serve normally</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="210.1094" x="17" y="408.3301">- Key not found: ASK redirect to B</text></g><g id="elem_GMN10"><path d="M528.5,349.0459 L528.5,416.4063 L788.3545,416.4063 L788.3545,359.0459 L778.3545,349.0459 L528.5,349.0459 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M778.3545,349.0459 L778.3545,359.0459 L788.3545,359.0459 L778.3545,349.0459 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="146.2344" x="534.5" y="370.0898">IMPORTING behavior:</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="180.5029" x="534.5" y="389.21">- Accept ASKING commands</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="238.8545" x="534.5" y="408.3301">- Reject normal commands for this slot</text></g><!--link migrating to importing--><g id="link_migrating_importing"><path d="M269.2,147.5459 C301.42,147.5459 336.5,147.5459 368.74,147.5459 " fill="none" id="migrating-to-importing" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="374.74,147.5459,365.74,143.5459,369.74,147.5459,365.74,151.5459,374.74,147.5459" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="69.248" x="287.5171" y="121.5898">Keys move</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="69.2822" x="287.5" y="140.71">one by one</text></g><!--link nodeA to GMN7--><g id="link_nodeA_GMN7"><path d="M128.5,210.0899 C128.5,210.6982 128.5,211.3091 128.5,211.9225 C128.5,216.8299 128.5,221.8973 128.5,227.0771 C128.5,268.5159 128.5,317.1509 128.5,348.6159 " fill="none" id="nodeA-GMN7" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--link nodeB to GMN10--><g id="link_nodeB_GMN10"><path d="M523.5563,161.6786 C523.9687,162.3505 524.395,163.045 524.8347,163.7614 C526.5936,166.6271 528.5675,169.8431 530.7273,173.362 C539.3666,187.4375 550.9794,206.3578 563.6963,227.0771 C589.13,268.5159 618.98,317.1509 638.29,348.6159 " fill="none" id="nodeB-GMN10" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--link importing to done--><g id="link_importing_done"><path d="M388.12,186.1359 C364.31,211.0959 335.39,245.8459 318.5,282.0459 C316.1938,286.9859 314.1675,292.1886 312.3872,297.5178 C312.3316,297.6844 314.16,292.1544 314.1049,292.3212 " fill="none" id="importing-to-done" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="312.2211,298.0178,318.8445,290.7288,313.7909,293.2706,311.2491,288.217,312.2211,298.0178" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="48.2344" x="348.6172" y="251.0898">All keys</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="54.4688" x="345.5" y="270.21">migrated</text></g><!--SRC=[ZLB1Rjim3BtxAxZaqg48XWtRq0P50DjDkg18LiGzzE2BBDEs5faq92LREkpV9zbR4c0vp3fPfDvxV8zlN8CjGgU5eiXk5NN2Y1OA8RUruHsLAMisC5xCmpdhAB4IE-qMJ6ujFCBe2-ezEYN5w79NfbuHtd-C8gUSHiWqErYfsWYdc21pmY6iX6mKOHGPb4vGxVj6QouHOhZAU6SalXs1i43-BlQY5kdz_GVu6O7_pfxqs2yzvivESxehPglbmoP-NguVxjuLivmSGu-Rz73j88FgwDU_r0bSFGjJepjH9p1ER-QVqzl_ebwkdhvkJjILuNOWZtj0rNPi_f8VbS34gBfnazcf3bDun8DNotlCYGcXE007juYzTmKxvv6v6jpnmix7XW8RiLTifa65Bqu26E0FPPq5pL9eVPY2HRD73s3Qy7ziymHGXMsOGfmz-dbB5MO6RsCI8PMXuRAEPD1nzE22ZbXAx5m03dN9RIkej7rfWzy2pQ3dMF9I3BX6MR3UxJF-innEcvLossbqs9jT1jl6yvl5f_c5yFxapT_93llvafDagbGzxrWsrzSv9OP5AONjP_SUzQYL8g53VAUi9gL7yUdrXDurhM7hmyjfI1ZBw3S0]--></g></svg>