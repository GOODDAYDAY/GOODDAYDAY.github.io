<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="869px" preserveAspectRatio="none" style="width:619px;height:869px;background:#FEFEFE;" version="1.1" viewBox="0 0 619 869" width="619px" zoomAndPan="magnify"><title>Slave Election - Choosing New Master</title><defs/><g><rect fill="#FEFEFE" height="869" style="stroke:none;stroke-width:1.0;" width="619" x="0" y="0"/><text fill="#000000" font-family="Helvetica" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="398.5352" x="116.8901" y="40.2119">Slave Election - Choosing New Master</text><line style="stroke:#000000;stroke-width:1.0;" x1="99" x2="99" y1="109.2861" y2="812.1689"/><line style="stroke:#000000;stroke-width:1.0;" x1="281.8477" x2="281.8477" y1="109.2861" y2="812.1689"/><line style="stroke:#000000;stroke-width:1.0;" x1="395.4712" x2="395.4712" y1="109.2861" y2="812.1689"/><line style="stroke:#000000;stroke-width:1.0;" x1="577.5293" x2="577.5293" y1="109.2861" y2="812.1689"/><rect fill="#C8E6C9" height="52.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="84.7998" x="57" y="56.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="56.0342" x="71.3828" y="79.0898">Slave A1</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="70.7998" x="64" y="98.21">(Most data)</text><rect fill="#C8E6C9" height="52.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="84.7998" x="57" y="811.1689"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="56.0342" x="71.3828" y="834.2129">Slave A1</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="70.7998" x="64" y="853.333">(Most data)</text><rect fill="#C8E6C9" height="33.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="70.0342" x="246.8477" y="75.166"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="56.0342" x="253.8477" y="98.21">Slave A2</text><rect fill="#C8E6C9" height="33.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="70.0342" x="246.8477" y="811.1689"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="56.0342" x="253.8477" y="834.2129">Slave A2</text><rect fill="#FFCDD2" height="33.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="70.0137" x="360.4712" y="75.166"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="56.0137" x="367.4712" y="98.21">Master B</text><rect fill="#FFCDD2" height="33.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="70.0137" x="360.4712" y="811.1689"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="56.0137" x="367.4712" y="834.2129">Master B</text><rect fill="#FFCDD2" height="33.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="70.7861" x="542.5293" y="75.166"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="56.7861" x="549.5293" y="98.21">Master C</text><rect fill="#FFCDD2" height="33.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="70.7861" x="542.5293" y="811.1689"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="56.7861" x="549.5293" y="834.2129">Master C</text><path d="M53,124.2861 L53,172.2861 L327,172.2861 L327,134.2861 L317,124.2861 L53,124.2861 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M317,124.2861 L317,134.2861 L327,134.2861 L317,124.2861 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="109.6895" x="63.3828" y="145.3301">Master A is FAIL</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="245.1162" x="63.3828" y="164.4502">Slaves compete to become new master</text><line style="stroke:#000000;stroke-width:1.0;" x1="99.3999" x2="141.3999" y1="240.8867" y2="240.8867"/><line style="stroke:#000000;stroke-width:1.0;" x1="141.3999" x2="141.3999" y1="240.8867" y2="253.8867"/><line style="stroke:#000000;stroke-width:1.0;" x1="100.3999" x2="141.3999" y1="253.8867" y2="253.8867"/><polygon fill="#000000" points="110.3999,249.8867,100.3999,253.8867,110.3999,257.8867,106.3999,253.8867" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="99.6133" x="140.8257" y="197.5703">Calculate delay:</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="168.4648" x="106.3999" y="216.6904">500ms + random(0,500ms)</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="113.9961" x="133.6343" y="235.8105">+ RANK * 1000ms</text><path d="M104,266.8867 L104,314.8867 L298,314.8867 L298,276.8867 L288,266.8867 L104,266.8867 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M288,266.8867 L288,276.8867 L298,276.8867 L288,266.8867 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="173.8994" x="110" y="287.9307">RANK = 0 (most up-to-date)</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="66.8965" x="110" y="307.0508">Starts first!</text><line style="stroke:#000000;stroke-width:1.0;" x1="281.8647" x2="323.8647" y1="383.4873" y2="383.4873"/><line style="stroke:#000000;stroke-width:1.0;" x1="323.8647" x2="323.8647" y1="383.4873" y2="396.4873"/><line style="stroke:#000000;stroke-width:1.0;" x1="282.8647" x2="323.8647" y1="396.4873" y2="396.4873"/><polygon fill="#000000" points="292.8647,392.4873,282.8647,396.4873,292.8647,400.4873,288.8647,396.4873" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="99.6133" x="288.8647" y="340.1709">Calculate delay:</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="62.6377" x="307.3525" y="359.291">RANK = 1</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="86.3652" x="295.4888" y="378.4111">Starts 1s later</text><polygon fill="#000000" points="383.478,444.7275,393.478,448.7275,383.478,452.7275,387.478,448.7275" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="99.3999" x2="389.478" y1="448.7275" y2="448.7275"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="190.5996" x="152.1392" y="424.5313">FAILOVER_AUTH_REQUEST</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="182.6904" x="156.0938" y="443.6514">"Vote for me for slots 0-5460"</text><polygon fill="#000000" points="565.9224,477.8477,575.9224,481.8477,565.9224,485.8477,569.9224,481.8477" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="99.3999" x2="571.9224" y1="481.8477" y2="481.8477"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="190.5996" x="243.3613" y="476.7715">FAILOVER_AUTH_REQUEST</text><line style="stroke:#000000;stroke-width:1.0;" x1="395.478" x2="437.478" y1="572.3281" y2="572.3281"/><line style="stroke:#000000;stroke-width:1.0;" x1="437.478" x2="437.478" y1="572.3281" y2="585.3281"/><line style="stroke:#000000;stroke-width:1.0;" x1="396.478" x2="437.478" y1="585.3281" y2="585.3281"/><polygon fill="#000000" points="406.478,581.3281,396.478,585.3281,406.478,589.3281,402.478,585.3281" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="43.5723" x="464.9141" y="509.8916">Check:</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="168.4443" x="402.478" y="529.0117">1. Haven't voted this epoch</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="142.3789" x="415.5107" y="548.1318">2. Master A really FAIL</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="87.9443" x="442.728" y="567.252">3. Epoch valid</text><polygon fill="#000000" points="110.3999,614.4482,100.3999,618.4482,110.3999,622.4482,106.3999,618.4482" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="104.3999" x2="394.478" y1="618.4482" y2="618.4482"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="151.71" x="171.584" y="613.3721">FAILOVER_AUTH_ACK</text><polygon fill="#000000" points="110.3999,647.5684,100.3999,651.5684,110.3999,655.5684,106.3999,651.5684" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="104.3999" x2="576.9224" y1="651.5684" y2="651.5684"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="151.71" x="262.8062" y="646.4922">FAILOVER_AUTH_ACK</text><path d="M10,664.5684 L10,712.5684 L190,712.5684 L190,674.5684 L180,664.5684 L10,664.5684 " fill="#E8F5E9" style="stroke:#000000;stroke-width:1.0;"/><path d="M180,664.5684 L180,674.5684 L190,674.5684 L180,664.5684 " fill="#E8F5E9" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="159.5098" x="16" y="685.6123">Majority votes received!</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="154.0684" x="16" y="704.7324">A1 becomes new master</text><line style="stroke:#000000;stroke-width:1.0;" x1="99.3999" x2="141.3999" y1="781.1689" y2="781.1689"/><line style="stroke:#000000;stroke-width:1.0;" x1="141.3999" x2="141.3999" y1="781.1689" y2="794.1689"/><line style="stroke:#000000;stroke-width:1.0;" x1="100.3999" x2="141.3999" y1="794.1689" y2="794.1689"/><polygon fill="#000000" points="110.3999,790.1689,100.3999,794.1689,110.3999,798.1689,106.3999,794.1689" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="158.7578" x="106.3999" y="737.8525">1. Increment configEpoch</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="157.9717" x="106.793" y="756.9727">2. Take over slots 0-5460</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="123.7168" x="123.9204" y="776.0928">3. Broadcast PONG</text><!--SRC=[bLJHRjem57tFLrpWOR0M5h9IjQX32caOLGVTWFO9gJBE1JmScyQ6YNtzRWAX89YcAG-HxNFFEJxt9WKxnnXXAPbGZba8jMG9Ys72-6AMw9MA0Yrr0gLEc3u7Y0YdR2LjHolRPyHGxA9SenMS5S-ZXk8tGltguD3WsmeLnnuQmsReIp5Jm55PJ1p72YiHXfAj4KA9t0gje0h1N6iZr0pw-0jwp6HOeYDXiMJAGd5RujV7gjpJnaB4BAiKWHamwObVXr9m4ru7jsVBl0EaTnwvLOLsXeopHPi2wWJtzzvPP7203FP8HscBeDS4s1cxp7KTWBj9QrVjWp3GyH- -tNsQjEWaCsg0wtY9H60rJ90M28eIsOeug298wHqdltErjRz-4m8c-KeogevGiarph1gk6nkuW8IfICTbzpBRg8pL1Gpy_YDyXBgRxknS9s8sjw2dEIVPoc1Vm8LodAQ-MbQjhbBsM4azMuh5m5GanXPEt7dlxhopxdRSrD8TKTr02aYExfUtefcbzVGI3bxzvr7tTH3-U0w7ex4glgJUfpJEyVPbf2OojzgukdQBfrJ1twWS9zSwaWtco1Tajrw3Bb6f3nRMf1Y1dLCBSQdvVAoy6kmRco2JSfDfZDNd6eGf1DPCYkX0ugXrntxyuD79lVuBTpflK0flEetmDX-tdpeHTfDvDkIDerXZLDYD7S6tSsR-Oz0eYGV54_h3qEV0jPgAMRYFOSGMUp_lVSY2Q2UQHPmauFjJ_wlp1m00]--></g></svg>