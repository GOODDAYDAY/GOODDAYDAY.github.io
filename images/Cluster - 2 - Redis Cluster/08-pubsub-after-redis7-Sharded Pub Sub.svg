<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="480px" preserveAspectRatio="none" style="width:747px;height:480px;background:#FEFEFE;" version="1.1" viewBox="0 0 747 480" width="747px" zoomAndPan="magnify"><title>After Redis 7.0: Sharded Pub/Sub (Precision Mailbox)</title><defs/><g><rect fill="#FEFEFE" height="480" style="stroke:none;stroke-width:1.0;" width="747" x="0" y="0"/><text fill="#000000" font-family="Arial" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="558.6582" x="89.9859" y="35.6357">After Redis 7.0: Sharded Pub/Sub (Precision Mailbox)</text><!--cluster cluster--><g id="cluster_cluster"><path d="M68.38,200.2979 L146.7355,200.2979 A3.75,3.75 0 0 1 149.2355,202.7979 L156.2355,220.0967 L575.38,220.0967 A2.5,2.5 0 0 1 577.88,222.5967 L577.88,322.7979 A2.5,2.5 0 0 1 575.38,325.2979 L68.38,325.2979 A2.5,2.5 0 0 1 65.88,322.7979 L65.88,202.7979 A2.5,2.5 0 0 1 68.38,200.2979 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="65.88" x2="156.2355" y1="220.0967" y2="220.0967"/><text fill="#000000" font-family="Arial" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="77.3555" x="69.88" y="213.5537">Redis Cluster</text></g><!--entity nodeA--><g id="elem_nodeA"><rect fill="#C8E6C9" height="61.3965" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="138.6816" x="246.38" y="240.2979"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="40.0254" x="256.38" y="261.5537">Node A</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="67.377" x="256.38" y="275.3525">Slots 0-5460</text><text fill="#000000" font-family="Arial" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="118.6816" x="256.38" y="289.1514">owns Channel: news</text></g><!--entity nodeB--><g id="elem_nodeB"><rect fill="#ECEFF1" height="47.5977" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="114.0723" x="420.88" y="246.7979"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="40.0254" x="430.88" y="268.0537">Node B</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="94.0723" x="430.88" y="281.8525">Slots 5461-10922</text></g><!--entity nodeC--><g id="elem_nodeC"><rect fill="#ECEFF1" height="47.5977" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="120.7461" x="90.38" y="246.7979"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="40.6875" x="100.38" y="268.0537">Node C</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="100.7461" x="100.38" y="281.8525">Slots 10923-16383</text></g><!--entity pubClient--><g id="elem_pubClient"><ellipse cx="315.9005" cy="65.2979" fill="#FFECB3" rx="8" ry="8" style="stroke:#1976D2;stroke-width:1.0;"/><path d="M315.9005,73.2979 L315.9005,100.2979 M302.9005,81.2979 L328.9005,81.2979 M315.9005,100.2979 L302.9005,115.2979 M315.9005,100.2979 L328.9005,115.2979 " fill="none" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="84.041" x="273.88" y="128.5537">Publisher Client</text></g><!--entity subClient1--><g id="elem_subClient1"><ellipse cx="143.0695" cy="405.2979" fill="#C8E6C9" rx="8" ry="8" style="stroke:#1976D2;stroke-width:1.0;"/><path d="M143.0695,413.2979 L143.0695,440.2979 M130.0695,421.2979 L156.0695,421.2979 M143.0695,440.2979 L130.0695,455.2979 M143.0695,440.2979 L156.0695,455.2979 " fill="none" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="101.3789" x="92.38" y="468.5537">Subscriber Client 1</text></g><!--entity subClient2--><g id="elem_subClient2"><ellipse cx="349.0695" cy="405.2979" fill="#C8E6C9" rx="8" ry="8" style="stroke:#1976D2;stroke-width:1.0;"/><path d="M349.0695,413.2979 L349.0695,440.2979 M336.0695,421.2979 L362.0695,421.2979 M349.0695,440.2979 L336.0695,455.2979 M349.0695,440.2979 L362.0695,455.2979 " fill="none" style="stroke:#1976D2;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="101.3789" x="298.38" y="468.5537">Subscriber Client 2</text></g><g id="elem_GMN5"><path d="M20.88,58.7979 L20.88,128.5928 A0,0 0 0 0 20.88,128.5928 L239.1534,128.5928 A0,0 0 0 0 239.1534,128.5928 L239.1534,97.7979 L273.66,93.7979 L239.1534,89.7979 L239.1534,68.7979 L229.1534,58.7979 L20.88,58.7979 A0,0 0 0 0 20.88,58.7979 " fill="#FFF9C4" style="stroke:#000000;stroke-width:1.0;"/><path d="M229.1534,58.7979 L229.1534,68.7979 L239.1534,68.7979 L229.1534,58.7979 " fill="#FFF9C4" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="70.6816" x="26.88" y="75.0537">Smart Client</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="197.2734" x="26.88" y="88.8525">Calculates: CRC16("news") % 16384</text><text fill="#000000" font-family="Arial" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="149.8203" x="26.88" y="106.4033">Slot 5234 -&gt; Node A</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="148.7402" x="26.88" y="121.0498">Connects directly to Node A</text></g><g id="elem_GMN17"><path d="M467.38,394.2979 L467.38,473.292 L684.8448,473.292 L684.8448,404.2979 L674.8448,394.2979 L467.38,394.2979 " fill="#E8F5E9" style="stroke:#000000;stroke-width:1.0;"/><path d="M674.8448,394.2979 L674.8448,404.2979 L684.8448,404.2979 L674.8448,394.2979 " fill="#E8F5E9" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="133.377" x="473.38" y="410.5537">Benefit: O(1) messages</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="182.6074" x="473.38" y="424.3525">Channel "news" is a Key with Slot!</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="188.1328" x="473.38" y="438.1514">All Pub/Sub happens on ONE node</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="3.334" x="473.38" y="451.9502">&#160;</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="196.4648" x="473.38" y="465.749">100 nodes = still just 1 node involved</text></g><g id="elem_GMN20"><path d="M604.88,245.2979 L604.88,296.6943 L740.63,296.6943 L740.63,255.2979 L730.63,245.2979 L604.88,245.2979 " fill="#ECEFF1" style="stroke:#000000;stroke-width:1.0;"/><path d="M730.63,245.2979 L730.63,255.2979 L740.63,255.2979 L730.63,245.2979 " fill="#ECEFF1" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="84.041" x="610.88" y="261.5537">Node B &amp; C are</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="104.707" x="610.88" y="275.3525">NOT involved at all!</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="114.75" x="610.88" y="289.1514">No broadcast needed</text></g><!--link pubClient to nodeA--><g id="link_pubClient_nodeA"><path d="M315.88,131.4879 C315.88,163.7579 315.88,204.1379 315.88,234.1279 " fill="none" id="pubClient-to-nodeA" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="315.88,240.1279,319.88,231.1279,315.88,235.1279,311.88,231.1279,315.88,240.1279" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="104.0449" x="316.88" y="173.5537">1. SPUBLISH news</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="25.3535" x="288.0671" y="229.8347">hello</text></g><!--link subClient1 to nodeA--><g id="link_subClient1_nodeA"><path d="M92.35,415.6079 C53.73,399.8979 11,375.2279 35.88,349.2979 C50.74,333.8079 208.78,348.8179 228.88,341.2979 C251.33,332.9079 268.0793,320.4485 283.8793,305.5885 " fill="none" id="subClient1-to-nodeA" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="288.25,301.4779,278.9536,304.73,284.6078,304.9034,284.4344,310.5576,288.25,301.4779" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="108.7031" x="36.88" y="361.5537">SSUBSCRIBE news</text></g><!--link nodeA to subClient1--><g id="link_nodeA_subClient1"><path d="M280.66,301.5479 C265.12,314.2479 246.43,328.9579 228.88,341.2979 C223.33,345.1979 221.06,344.9179 215.88,349.2979 C199.56,363.0979 187.494,376.0043 174.724,391.4443 " fill="none" id="nodeA-to-subClient1" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="170.9,396.0679,179.7183,391.6819,174.0867,392.2149,173.5536,386.5832,170.9,396.0679" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="85.3711" x="216.88" y="361.5537">2. deliver locally</text></g><!--link subClient2 to nodeA--><g id="link_subClient2_nodeA"><path d="M325.44,396.0579 C320.28,386.1279 315.55,375.1279 312.88,364.2979 C307.8,343.7079 308.0753,325.7187 310.1853,307.3487 " fill="none" id="subClient2-to-nodeA" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="310.87,301.3879,305.8691,309.8726,310.2994,306.3552,313.8169,310.7855,310.87,301.3879" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="108.7031" x="313.88" y="361.5537">SSUBSCRIBE news</text></g><!--link nodeA to subClient2--><g id="link_nodeA_subClient2"><path d="M347.4,301.4579 C363.13,315.0479 383.01,330.4979 402.88,341.2979 C412.76,346.6679 420.31,340.1779 426.88,349.2979 C441.61,369.7379 427.4855,387.0651 404.5155,402.7451 " fill="none" id="nodeA-to-subClient2" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="399.56,406.1279,409.2484,404.3574,403.6896,403.3089,404.7381,397.75,399.56,406.1279" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="85.3711" x="433.88" y="361.5537">2. deliver locally</text></g><!--link cluster to GMN17--><g id="link_cluster_GMN17"><path d="M571.8824,325.5238 C571.8898,325.7223 571.8973,325.9211 571.9047,326.1202 C572.0234,329.3045 572.1444,332.5503 572.2668,335.8342 C572.5117,342.402 572.7623,349.1225 573.0117,355.8105 C573.5106,369.1866 574.005,382.4329 574.44,394.0679 " fill="none" id="cluster-GMN17" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--link nodeB to GMN20--><g id="link_nodeB_GMN20"><path d="M486.72,246.5079 C498.12,219.2479 520.82,176.3979 556.38,157.7979 C603.07,133.3779 643.71,204.9279 662.23,245.2779 " fill="none" id="nodeB-GMN20" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--SRC=[VLDTRzem57tFhxYasWQHw4XeQK5Y4aaJhLg_HDQtlZY98LwDZMBJbatzxxkE2KqhDdW1ttEExxtdkADBkgAmveG9HpqoiIOLMK56yiTb9JUYY2IN5HmbiVcs40LTa0tNYHJwXg32h6A47wwdx3S5Ft1QLP9hLFtZ07x2ZtV5moH8BcnDLWMjTkV- -6nq4JYlRQ6Avfg89QSxiRdLgGIjm1yOh6OQgxE5nfCvBPY2i-F11DAIe7G1TvliQxh9e7k7KamnAU2QC9x9bvxZV87fT0eHPrHe1TrqHIhT_EtqJD6naxWemvagyGvRTe4eM6yo-m_tbyHHE6pGUA7AAvRjuU3N1DKGV3YApkDHDFut8tZF2FOCHqXDWTE51hbutqCoZavmJPxNdiJpy2WYFDzmegcQG3IF_57N5VHPkJtu1FveU6veKqYvr70Q34-W_mrkP85xDLmf1DgWe6363hu5BPig5GMOVjvskL762REwDHfFbXHSQykkL8-Lxs3Mr3UJNIlx84md2WRzqvFHu45uddmMg50Ix8HFmBJkURMIGC9ilvj3Qc6ZXbf-tn-CWs3F336DKPma_a5cr30DQTWtUnhkgT6U-jeCF-CS9xDXoktIpAhm2K8wkuvh6dHn59mShSljE3PdRpxsSVTsgWdunv3UtOTNb-dtUcXmIygvT9rMajhuDBqFqsX-6SOrt6d5vt-mNVzNCYSSNpPdJxJQWXHejUdDqen0wze91CSD5hXXykqXP70OQLESIQtbgbx6BX57yNbo6e_h58TKq0NJ4xZj-ZrOKQKmJihcsUuER8e1uqNW1zt2CzDb7UCEWemVpViloNfDCKFu_czlh1KEGlp1eFwjCFrACoJymZx0jrunyIJv4orQCQ_RhjYoh5_VnmpPmC5dY81Kr1pS_joh0D60itTg76IL94LEy391QT6-uoy0]--></g></svg>