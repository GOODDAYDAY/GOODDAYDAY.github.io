<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="421px" preserveAspectRatio="none" style="width:680px;height:421px;background:#FEFEFE;" version="1.1" viewBox="0 0 680 421" width="680px" zoomAndPan="magnify"><title>Hash Slot Distribution (16384 Slots)</title><defs/><g><rect fill="#FEFEFE" height="421" style="stroke:none;stroke-width:1.0;" width="680" x="0" y="0"/><text fill="#000000" font-family="Helvetica" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="372.8398" x="149.0801" y="40.2119">Hash Slot Distribution (16384 Slots)</text><!--cluster slots--><g id="cluster_slots"><rect fill="#E8EAF6" height="109" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="505" x="169" y="211.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="115.1719" x="363.9141" y="229.0898">16384 Hash Slots</text></g><!--entity slot1--><g id="elem_slot1"><rect fill="#FFCDD2" height="39.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="98.6064" x="212.5" y="257.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="78.6064" x="222.5" y="283.0898">Slots 0-5460</text></g><!--entity slot2--><g id="elem_slot2"><rect fill="#C8E6C9" height="39.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="129.751" x="347" y="257.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="109.751" x="357" y="283.0898">Slots 5461-10922</text></g><!--entity slot3--><g id="elem_slot3"><rect fill="#BBDEFB" height="39.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="137.5371" x="512" y="257.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="117.5371" x="522" y="283.0898">Slots 10923-16383</text></g><!--entity nodeA--><g id="elem_nodeA"><path d="M228.5,366.0459 C228.5,356.0459 261.8481,356.0459 261.8481,356.0459 C261.8481,356.0459 295.1963,356.0459 295.1963,366.0459 L295.1963,394.166 C295.1963,404.166 261.8481,404.166 261.8481,404.166 C261.8481,404.166 228.5,404.166 228.5,394.166 L228.5,366.0459 " fill="#FFCDD2" style="stroke:#000000;stroke-width:1.0;"/><path d="M228.5,366.0459 C228.5,376.0459 261.8481,376.0459 261.8481,376.0459 C261.8481,376.0459 295.1963,376.0459 295.1963,366.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="46.6963" x="238.5" y="396.0898">Node A</text></g><!--entity nodeB--><g id="elem_nodeB"><path d="M378.5,366.0459 C378.5,356.0459 411.8481,356.0459 411.8481,356.0459 C411.8481,356.0459 445.1963,356.0459 445.1963,366.0459 L445.1963,394.166 C445.1963,404.166 411.8481,404.166 411.8481,404.166 C411.8481,404.166 378.5,404.166 378.5,394.166 L378.5,366.0459 " fill="#C8E6C9" style="stroke:#000000;stroke-width:1.0;"/><path d="M378.5,366.0459 C378.5,376.0459 411.8481,376.0459 411.8481,376.0459 C411.8481,376.0459 445.1963,376.0459 445.1963,366.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="46.6963" x="388.5" y="396.0898">Node B</text></g><!--entity nodeC--><g id="elem_nodeC"><path d="M547.5,366.0459 C547.5,356.0459 581.2344,356.0459 581.2344,356.0459 C581.2344,356.0459 614.9688,356.0459 614.9688,366.0459 L614.9688,394.166 C614.9688,404.166 581.2344,404.166 581.2344,404.166 C581.2344,404.166 547.5,404.166 547.5,394.166 L547.5,366.0459 " fill="#BBDEFB" style="stroke:#000000;stroke-width:1.0;"/><path d="M547.5,366.0459 C547.5,376.0459 581.2344,376.0459 581.2344,376.0459 C581.2344,376.0459 614.9688,376.0459 614.9688,366.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="47.4688" x="557.5" y="396.0898">Node C</text></g><g id="elem_GMN12"><path d="M11,62.0459 L11,186.7666 L343.2813,186.7666 L343.2813,72.0459 L333.2813,62.0459 L11,62.0459 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M333.2813,62.0459 L333.2813,72.0459 L343.2813,72.0459 L333.2813,62.0459 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59.8896" x="17" y="83.0898">Formula:</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="188.6992" x="80.7793" y="83.0898">slot = CRC16(key) mod 16384</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="17" y="102.21">&#160;</text><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="80.9238" x="17" y="121.3301">Why 16384?</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="308.5537" x="17" y="140.4502">- Gossip message: 16384 bits = 2KB (acceptable)</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="311.2813" x="17" y="159.5703">- Max around 1000 nodes, 16 slots/node minimum</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="146.2686" x="17" y="178.6904">- Fits in CPU cache line</text></g><!--link slot1 to nodeA--><g id="link_slot1_nodeA"><path d="M262,296.1659 C262,312.9859 262,331.8159 262,349.9159 " fill="none" id="slot1-to-nodeA" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="262,355.9159,266,346.9159,262,350.9159,258,346.9159,262,355.9159" style="stroke:#000000;stroke-width:1.0;"/></g><!--link slot2 to nodeB--><g id="link_slot2_nodeB"><path d="M412,296.1659 C412,312.9859 412,331.8159 412,349.9159 " fill="none" id="slot2-to-nodeB" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="412,355.9159,416,346.9159,412,350.9159,408,346.9159,412,355.9159" style="stroke:#000000;stroke-width:1.0;"/></g><!--link slot3 to nodeC--><g id="link_slot3_nodeC"><path d="M581,296.1659 C581,312.9859 581,331.8159 581,349.9159 " fill="none" id="slot3-to-nodeC" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="581,355.9159,585,346.9159,581,350.9159,577,346.9159,581,355.9159" style="stroke:#000000;stroke-width:1.0;"/></g><!--link GMN12 to slots--><g id="link_GMN12_slots"><path d="M177,187.4259 C177,192.4284 177,197.5115 177,202.5824 C177,205.1178 177,207.6502 177,210.1679 C177,210.3252 177,210.4825 177,210.6398 " fill="none" id="GMN12-slots" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--SRC=[RP9HQzim4CVVzIbkoKi2DRMTpAIbpOWLUuNHCbR6di_sDH6n9MF9sxhHxrvP0X5Ax1VfxlU_k__PdyoHEeA-HI6PFWdPuu0TL5YV3eCQPSDLgmQObyNqdX4DlU3Ocb99yuIsmko1sjzaH8spozIp-4UGh1apmhG43wYFyDmg0tkXpI2gqGWbOP5agytQ9VIIiO5gW_9W-PbF19cU0MhGqmdcnQRObHdyPs2VCuq38Ou-hxCuy8brK_BzFhrCMpQ9alWcJOCYXJdV51c_kQoOu5KqpRSAaXNCytnVb3bxOwn1WnLgAtXI3S7EKT8UTs6K3qWUa3pq_e3mWF3GYtb_KQF-o6ZhMp3lu3oMCp_YUOmp9fKXCAe7zU8NQ-tULTjI3TtOuktTTRLrSRW7_eCdsU94hqleL0Fksp2F_pg- -lkNIM1Z4NnLMeiUEj8Q3tJhqr09kxjxIB_biC2wfjxQQsdf58_u5z3zVtQxSUmcr5TMw0UxdkxG2IcwiNE2SYec9F3lFw76-aZG2acCR8795di7]--></g></svg>