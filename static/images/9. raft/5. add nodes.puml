@startuml
!theme plain

skinparam rectangle {
    BackgroundColor LightYellow
    BorderColor Red
}

skinparam node {
    BackgroundColor LightBlue
    BorderColor Black
}

rectangle "raft" {
    node "Node1 [Leader]" as N1 {
        artifact "Log=[\n  x=1, \n]" as N1_1
        artifact "Term=1" as N1_2
        artifact "CommitIndex=1" as N1_3
        artifact "ApplyIndex=1" as N1_4
        artifact "State={\n   x: 1, \n}" as N1_5
    }
    N1_1 -D- N1_2
    N1_2 -D- N1_3
    N1_3 -D- N1_4
    N1_4 -D- N1_5

    node "Node2 [Follower]" as N2 {
        artifact "Log=[\n  x=1, \n]" as N2_1
        artifact "Term=1" as N2_2
        artifact "CommitIndex=1" as N2_3
        artifact "ApplyIndex=1" as N2_4
        artifact "State={\n   x: 1, \n}" as N2_5
    }
    N2_1 -D- N2_2
    N2_2 -D- N2_3
    N2_3 -D- N2_4
    N2_4 -D- N2_5

    node "Node3 [Follower]" as N3 {
        artifact "Log=[\n  x=1, \n]" as N3_1
        artifact "Term=1" as N3_2
        artifact "CommitIndex=1" as N3_3
        artifact "ApplyIndex=1" as N3_4
        artifact "State={\n   x: 1, \n}" as N3_5
    }
    N3_1 -D- N3_2
    N3_2 -D- N3_3
    N3_3 -D- N3_4
    N3_4 -D- N3_5

    node "Node4 [Follower]" as N4 {
        artifact "Log=[\n  x=1, \n]" as N4_1
        artifact "Term=1" as N4_2
        artifact "CommitIndex=1" as N4_3
        artifact "ApplyIndex=1" as N4_4
        artifact "State={\n   x: 1, \n}" as N4_5
    }
    N4_1 -D- N4_2
    N4_2 -D- N4_3
    N4_3 -D- N4_4
    N4_4 -D- N4_5

    node "Node5 [Follower]" as N5 {
        artifact "Log=[\n  x=1, \n]" as N5_1
        artifact "Term=1" as N5_2
        artifact "CommitIndex=1" as N5_3
        artifact "ApplyIndex=1" as N5_4
        artifact "State={\n   x: 1, \n}" as N5_5
    }
    N5_1 -D- N5_2
    N5_2 -D- N5_3
    N5_3 -D- N5_4
    N5_4 -D- N5_5
}

N1 -D-> N2 : rpc sync
N1 -D-> N3 : rpc sync
N1 -D-> N4 : join & rpc sync
N1 -D-> N5 : join & rpc sync

@enduml
