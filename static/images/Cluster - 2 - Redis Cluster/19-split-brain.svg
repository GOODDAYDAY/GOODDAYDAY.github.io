<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="527px" preserveAspectRatio="none" style="width:1394px;height:527px;background:#FEFEFE;" version="1.1" viewBox="0 0 1394 527" width="1394px" zoomAndPan="magnify"><title>Split Brain Scenario</title><defs/><g><rect fill="#FEFEFE" height="527" style="stroke:none;stroke-width:1.0;" width="1394" x="0" y="0"/><text fill="#000000" font-family="Helvetica" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="209.0537" x="587.9731" y="40.2119">Split Brain Scenario</text><!--cluster before--><g id="cluster_before"><rect fill="#E8F5E9" height="394.5" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="368" x="12" y="105.0459"/><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="97.5127" x="147.2437" y="121.9438">Before Partition</text></g><!--cluster normal--><g id="cluster_normal"><rect fill="#FFFFFF" height="326.5" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="320" x="36" y="149.0459"/><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="93.1899" x="149.405" y="165.9438">Normal Cluster</text></g><!--cluster after--><g id="cluster_after"><rect fill="#FFEBEE" height="233" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="816" x="572" y="63.0459"/><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141.5718" x="909.2141" y="79.9438">After Network Partition</text></g><!--cluster p1--><g id="cluster_p1"><rect fill="#FFF9C4" height="149" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="207" x="1149" y="115.0459"/><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="63.5654" x="1220.7173" y="131.9438">Partition 1</text><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="59.2109" x="1222.8945" y="149.6982">(Minority)</text></g><!--cluster p2--><g id="cluster_p2"><rect fill="#E3F2FD" height="149" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="513" x="612" y="115.0459"/><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="63.5654" x="836.7173" y="131.9438">Partition 2</text><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="58.5" x="839.25" y="149.6982">(Majority)</text></g><!--entity masterA1--><g id="elem_masterA1"><path d="M52,195.0459 C52,185.0459 88.0063,185.0459 88.0063,185.0459 C88.0063,185.0459 124.0127,185.0459 124.0127,195.0459 L124.0127,221.8003 C124.0127,231.8003 88.0063,231.8003 88.0063,231.8003 C88.0063,231.8003 52,231.8003 52,221.8003 L52,195.0459 " fill="#FFCDD2" style="stroke:#000000;stroke-width:1.0;"/><path d="M52,195.0459 C52,205.0459 88.0063,205.0459 88.0063,205.0459 C88.0063,205.0459 124.0127,205.0459 124.0127,195.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="52.0127" x="62" y="223.9438">Master A</text></g><!--entity masterB1--><g id="elem_masterB1"><path d="M159,195.0459 C159,185.0459 195.0063,185.0459 195.0063,185.0459 C195.0063,185.0459 231.0127,185.0459 231.0127,195.0459 L231.0127,221.8003 C231.0127,231.8003 195.0063,231.8003 195.0063,231.8003 C195.0063,231.8003 159,231.8003 159,221.8003 L159,195.0459 " fill="#FFCDD2" style="stroke:#000000;stroke-width:1.0;"/><path d="M159,195.0459 C159,205.0459 195.0063,205.0459 195.0063,205.0459 C195.0063,205.0459 231.0127,205.0459 231.0127,195.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="52.0127" x="169" y="223.9438">Master B</text></g><!--entity masterC1--><g id="elem_masterC1"><path d="M266.5,195.0459 C266.5,185.0459 302.865,185.0459 302.865,185.0459 C302.865,185.0459 339.23,185.0459 339.23,195.0459 L339.23,221.8003 C339.23,231.8003 302.865,231.8003 302.865,231.8003 C302.865,231.8003 266.5,231.8003 266.5,221.8003 L266.5,195.0459 " fill="#FFCDD2" style="stroke:#000000;stroke-width:1.0;"/><path d="M266.5,195.0459 C266.5,205.0459 302.865,205.0459 302.865,205.0459 C302.865,205.0459 339.23,205.0459 339.23,195.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="52.73" x="276.5" y="223.9438">Master C</text></g><!--entity slaveA1_1--><g id="elem_slaveA1_1"><path d="M52,422.5459 C52,412.5459 88.0159,412.5459 88.0159,412.5459 C88.0159,412.5459 124.0317,412.5459 124.0317,422.5459 L124.0317,449.3003 C124.0317,459.3003 88.0159,459.3003 88.0159,459.3003 C88.0159,459.3003 52,459.3003 52,449.3003 L52,422.5459 " fill="#C8E6C9" style="stroke:#000000;stroke-width:1.0;"/><path d="M52,422.5459 C52,432.5459 88.0159,432.5459 88.0159,432.5459 C88.0159,432.5459 124.0317,432.5459 124.0317,422.5459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="52.0317" x="62" y="451.4438">Slave A1</text></g><!--entity masterA2--><g id="elem_masterA2"><path d="M1268,195.0459 C1268,185.0459 1304.0063,185.0459 1304.0063,185.0459 C1304.0063,185.0459 1340.0127,185.0459 1340.0127,195.0459 L1340.0127,221.8003 C1340.0127,231.8003 1304.0063,231.8003 1304.0063,231.8003 C1304.0063,231.8003 1268,231.8003 1268,221.8003 L1268,195.0459 " fill="#FFCDD2" style="stroke:#000000;stroke-width:1.0;"/><path d="M1268,195.0459 C1268,205.0459 1304.0063,205.0459 1304.0063,205.0459 C1304.0063,205.0459 1340.0127,205.0459 1340.0127,195.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="52.0127" x="1278" y="223.9438">Master A</text></g><!--entity client1--><g id="elem_client1"><ellipse cx="1182.1182" cy="178.0459" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M1182.1182,186.0459 L1182.1182,213.0459 M1169.1182,194.0459 L1195.1182,194.0459 M1182.1182,213.0459 L1169.1182,228.0459 M1182.1182,213.0459 L1195.1182,228.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="33.2363" x="1165.5" y="244.9438">Client</text></g><!--entity masterB2--><g id="elem_masterB2"><path d="M737,195.0459 C737,185.0459 773.0063,185.0459 773.0063,185.0459 C773.0063,185.0459 809.0127,185.0459 809.0127,195.0459 L809.0127,221.8003 C809.0127,231.8003 773.0063,231.8003 773.0063,231.8003 C773.0063,231.8003 737,231.8003 737,221.8003 L737,195.0459 " fill="#FFCDD2" style="stroke:#000000;stroke-width:1.0;"/><path d="M737,195.0459 C737,205.0459 773.0063,205.0459 773.0063,205.0459 C773.0063,205.0459 809.0127,205.0459 809.0127,195.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="52.0127" x="747" y="223.9438">Master B</text></g><!--entity masterC2--><g id="elem_masterC2"><path d="M628.5,195.0459 C628.5,185.0459 664.865,185.0459 664.865,185.0459 C664.865,185.0459 701.23,185.0459 701.23,195.0459 L701.23,221.8003 C701.23,231.8003 664.865,231.8003 664.865,231.8003 C664.865,231.8003 628.5,231.8003 628.5,221.8003 L628.5,195.0459 " fill="#FFCDD2" style="stroke:#000000;stroke-width:1.0;"/><path d="M628.5,195.0459 C628.5,205.0459 664.865,205.0459 664.865,205.0459 C664.865,205.0459 701.23,205.0459 701.23,195.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="52.73" x="638.5" y="223.9438">Master C</text></g><!--entity slaveA1_2--><g id="elem_slaveA1_2"><path d="M947,186.0459 C947,176.0459 1027.8049,176.0459 1027.8049,176.0459 C1027.8049,176.0459 1108.6099,176.0459 1108.6099,186.0459 L1108.6099,230.5547 C1108.6099,240.5547 1027.8049,240.5547 1027.8049,240.5547 C1027.8049,240.5547 947,240.5547 947,230.5547 L947,186.0459 " fill="#C8E6C9" style="stroke:#000000;stroke-width:1.0;"/><path d="M947,186.0459 C947,196.0459 1027.8049,196.0459 1027.8049,196.0459 C1027.8049,196.0459 1108.6099,196.0459 1108.6099,186.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="52.0317" x="957" y="214.9438">Slave A1</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="52.749" x="957" y="232.6982">becomes</text><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="85.249" x="1013.3608" y="232.6982">New Master A</text></g><!--entity client2--><g id="elem_client2"><ellipse cx="861.1182" cy="178.0459" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M861.1182,186.0459 L861.1182,213.0459 M848.1182,194.0459 L874.1182,194.0459 M861.1182,213.0459 L848.1182,228.0459 M861.1182,213.0459 L874.1182,228.0459 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="33.2363" x="844.5" y="244.9438">Client</text></g><g id="elem_GMN22"><path d="M396,351.0459 L396,520.8354 L764.3755,520.8354 L764.3755,361.0459 L754.3755,351.0459 L396,351.0459 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M754.3755,351.0459 L754.3755,361.0459 L764.3755,361.0459 L754.3755,351.0459 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#FF0000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="220.9937" x="402" y="370.9438">TWO MASTERS FOR SAME SLOTS!</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="402" y="388.6982">&#160;</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="347.3755" x="402" y="406.4526">Partition 1: Client writes SET key1 "value_A" to old Master A</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="315.5864" x="402" y="424.207">Partition 2: New Master A accepts SET key1 "value_B"</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="3.6118" x="402" y="441.9614">&#160;</text><text fill="#000000" font-family="Helvetica" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="127.1245" x="402" y="459.7158">After partition heals:</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="218.207" x="402" y="477.4702">- Old Master A has lower configEpoch</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="278.8652" x="402" y="495.2246">- Old Master A demoted, syncs from new master</text><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="4.3291" x="402" y="512.979">-</text><text fill="#FF0000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="241.0269" x="409.9409" y="512.979">"value_A" is LOST, replaced by "value_B"</text></g><!--link masterA1 to masterB1--><g id="link_masterA1_masterB1"><path d="M130.36,208.5459 C141.86,208.5459 141.36,208.5459 152.85,208.5459 " fill="none" id="masterA1-masterB1" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="124.36,208.5459,133.36,212.5459,129.36,208.5459,133.36,204.5459,124.36,208.5459" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="158.85,208.5459,149.85,204.5459,153.85,208.5459,149.85,212.5459,158.85,208.5459" style="stroke:#000000;stroke-width:1.0;"/></g><!--link masterB1 to masterC1--><g id="link_masterB1_masterC1"><path d="M237.28,208.5459 C248.95,208.5459 248.63,208.5459 260.3,208.5459 " fill="none" id="masterB1-masterC1" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="231.28,208.5459,240.28,212.5459,236.28,208.5459,240.28,204.5459,231.28,208.5459" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="266.3,208.5459,257.3,204.5459,261.3,208.5459,257.3,212.5459,266.3,208.5459" style="stroke:#000000;stroke-width:1.0;"/></g><!--link masterA1 to slaveA1_1--><g id="link_masterA1_slaveA1_1"><path d="M88,232.4059 C88,275.7459 88,363.3359 88,406.4559 " fill="none" id="masterA1-to-slaveA1_1" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="88,412.4559,92,403.4559,88,407.4559,84,403.4559,88,412.4559" style="stroke:#000000;stroke-width:1.0;"/></g><!--link client1 to masterA2--><g id="link_client1_masterA2"><path d="M1198.71,208.5459 C1216.46,208.5459 1239.07,208.5459 1261.98,208.5459 " fill="none" id="client1-to-masterA2" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="1267.98,208.5459,1258.98,204.5459,1262.98,208.5459,1258.98,212.5459,1267.98,208.5459" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="33.9473" x="1216.75" y="202.4438">writes</text></g><!--link client2 to slaveA1_2--><g id="link_client2_slaveA1_2"><path d="M877.62,208.5459 C894.12,208.5459 914.68,208.5459 940.92,208.5459 " fill="none" id="client2-to-slaveA1_2" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="946.92,208.5459,937.92,204.5459,941.92,208.5459,937.92,212.5459,946.92,208.5459" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="13" lengthAdjust="spacing" textLength="33.9473" x="895.75" y="202.4438">writes</text></g><!--link after to GMN22--><g id="link_after_GMN22"><path d="M580,296.4986 C580,296.7437 580,296.989 580,297.2345 C580,299.1983 580,301.1728 580,303.1554 C580,319.0165 580,335.3984 580,350.9959 " fill="none" id="after-GMN22" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--SRC=[bLHHRvim47xdLrpfooOrgg3Rr4PH9A2WFJJ9L2BjfL9bp2NnOcnad4PPrV- -0pfAcZNAZ8ImxplVTzzzuioki40e9HFAgTP2bSom0ZB6rqkZDogFjDG6pfEuVdg871Ti8ssYbPqoki7zZl89hU3C_JSg5RyHl2l7iS9AXBIKma9eg2wa71KpGZkEGMwPMbBS3N6X3S8FPYX1QEK2go1h3y_Zw-HhV0FF3j3g9KsrAPY4I6ugYwP9KUrH2wrNpYpBM4Ne2QjH43Iueja47lMQHBUt_iVui8SFJy17FNnq39zAzeGGU0s-gZU1zqW9qNNyBRff4bwQTyTrD31YkRA3SKUd5myFuv6tdp_8zLPHj2lclEmD8LZK3KpHRhLPlvi5QsBKJHp6yU4eEZ1u3-hJHD0SXDrzRbBBHeNa9lfoybpy0zqOj-HCDv82bMsWlFdqEiJh7hhswPOXR8a7LgzgVipQhrcpNttMn26-IlpazXZhFNVu_-aE_mHtFAWCkIwmWb4sdk8M_ierkip6UzRnzwnpJ3F_dMO-z4nn81h9fhH5oBIrkW2zQBr0qH6lVnT3W_cOoCr_pc0IfFFuFeLaTWzfC8aXlPlDqxEQw-YoGO_h8VJSCeIMtcjDIECvh77dWVl4v0OVoHPMWvPvr_XUlZ-4lYZKCiVI7buJkdLTOjbwlEmkM26JrR0cIF41p7g5O4MAIRsbRwxLGYpZKlFL8Ip7WlJ9Bw3QALx1mf1AYaYrKsxmFQNU-X8LtCtI-GKvalx877F8TczyExrGvL0FmFa3]--></g></svg>