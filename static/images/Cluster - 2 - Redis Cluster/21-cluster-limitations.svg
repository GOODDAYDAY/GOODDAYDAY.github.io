<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="486px" preserveAspectRatio="none" style="width:1802px;height:486px;background:#FEFEFE;" version="1.1" viewBox="0 0 1802 486" width="1802px" zoomAndPan="magnify"><title>Redis Cluster Limitations</title><defs/><g><rect fill="#FEFEFE" height="486" style="stroke:none;stroke-width:1.0;" width="1802" x="0" y="0"/><text fill="#000000" font-family="Helvetica" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="265.2676" x="763.8662" y="40.2119">Redis Cluster Limitations</text><!--cluster multiKey--><g id="cluster_multiKey"><rect fill="#FFEBEE" height="128" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="480" x="12" y="165.7859"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="140.793" x="181.6035" y="183.8298">Multi-Key Operations</text></g><!--cluster tx--><g id="cluster_tx"><rect fill="#FFEBEE" height="166" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="410" x="532" y="146.7859"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="87.1377" x="693.4312" y="164.8298">Transactions</text></g><!--cluster lua--><g id="cluster_lua"><rect fill="#FFEBEE" height="128" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="420" x="982" y="165.7859"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="76.2412" x="1153.8794" y="183.8298">Lua Scripts</text></g><!--cluster db--><g id="cluster_db"><rect fill="#FFEBEE" height="128" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="354" x="1442" y="165.7859"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="128.3857" x="1554.8071" y="183.8298">Database Selection</text></g><!--cluster solution--><g id="cluster_solution"><rect fill="#E8F5E9" height="128" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="247" x="532" y="352.7859"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="135.3379" x="587.8311" y="370.8298">Solution: Hash Tags</text></g><!--entity mget--><g id="elem_mget"><rect fill="#FFFFFF" height="39.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="188.8408" x="278.5" y="221.2859"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="168.8408" x="288.5" y="247.3298">MGET user:1 user:2 user:3</text></g><!--entity error1--><g id="elem_error1"><rect fill="#FFFFFF" height="58.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="188.0889" x="55" y="211.7859"/><text fill="#FF0000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="125.2412" x="65" y="237.8298">CROSSSLOT Error!</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="168.0889" x="65" y="256.95">Keys hash to different slots</text></g><!--entity txCmd--><g id="elem_txCmd"><rect fill="#FFFFFF" height="96.4805" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="126.6064" x="790.5" y="192.7859"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="42" x="800.5" y="218.8298">MULTI</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="106.6064" x="800.5" y="237.95">SET order:123 ...</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="101.1582" x="800.5" y="257.0701">SET user:456 ...</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="38.124" x="800.5" y="276.1902">EXEC</text></g><!--entity error2--><g id="elem_error2"><rect fill="#FFFFFF" height="58.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="179.5166" x="575" y="211.7859"/><text fill="#FF0000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="142.3789" x="585" y="237.8298">Cross-slot transactions</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="159.5166" x="585" y="256.95">are IMPOSSIBLE&lt;/color&gt;</text></g><!--entity luaCmd--><g id="elem_luaCmd"><rect fill="#FFFFFF" height="58.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="171.5049" x="1206" y="211.7859"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="151.5049" x="1216" y="237.8298">redis.call('SET','key1',...)</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="151.5049" x="1216" y="256.95">redis.call('SET','key2',...)</text></g><!--entity error3--><g id="elem_error3"><rect fill="#FFFFFF" height="58.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="145.2822" x="1025.5" y="211.7859"/><text fill="#FF0000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="101.9238" x="1035.5" y="237.8298">All keys must be</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="125.2822" x="1035.5" y="256.95">in same slot&lt;/color&gt;</text></g><!--entity dbCmd--><g id="elem_dbCmd"><rect fill="#FFFFFF" height="39.1201" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="86.1377" x="1686" y="221.2859"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="66.1377" x="1696" y="247.3298">SELECT 1</text></g><!--entity error4--><g id="elem_error4"><rect fill="#FFFFFF" height="58.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="165.5166" x="1485" y="211.7859"/><text fill="#FF0000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="115.165" x="1495" y="237.8298">Only DB 0 allowed</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="145.5166" x="1495" y="256.95">in cluster mode&lt;/color&gt;</text></g><!--entity hashTag--><g id="elem_hashTag"><rect fill="#FFFFFF" height="58.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="180.3438" x="575" y="398.7859"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="160.3438" x="585" y="424.8298">{user}:1, {user}:2, {user}:3</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="118.2754" x="585" y="443.95">All go to same slot!</text></g><!--link multiKey to tx--><!--link tx to lua--><!--link lua to db--><!--link multiKey to solution--><g id="link_multiKey_solution"><path d="M21.4697,293.7886 C21.5019,293.9372 21.5345,294.0859 21.5674,294.2346 C21.6333,294.5319 21.7004,294.8291 21.7689,295.1261 C21.9058,295.7203 22.0481,296.3139 22.1958,296.9066 C22.7867,299.2776 23.4653,301.6347 24.2425,303.9568 C27.3513,313.2453 32.0375,321.9734 39,328.7859 C79.225,368.1459 202.84,392.5709 317.2063,407.1934 C374.3894,414.5046 429.2603,419.3653 470.2392,422.4168 C490.7287,423.9426 507.7451,425.0161 519.8411,425.7176 C522.8651,425.8929 525.5815,426.045 527.9678,426.1752 C529.161,426.2402 524.28,425.983 525.3052,426.0372 " fill="none" id="multiKey-to-solution" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="531.2969,426.354,522.5206,421.8843,526.3038,426.09,522.0982,429.8732,531.2969,426.354" style="stroke:#000000;stroke-width:1.0;"/></g><!--link tx to solution--><g id="link_tx_solution"><path d="M540,313.4717 C540,314.8402 540,316.2152 540,317.5952 C540,323.1154 540,328.7176 540,334.3196 C540,339.9217 540,345.5235 540,351.043 C540,351.388 540,351.7326 540,352.0769 C540,352.2491 540,346.4212 540,346.5931 " fill="none" id="tx-to-solution" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="540,352.5931,544,343.5931,540,347.5931,536,343.5931,540,352.5931" style="stroke:#000000;stroke-width:1.0;"/></g><!--link lua to solution--><g id="link_lua_solution"><path d="M981.8396,265.9613 C981.6236,266.4932 981.403,267.0303 981.1778,267.5721 C980.7275,268.6558 980.2589,269.7586 979.7717,270.8775 C978.7972,273.1152 977.7486,275.4171 976.6238,277.7584 C967.625,296.4884 953.75,317.7359 934,328.7859 C915.81,338.9559 575.04,323.4859 559,336.7859 C555.1275,339.9959 551.9203,343.7786 549.2733,347.9443 C548.6116,348.9858 547.9849,350.0512 547.3915,351.1375 C547.0948,351.6807 549.5172,346.8764 549.237,347.4297 " fill="none" id="lua-to-solution" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="546.5263,352.7825,554.1608,346.5604,548.7852,348.3218,547.0238,342.9462,546.5263,352.7825" style="stroke:#000000;stroke-width:1.0;"/></g><!--SRC=[VPDTRzem58RlyojEuO9D0ZO-EcseGXgfMT7ICJMPD6dPXOaFmSAnaMtQiQh_VNO2b45BSX7dVELzx3SNTe45mafGBWEpv795DIrWHhDbhjLQib09fQ4-9lu-g60ufsjXnqhQRzHDgDsWk4VBCrfxkIhcVn4w_I2mt0g4EsJSG2ZMngA6Y1VSKikLD46WCRDKvgweTkkQUUihRc2wGbqLr80QA7p2n-lZCHaH0ey1kEkmzGj9O6rG3phLerizUbL_ZlQuuohph0EDR1ZUJUCuZgO94AsLlhXwL-Q6gNJVDB2WPW5M0UFpEMgK5enGjbA6lg4JFFt7aMWg3SsUzTi_PvJ_Y999AcEdNsdc0RezQBVRLQY4w5z-g2Ba9mct0yE2dIFIofYMbmdsG4mggKQOt7vtl9DHH7QWpoZT8vHeJI7ED5zjUOLxVnL5-rDkPrI8Dmqdlj5iB77JQJITzhUfV37RhRAxsUUfFWi1ItyYXVCHp32LN8BnVlIafp2z8vXhQkcC6eGO1POxKjQosUj8COb8c41dMtXUtrIA3LoFu3quIFM0h1IORLrVA8Qd6lj76cCbrbxP06wyxHAQLnjljd6eau_ZI_BfLEgZzyhJeDE4xQgxN_LIwVSkLzx6-msxA0TxTxklU1dxtwprQy4PG_bRytnXMqFdjy1v-2JiJYpmZZX9iDdXDAOUf0lk4CfHnx5op77m7m00]--></g></svg>