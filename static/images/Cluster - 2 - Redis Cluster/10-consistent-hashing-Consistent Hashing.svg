<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="371px" preserveAspectRatio="none" style="width:1643px;height:371px;background:#FEFEFE;" version="1.1" viewBox="0 0 1643 371" width="1643px" zoomAndPan="magnify"><title>Consistent Hashing: Hash Ring (0 ~ 2^32)</title><defs/><g><rect fill="#FEFEFE" height="371" style="stroke:none;stroke-width:1.0;" width="1643" x="0" y="0"/><text fill="#000000" font-family="Arial" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="436.4229" x="599.1187" y="35.6357">Consistent Hashing: Hash Ring (0 ~ 2^32)</text><!--cluster ring--><g id="cluster_ring"><path d="M13.5,100.8079 L73.8379,100.8079 A3.75,3.75 0 0 1 76.3379,103.3079 L83.3379,120.6067 L727.5,120.6067 A2.5,2.5 0 0 1 730,123.1067 L730,357.3079 A2.5,2.5 0 0 1 727.5,359.8079 L13.5,359.8079 A2.5,2.5 0 0 1 11,357.3079 L11,103.3079 A2.5,2.5 0 0 1 13.5,100.8079 " fill="#E3F2FD" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="11" x2="83.3379" y1="120.6067" y2="120.6067"/><text fill="#000000" font-family="Arial" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="59.3379" x="15" y="114.0637">Hash Ring</text></g><!--cluster addNode--><g id="cluster_addNode"><path d="M918.5,100.8079 L1080.1699,100.8079 A3.75,3.75 0 0 1 1082.6699,103.3079 L1089.6699,120.6067 L1326.5,120.6067 A2.5,2.5 0 0 1 1329,123.1067 L1329,350.3079 A2.5,2.5 0 0 1 1326.5,352.8079 L918.5,352.8079 A2.5,2.5 0 0 1 916,350.3079 L916,103.3079 A2.5,2.5 0 0 1 918.5,100.8079 " fill="#E8F5E9" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="916" x2="1089.6699" y1="120.6067" y2="120.6067"/><text fill="#000000" font-family="Arial" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="160.6699" x="920" y="114.0637">Add Node D (position: 6000)</text></g><!--entity ringLabel--><g id="elem_ringLabel"><rect fill="#BBDEFB" height="19.7988" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="313.3496" x="392.5" y="147.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="293.3496" x="402.5" y="162.0637">Ring: 0 &#37433;&#65533;&#37433;&#65533;&#37433;&#65533;&#37433;&#65533;&#37433;&#65533;&#37433;&#65533;&#37433;&#65533;&#37433;&#65533;&#37433;&#65533;&#37433;&#65533;&#37433;&#65533;&#37433;&#65533;&gt; 2^32</text></g><!--entity nodeA--><g id="elem_nodeA"><rect fill="#C8E6C9" height="47.5977" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="102.7168" x="330.5" y="287.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="40.0254" x="340.5" y="309.0637">Node A</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="82.7168" x="340.5" y="322.8625">(position: 1000)</text></g><!--entity nodeB--><g id="elem_nodeB"><rect fill="#C8E6C9" height="47.5977" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="102.7168" x="192.5" y="287.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="40.0254" x="202.5" y="309.0637">Node B</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="82.7168" x="202.5" y="322.8625">(position: 5000)</text></g><!--entity nodeC--><g id="elem_nodeC"><rect fill="#C8E6C9" height="47.5977" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="102.7168" x="54.5" y="287.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="40.6875" x="64.5" y="309.0637">Node C</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="82.7168" x="64.5" y="322.8625">(position: 9000)</text></g><!--entity key1--><g id="elem_key1"><rect fill="#FFF9C4" height="33.5977" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="73.0508" x="284.5" y="140.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="27.3516" x="294.5" y="155.0637">Key1</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="53.0508" x="294.5" y="168.8625">hash=800</text></g><!--entity key2--><g id="elem_key2"><rect fill="#FFF9C4" height="33.5977" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="79.7246" x="169" y="140.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="27.3516" x="179" y="155.0637">Key2</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="59.7246" x="179" y="168.8625">hash=3000</text></g><!--entity key3--><g id="elem_key3"><rect fill="#FFF9C4" height="33.5977" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="79.7246" x="54" y="140.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="27.3516" x="64" y="155.0637">Key3</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="59.7246" x="64" y="168.8625">hash=7000</text></g><!--entity nodeA2--><g id="elem_nodeA2"><rect fill="#C8E6C9" height="33.7988" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="98.0469" x="1188" y="140.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="78.0469" x="1198" y="162.0637">Node A (1000)</text></g><!--entity nodeB2--><g id="elem_nodeB2"><rect fill="#C8E6C9" height="33.7988" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="98.0469" x="1055" y="140.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="78.0469" x="1065" y="162.0637">Node B (5000)</text></g><!--entity nodeD2--><g id="elem_nodeD2"><rect fill="#BBDEFB" height="33.7988" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="98.709" x="940.5" y="294.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="78.709" x="950.5" y="316.0637">Node D (6000)</text></g><!--entity nodeC2--><g id="elem_nodeC2"><rect fill="#C8E6C9" height="33.7988" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="98.709" x="1074.5" y="294.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="78.709" x="1084.5" y="316.0637">Node C (9000)</text></g><!--entity key3b--><g id="elem_key3b"><rect fill="#FFECB3" height="33.5977" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="79.7246" x="940" y="140.8079"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="27.3516" x="950" y="155.0637">Key3</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="59.7246" x="950" y="168.8625">hash=7000</text></g><g id="elem_GMN21"><path d="M1353.5,258.3079 L1353.5,364.8996 L1636.6602,364.8996 L1636.6602,268.3079 L1626.6602,258.3079 L1353.5,258.3079 " fill="#E8F5E9" style="stroke:#000000;stroke-width:1.0;"/><path d="M1626.6602,258.3079 L1626.6602,268.3079 L1636.6602,268.3079 L1626.6602,258.3079 " fill="#E8F5E9" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="139.0605" x="1359.5" y="274.5637">Only ~1/N keys affected!</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="3.334" x="1359.5" y="288.3625">&#160;</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="262.1602" x="1359.5" y="302.1614">Keys between Node B (5000) and Node D (6000)</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="94.0195" x="1359.5" y="315.9602">move from C to D</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="3.334" x="1359.5" y="329.759">&#160;</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="149.4199" x="1359.5" y="343.5579">Other keys stay unchanged!</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="243.5039" x="1359.5" y="357.3567">Add 1 node to 4 nodes = only ~25% migration</text></g><g id="elem_GMN24"><path d="M754.5,132.3079 L754.5,183.7043 L891.5625,183.7043 L891.5625,142.3079 L881.5625,132.3079 L754.5,132.3079 " fill="#FFF9C4" style="stroke:#000000;stroke-width:1.0;"/><path d="M881.5625,132.3079 L881.5625,142.3079 L891.5625,142.3079 L881.5625,132.3079 " fill="#FFF9C4" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="26.0039" x="760.5" y="148.5637">Rule</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="90.0586" x="786.5039" y="148.5637">: Key goes to the</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="114.7441" x="760.5" y="162.3625">first node found when</text><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="40.0195" x="760.5" y="176.1614">walking</text><text fill="#000000" font-family="Arial" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="56.7012" x="803.8535" y="176.1614">clockwise</text></g><!--link key1 to nodeA--><g id="link_key1_nodeA"><path d="M327.53,175.0779 C338.41,202.1879 358.0445,251.1298 370.5145,282.1898 " fill="none" id="key1-to-nodeA" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="372.75,287.7579,373.1088,277.9155,370.8871,283.1178,365.6848,280.8961,372.75,287.7579" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="76.0254" x="349" y="225.5637">clockwise to A</text></g><!--link key2 to nodeB--><g id="link_key2_nodeB"><path d="M212.75,175.0779 C218.99,202.1879 230.194,250.8508 237.344,281.9108 " fill="none" id="key2-to-nodeB" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="238.69,287.7579,240.5691,278.0899,237.5683,282.8853,232.773,279.8846,238.69,287.7579" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="76.0254" x="226" y="225.5637">clockwise to B</text></g><!--link key3 to nodeC--><g id="link_key3_nodeC"><path d="M95.28,175.0779 C97.42,202.1879 101.2582,250.7164 103.7082,281.7764 " fill="none" id="key3-to-nodeC" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="104.18,287.7579,107.4599,278.4712,103.7868,282.7733,99.4847,279.1003,104.18,287.7579" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="76.6875" x="101" y="225.5637">clockwise to C</text></g><!--link key3b to nodeC2--><g id="link_key3b_nodeC2"><path d="M995.41,175.0779 C1023.13,204.3279 1076.9439,261.1318 1104.5739,290.3018 " fill="none" id="key3b-to-nodeC2" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="#000000" points="1108.7,294.6579,1105.4149,285.373,1105.2616,291.0278,1099.6068,290.8745,1108.7,294.6579" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="33.3398" x="1045" y="225.5637">was C</text></g><!--link key3b to nodeD2--><g id="link_key3b_nodeD2"><path d="M981.07,175.0779 C982.99,204.3279 986.6259,259.5008 988.5459,288.6708 " fill="none" id="key3b-to-nodeD2" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="988.94,294.6579,992.3403,285.4146,988.6116,289.6686,984.3575,285.94,988.94,294.6579" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="12" lengthAdjust="spacing" textLength="34.0137" x="986" y="225.5637">now D</text></g><!--link addNode to GMN21--><g id="link_addNode_GMN21"><path d="M1329.1242,165.901 C1329.3058,166.0595 1329.49,166.2205 1329.6769,166.3838 C1330.0508,166.7104 1330.4354,167.0464 1330.8304,167.3915 C1331.6205,168.0817 1332.4525,168.8085 1333.3241,169.5699 C1340.2969,175.6613 1349.8088,183.971 1360.7525,193.5316 C1382.64,212.6529 1410.255,236.7779 1434.74,258.1679 " fill="none" id="addNode-GMN21" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--link ring to GMN24--><g id="link_ring_GMN24"><path d="M27.7715,100.6748 C27.8292,100.5279 27.8874,100.3811 27.9459,100.2345 C28.1801,99.6482 28.4202,99.0648 28.6665,98.4849 C29.1591,97.325 29.6764,96.1788 30.2196,95.0497 C31.306,92.7916 32.4959,90.602 33.7991,88.5089 C39.0119,80.1366 46.0375,73.3079 55.5,69.8079 C89.32,57.2979 670.27,58.4879 704.5,69.8079 C741.48,82.0379 776.32,110.7679 798.53,132.0979 " fill="none" id="ring-GMN24" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--SRC=[fLJTYjf05BxFKvnLIjt0RcEoMXKKp1-5BIxOswKm9fCu66Sa6IlRqhtkA_MYz7bwrLVecL5d4skzQOGmdlETl-yxcIkvf6iAcu8mRbKhnZUa96jOa6ILbsBBqq0KeeHs7AbV3P7IZ6mB6GikPmGpJ4j6YlF-3-mpXQvhMPB9Wa8WUCKgIRc4TwHQCfwFz07cU8IE0y_WVlJSQyjw3UFnkER3VzO6EoCvXPOnju1KK2f_E_9YDmxXYsK1FWafKsZDTG47Vdtx_lldZ_z_JtHtfkXxig05j7q_Z69_NxUaYIGynr5RCv4YDO-yin4Laqpm4NGTnxdMuHoTKsW7WwWV3Cz6-et8NYFIlnWPD2A7ZSZ0HDPekgTFtKU-H5B70yVHs1MQKFau7WPtJQHxG7hE2zGz3_KEqBSrg6UW6glhtDnC3eIC82b4ijgnYe8KC3rYN8FnJp7-4UCPJ72A2QolnusQfYbebiBcIjNiDVBwXZoIfjhTZWPnBneUz-mllQ5p8h9xMMNed4Xx6O_TzHluq3KBU7ONe7Eo0Eu_Dk2iM0kbLXJudb4BJOPc5tdU8JAeEMzl9yU-HdZOGQYuvq9IM0WfnHf4TaecXjls0o-UuBdxPgOI8TzPXgFGzCgsLUrxPLjGkQEKGuCv8Fn5ESqDmjVY4uMin6g1qZzKAHxmkYltoIj9dc3BaoLIXINGgUJlwiOL_awVAXY3q5svlLUmPdb9r5PO50kgWGvZbInVIZNL_Xuo7u9jpxS5jUsHQXvoWVamDJQ1leoLbToNozHD2xibvMZVaMAbijYssL-StnJy0m00]--></g></svg>