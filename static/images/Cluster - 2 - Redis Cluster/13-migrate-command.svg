<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="596px" preserveAspectRatio="none" style="width:483px;height:596px;background:#FEFEFE;" version="1.1" viewBox="0 0 483 596" width="483px" zoomAndPan="magnify"><title>MIGRATE Command Internals</title><defs/><g><rect fill="#FEFEFE" height="596" style="stroke:none;stroke-width:1.0;" width="483" x="0" y="0"/><text fill="#000000" font-family="Helvetica" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="312.9199" x="86.4707" y="40.2119">MIGRATE Command Internals</text><line style="stroke:#000000;stroke-width:1.0;" x1="53" x2="53" y1="109.2861" y2="538.9678"/><line style="stroke:#000000;stroke-width:1.0;" x1="316.6162" x2="316.6162" y1="109.2861" y2="538.9678"/><rect fill="#FFCDD2" height="52.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="67.6826" x="20" y="56.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="46.6963" x="30.4932" y="79.0898">Node A</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="53.6826" x="27" y="98.21">(Source)</text><rect fill="#FFCDD2" height="52.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="67.6826" x="20" y="537.9678"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="46.6963" x="30.4932" y="561.0117">Node A</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="53.6826" x="27" y="580.1318">(Source)</text><rect fill="#C8E6C9" height="52.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="63.7861" x="285.6162" y="56.0459"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="46.6963" x="294.1611" y="79.0898">Node B</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="49.7861" x="292.6162" y="98.21">(Target)</text><rect fill="#C8E6C9" height="52.2402" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="63.7861" x="285.6162" y="537.9678"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="46.6963" x="294.1611" y="561.0117">Node B</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="49.7861" x="292.6162" y="580.1318">(Target)</text><line style="stroke:#000000;stroke-width:1.0;" x1="53.8413" x2="95.8413" y1="163.5264" y2="163.5264"/><line style="stroke:#000000;stroke-width:1.0;" x1="95.8413" x2="95.8413" y1="163.5264" y2="176.5264"/><line style="stroke:#000000;stroke-width:1.0;" x1="54.8413" x2="95.8413" y1="176.5264" y2="176.5264"/><polygon fill="#000000" points="64.8413,172.5264,54.8413,176.5264,64.8413,180.5264,60.8413,176.5264" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="90.248" x="92.3447" y="139.3301">1. DUMP key1</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="153.2549" x="60.8413" y="158.4502">(serialize to RDB format)</text><polygon fill="#000000" points="305.5093,205.6465,315.5093,209.6465,305.5093,213.6465,309.5093,209.6465" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="53.8413" x2="311.5093" y1="209.6465" y2="209.6465"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="239.668" x="65.8413" y="204.5703">2. RESTORE key1 0 &lt;serialized-data&gt;</text><path d="M322,222.6465 L322,270.6465 L476,270.6465 L476,232.6465 L466,222.6465 L322,222.6465 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M466,222.6465 L466,232.6465 L476,232.6465 L466,222.6465 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="133.8613" x="328" y="243.6904">Key created on target</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="91.7998" x="328" y="262.8105">with same TTL</text><polygon fill="#000000" points="64.8413,297.0068,54.8413,301.0068,64.8413,305.0068,60.8413,301.0068" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="58.8413" x2="316.5093" y1="301.0068" y2="301.0068"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="35.793" x="167.7788" y="295.9307">3. OK</text><line style="stroke:#000000;stroke-width:1.0;" x1="53.8413" x2="95.8413" y1="353.2471" y2="353.2471"/><line style="stroke:#000000;stroke-width:1.0;" x1="95.8413" x2="95.8413" y1="353.2471" y2="366.2471"/><line style="stroke:#000000;stroke-width:1.0;" x1="54.8413" x2="95.8413" y1="366.2471" y2="366.2471"/><polygon fill="#000000" points="64.8413,362.2471,54.8413,366.2471,64.8413,370.2471,60.8413,366.2471" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="76.2617" x="89.6138" y="329.0508">4. DEL key1</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="133.8066" x="60.8413" y="348.1709">(remove from source)</text><path d="M13,379.2471 L13,446.2471 L357,446.2471 L357,389.2471 L347,379.2471 L13,379.2471 " fill="#FFFDE7" style="stroke:#000000;stroke-width:1.0;"/><path d="M347,379.2471 L347,389.2471 L357,389.2471 L347,379.2471 " fill="#FFFDE7" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="60.6553" x="71.3706" y="400.291">Warning:</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="77.7793" x="135.9155" y="400.291">MIGRATE is</text><text fill="#FF0000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="51.3652" x="217.5845" y="400.291">blocking</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="3.8896" x="268.9497" y="400.291">!</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="218.6611" x="71.3706" y="419.4111">Large keys (big hash/list) can block</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="180.5576" x="71.3706" y="438.5313">the source node for seconds!</text><path d="M13,456.6074 L13,523.6074 L357,523.6074 L357,466.6074 L347,456.6074 L13,456.6074 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M347,456.6074 L347,466.6074 L357,466.6074 L347,456.6074 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Helvetica" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="68.4482" x="62.0088" y="477.6514">Atomicity:</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="237.3848" x="62.0088" y="496.7715">Key appears on target and disappears</text><text fill="#000000" font-family="Helvetica" font-size="14" lengthAdjust="spacing" textLength="140.041" x="62.0088" y="515.8916">from source atomically</text><!--SRC=[RLB1Rjf04BtxAmPo2LA0aaPfYv0b6-ms2YGLKFNIozWUx1NhNRgx9A9VtrcR15gXlSs-D_FUc-cuYcg2dKIX0hiLQeS6QyWmtvP6xrKnrL8Rk4eJ_yuG1MrmBrsgbNj2xj3zHlA5dCYnUncr4dy8HdTddvP-xqdbj21hiQH8Yb91JigH2G8dd2HOF7nTHki4fhgkKHNmu3yLIXi4t8EdYHqg1zqdNH14lzJrIkzDJhqke0N5nOYbfzFPxFO2FcRy6ar9xeIFuMhwERcVVWc2bjuFZtt6C1h0xCVYEspfC6Ag9IDGUbTEmt8MmqQR6btlFsRCpDi1B9FL-dcPD6Ju09DtTj4lq67eMOx0YB9oe3SjDG1uf0FaXj1H0Lg1Q_Ho_LMu2gnFVhsU1yJPU7uxEuR-cUoF0tX-l63dZkqaypStXchzGh0ncXVJXdYKn6NJacxU8ahJT9PyOXMJBFo9HWbLZYV3B7pVbx0moVtbZ0qLOIPrpbil9yEc5dQOEVT6_70BrvaeeK9R3QMmhWSvAcWe3EFpFCffPlkC-MvohGhR-SVr9Q6jmCZfcXVl3et4OwIusn4QUueK_7aLmXu_67OM1M3J0wKyd8R-1G00]--></g></svg>